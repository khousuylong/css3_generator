YK={};YK.version="0.1.5";YK.developers="YOOLK-UI Team";YK.company="Yoolk (Cambodia) Co., Ltd";YK.licence="MIL and GPL Licences";YK.year="2009";YK.lastupdate="2010-09-30";YK.NullObjectBuilder={build:function(a){var b={};for(el in a){if(typeof a[el]==="function"){b[el]=function(){}}}return b}};domDrag={obj:null,init:function(d,l,g,b,f,a,h,p,m,k,n,c){d.onmousedown=domDrag.start;d.hmode=m?false:true;d.vmode=k?false:true;d.root=l&&l!=null?l:d;if(d.hmode&&isNaN(parseInt(d.root.style.left))){d.root.style.left="0px"}if(d.vmode&&isNaN(parseInt(d.root.style.top))){d.root.style.top="0px"}if(!d.hmode&&isNaN(parseInt(d.root.style.right))){d.root.style.right="0px"}if(!d.vmode&&isNaN(parseInt(d.root.style.bottom))){d.root.style.bottom="0px"}d.minX=typeof g!="undefined"?g:null;d.minY=typeof f!="undefined"?f:null;d.maxX=typeof b!="undefined"?b:null;d.maxY=typeof a!="undefined"?a:null;d.minX=h?0:d.minX;d.maxX=h?0:d.maxX;d.minY=p?0:d.minY;d.maxY=p?0:d.maxY;d.xMapper=n?n:null;d.yMapper=c?c:null;d.root.onDragStart=new Function();d.root.onDragEnd=new Function();d.root.onDrag=new Function()},start:function(b){var c=domDrag.obj=this;b=domDrag.fixE(b);var d=parseInt(c.vmode?c.root.style.top:c.root.style.bottom);var a=parseInt(c.hmode?c.root.style.left:c.root.style.right);c.root.onDragStart(a,d,b);c.lastMouseX=b.clientX;c.lastMouseY=b.clientY;if(c.hmode){if(c.minX!=null){c.minMouseX=b.clientX-a+c.minX}if(c.maxX!=null){c.maxMouseX=c.minMouseX+c.maxX-c.minX}}else{if(c.minX!=null){c.maxMouseX=-c.minX+b.clientX+a}if(c.maxX!=null){c.minMouseX=-c.maxX+b.clientX+a}}if(c.vmode){if(c.minY!=null){c.minMouseY=b.clientY-d+c.minY}if(c.maxY!=null){c.maxMouseY=c.minMouseY+c.maxY-c.minY}}else{if(c.minY!=null){c.maxMouseY=-c.minY+b.clientY+d}if(c.maxY!=null){c.minMouseY=-c.maxY+b.clientY+d}}document.onmousemove=domDrag.drag;document.onmouseup=domDrag.end;return false},drag:function(f){f=domDrag.fixE(f);var g=domDrag.obj;var c=f.clientY;var d=f.clientX;var k=parseInt(g.vmode?g.root.style.top:g.root.style.bottom);var b=parseInt(g.hmode?g.root.style.left:g.root.style.right);var a,h;if(g.minX!=null){d=g.hmode?Math.max(d,g.minMouseX):Math.min(d,g.maxMouseX)}if(g.maxX!=null){d=g.hmode?Math.min(d,g.maxMouseX):Math.max(d,g.minMouseX)}if(g.minY!=null){c=g.vmode?Math.max(c,g.minMouseY):Math.min(c,g.maxMouseY)}if(g.maxY!=null){c=g.vmode?Math.min(c,g.maxMouseY):Math.max(c,g.minMouseY)}a=b+((d-g.lastMouseX)*(g.hmode?1:-1));h=k+((c-g.lastMouseY)*(g.vmode?1:-1));if(g.xMapper){a=g.xMapper(k)}else{if(g.yMapper){h=g.yMapper(b)}}domDrag.obj.root.style[g.hmode?"left":"right"]=a+"px";domDrag.obj.root.style[g.vmode?"top":"bottom"]=h+"px";domDrag.obj.lastMouseX=d;domDrag.obj.lastMouseY=c;domDrag.obj.root.onDrag(a,h,f);return false},end:function(){document.onmousemove=null;document.onmouseup=null;domDrag.obj.root.onDragEnd(parseInt(domDrag.obj.root.style[domDrag.obj.hmode?"left":"right"]),parseInt(domDrag.obj.root.style[domDrag.obj.vmode?"top":"bottom"]));domDrag.obj=null},fixE:function(a){if(typeof a=="undefined"){a=window.event}if(typeof a.layerX=="undefined"){a.layerX=a.offsetX}if(typeof a.layerY=="undefined"){a.layerY=a.offsetY}return a}};function UUID(){this.id=this.createUUID()}UUID.prototype.valueOf=function(){return this.id};UUID.prototype.toString=function(){return this.id};UUID.prototype.createUUID=function(){var d=new Date(1582,10,15,0,0,0,0);var k=new Date();var m=k.getTime()-d.getTime();var b="-";var o=UUID.getIntegerBits(m,0,31);var l=UUID.getIntegerBits(m,32,47);var g=UUID.getIntegerBits(m,48,59)+"1";var c=UUID.getIntegerBits(UUID.rand(4095),0,7);var f=UUID.getIntegerBits(UUID.rand(4095),0,7);var a=UUID.getIntegerBits(UUID.rand(8191),0,7)+UUID.getIntegerBits(UUID.rand(8191),8,15)+UUID.getIntegerBits(UUID.rand(8191),0,7)+UUID.getIntegerBits(UUID.rand(8191),8,15)+UUID.getIntegerBits(UUID.rand(8191),0,15);return o+b+l+b+g+b+c+f+b+a};UUID.getIntegerBits=function(g,h,b){var a=UUID.returnBase(g,16);var d=new Array();var f="";var c=0;for(c=0;c<a.length;c++){d.push(a.substring(c,c+1))}for(c=Math.floor(h/4);c<=Math.floor(b/4);c++){if(!d[c]||d[c]==""){f+="0"}else{f+=d[c]}}return f};UUID.returnBase=function(a,b){return(a).toString(b).toUpperCase()};UUID.rand=function(a){return Math.floor(Math.random()*(a+1))};function SortableTable(b){this.tbody=b.getElementsByTagName("tbody");this.thead=b.getElementsByTagName("thead");this.tfoot=b.getElementsByTagName("tfoot");var a=this.tbody[0];this.getInnerText=function(h){if(typeof(h.textContent)!="undefined"){return h.textContent}if(typeof(h.innerText)!="undefined"){return h.innerText}if(typeof(h.innerHTML)=="string"){return h.innerHTML.replace(/<[^<>]+>/g,"")}};this.getParent=function(k,h){if(k==null){return null}else{if(k.nodeType==1&&k.tagName.toLowerCase()==h.toLowerCase()){return k}else{return this.getParent(k.parentNode,h)}}};this.sort=function(r){var h=r.cellIndex;var p=this.getInnerText(a.rows[1].cells[h]);var q=this.sortCaseInsensitive;if(p.match(/\d\d[-]+\d\d[-]+\d\d\d\d/)){q=this.sortDate}if(p.replace(/^\s+|\s+$/g,"").match(/^[\d\.]+$/)){q=this.sortNumeric}this.sortColumnIndex=h;var l=[];var k=[];for(j=a.rows.length;j--;){var s=a.rows[j];var o=s.className.split(" ");var n=new RegExp("^empty_");if(!s.id.match(n)){l.push(s)}else{k.push(s)}}l.sort(q);if(r.getAttribute("sortdir")=="down"){l.reverse();r.setAttribute("sortdir","up")}else{r.setAttribute("sortdir","down")}var m=document.createDocumentFragment();for(d=l.length;d--;){m.appendChild(l[d])}a.appendChild(m);for(d=0;d<k.length;d++){m.appendChild(k[d])}a.appendChild(m);for(j=0;j<a.rows.length;j++){var s=a.rows[j];var o=s.className.split(" ");if(j%2===0){o[1]="gtk_listview_table_body_tr_even"}else{o[1]="gtk_listview_table_body_tr_odd"}s.className=o.join(" ")}};this.sortCaseInsensitive=function(k,h){aa=c.getInnerText(k.cells[c.sortColumnIndex]).toLowerCase();bb=c.getInnerText(h.cells[c.sortColumnIndex]).toLowerCase();if(aa==bb){return 0}if(aa<bb){return -1}return 1};this.sortDate=function(k,h){aa=c.getInnerText(k.cells[c.sortColumnIndex]);bb=c.getInnerText(h.cells[c.sortColumnIndex]);date1=aa.substr(6,4)+aa.substr(3,2)+aa.substr(0,2);date2=bb.substr(6,4)+bb.substr(3,2)+bb.substr(0,2);if(date1==date2){return 0}if(date1<date2){return -1}return 1};this.sortNumeric=function(k,h){aa=parseFloat(c.getInnerText(k.cells[c.sortColumnIndex]));if(isNaN(aa)){aa=0}bb=parseFloat(c.getInnerText(h.cells[c.sortColumnIndex]));if(isNaN(bb)){bb=0}return aa-bb};var c=this;var f=this.thead;if(this.tbody.length<=0){return}if(f&&f[0].rows&&f[0].rows.length>0){var g=f[0].rows[0]}else{return}for(var d=0;d<g.cells.length;d++){g.cells[d].sTable=this;g.cells[d].onclick=function(){this.sTable.sort(this);return false}}}YK.Event={_publicListener:{},addDomListener:function(a,c,d){if(a.addEventListener){a.addEventListener(c,d,false)}else{a.attachEvent("on"+c,d)}var b={obj:a,type:c,callback:d};return b},addListener:function(b,a,c){if(!b.listeners){b.listeners={}}if(!b.listeners[a]){b.listeners[a]=[]}b.listeners[a].push(c);return{obj:b,type:a,callback:c,isDomObj:false}},addPublicListener:function(b,a,d){var c={obj:b,callback:d,type:a};if(this._publicListener[a]){this._publicListener[a].push(c)}else{this._publicListener[a]=[c]}return c},triggerPublicListener:function(c){var a=[];for(var b=1;b<arguments.length;b++){a[b-1]=arguments[b]}var d=this._publicListener[c];if(d){for(var b=d.length;b--;){d[b].callback.apply(d[b].obj,a)}}},removeListener:function(a){if(a.obj.removeEventListener){a.obj.removeEventListener(a.type,a.callback,false);return}if(a.obj.detachEvent){a.obj.detachEvent("on"+a.type,a.callback);return}this._removePublicListener(a)},registerHandler:function(a){if(a.obj.addEventListener){a.obj.addEventListener(a.type,a.callback,false)}else{a.obj.attachEvent("on"+a.type,a.callback)}return a},trigger:function(d,c){if(d.listeners&&d.listeners[c]){var a=[];for(var b=2;b<arguments.length;b++){a[b-2]=arguments[b]}for(var b=0;b<d.listeners[c].length;b++){d.listeners[c][b].apply(d,a)}}},stopBubble:function(a){if(a&&a.stopPropagation){a.stopPropagation()}else{window.event.cancelBubble=true}},stopDefault:function(a){if(a&&a.preventDefault){a.preventDefault()}else{window.event.returnValue=false}return false},_removePublicListener:function(c){var b=this._publicListener[c.type];for(var a=b.length;a--;){if(b[a]["obj"]===c.obj){b.splice(a,1)}}}};YK.LibAdapter={SortTable:function(a){new SortableTable(a)},vDragInit:function(a,c,b){domDrag.init(a,null,null,null,c,b,true)},hDragInit:function(b,a,c){domDrag.init(b,null,a,c,null,null,false,true)},dragInit:function(b,a,d,f,c){domDrag.init(b,null,a,d,f,c,false,false)},getGUID:function(){return new UUID().id}};YK.Util={clone:function(b){var a=function(){};a.prototype=b;var d=new a();d.constructor=a;return d},isMatched:function(a,b){return new RegExp(a).test(b)},arrayRemoveElement:function(f,c){var d=false;for(var b=0,a=f.length;b<a;b++){if(f[b]===c){d=true;break}}if(d){f.splice(b,1)}},arraySwapElements:function(f,b,a){var d=f.indexOf(b);var c=f.indexOf(a);f[d]=null;f[c]=null;f[d]=a;f[c]=b},getWindowHeight:function(){var a=document.documentElement;return self.innerHeight||(a&&a.clientHeight)||document.body.clientHeight},getWindowWidth:function(){var a=document.documentElement;return self.innerWidth||(a&&a.clientWidth)||document.body.clientWidth},calculateTextWidthHeight:function(d){var c=YK.domBuilder.create({append:document.body,tag:"span",style:"position:absolute;"});var d=YK.domBuilder.create({append:c,tag:"text",text:d});var b=c.clientWidth;var a=c.clientHeight;document.body.removeChild(c);return[b,a]},calculateTextWidth:function(c){var b=YK.domBuilder.create({append:document.body,tag:"span",style:"position:absolute;"});var c=YK.domBuilder.create({append:b,tag:"text",text:c});var a=b.clientWidth;document.body.removeChild(b);return a},calculateTextHeight:function(d,c){var b=YK.domBuilder.create({append:document.body,tag:"span",style:"position:absolute;"});b.style.maxWidth=c+"px";var d=YK.domBuilder.create({append:b,tag:"text",text:d});var a=b.clientHeight;document.body.removeChild(b);return a},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},fullHeight:function(c){var a;if(!document.body){return 0}document.body.appendChild(c);if(this.getStyle(c,"display")!="none"){a=c.offsetHeight||this.getHeight(c);document.body.removeChild(c);return a}var b=this.resetCSS(c,{display:"",visibility:"hidden",position:"absolute"});a=c.clientHeight||this.getHeight(c);this.restoreCSS(c,b);document.body.removeChild(c);return a},fullWidth:function(c){var b;if(!document.body){return 0}document.body.appendChild(c);if(this.getStyle(c,"display")!="none"){b=c.offsetWidth||this.getWidth(c);document.body.removeChild(c);return b+YK.Util.EXTRAPIXEL}var a=this.resetCSS(c,{display:"",visibility:"hidden",position:"absolute"});b=c.clientWidth||this.getWidth(c);this.restoreCSS(c,a);document.body.removeChild(c);return b+YK.Util.EXTRAPIXEL},getStyle:function(c,a){if(c.style[a]){return c.style[a]}else{if(c.currentStyle){return c.currentStyle[a]}else{if(document.defaultView&&document.defaultView.getComputedStyle){a=a.replace(/([A-Z])/g,"-$1");a=a.toLowerCase();var b=document.defaultView.getComputedStyle(c,"");return b&&b.getPropertyValue(a)}else{return null}}}},getHeight:function(a){return parseInt(this.getStyle(a,"height"))},getWidth:function(a){return parseInt(this.getStyle(a,"width"))},pageX:function(a){return a.offsetParent?a.offsetLeft+this.pageX(a.offsetParent):a.offsetLeft},pageY:function(a){return a.offsetParent?a.offsetTop+this.pageY(a.offsetParent):a.offsetTop},getPageSize:function(){var n,l,m=document.body,a=window.innerHeight,g=window.scrollMaxY;if(a&&g){n=m.scrollWidth;l=a+g}else{if(m.scrollHeight>m.offsetHeight){n=m.scrollWidth;l=m.scrollHeight}else{n=m.offsetWidth;l=m.offsetHeight}}var o,f,k=document.documentElement;if(self.innerHeight){o=self.innerWidth;f=self.innerHeight}else{if(k&&k.clientHeight){o=k.clientWidth;f=k.clientHeight}else{if(m){o=m.clientWidth;f=m.clientHeight}}}var p=(l<f)?f:l,c=(n<o)?o:n;return[c,p,o,f]},resetCSS:function(c,d){var a={};for(var b in d){a[b]=c.style[b];c.style[b]=d[b]}return a},restoreCSS:function(b,c){for(var a in c){b.style[a]=c[a]}},debug:function(a){throw (a)},removeArrayElements:function(c,b,a){Array.remove(c,b,a)},getScrollX:function(){var a=document.documentElement;return pageXOffset||(a&&a.scrollLeft)||document.body.scrollLeft},getScrollY:function(){var a=document.documentElement;return self.pageYOffset||(a&&a.scrollTop)||document.body.scrollTop},detect:{init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"An unknown version";this.OS=this.searchString(this.dataOS)||"An unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}};YK.Util.detect.init();YK.Util.EXTRAPIXEL=(YK.Util.detect.OS=="Mac"&&YK.Util.detect.browser=="Firefox")?1:0;Array.remove=function(d,c,b){var a=d.slice((b||c)+1||d.length);d.length=c<0?d.length+c:c;return d.push.apply(d,a)};$create=function(a){return document.createElement(a)};$id=function(a){return document.getElementById(a)};$tag=function(a){return document.getElementsByTagName(a)};$name=function(a){return document.getElementsByName(a)};$classname=function(a){return document.getElementsByClassName(a)};YK.domBuilder={doc:document,create:function(c){if(!c.tag){return null}var a;if((c.name||c.type)&&this.ie){var b=(c.name)?"name='"+c.name+"'":"";var f=(c.type)?"type='"+c.type+"'":"";var d="<"+c.tag+" "+b+" "+f+" />";a=this.doc.createElement(d);delete c.name}else{a=this.doc.createElement(c.tag)}delete c.tag;if(c.append){c.append.appendChild(a);delete c.append}c.edit=a;a=this.edit(c);return a},edit:function(f){var b=f.edit;delete f.edit;if(f.text){b.appendChild(this.doc.createTextNode(f.text));delete f.text}if(f.className){b.className=f.className;delete f.className}var h=f.style;if(h&&this.ie){var d=h.split(";"),a=d.length;for(var g=d.length;g--;){var c=d[g].replace(/ /g,"");if(c){var k=c.split(":");b.style[this._camelize(k[0])]=k[1]}}delete h}for(property in f){b.setAttribute(property,f[property])}return b},getTextSize:function(c){var b=YK.domBuilder.create({tag:"span",text:c});document.body.appendChild(b);var a=[b.offsetWidth,b.offsetHeight];document.body.removeChild(b);return a},showElement:function(a){a.style.display="block"},hideElement:function(a){a.style.display="none"},isShowed:function(a){return a.style.display==="none"?false:true},applyAttributes:function(c,a){for(var b in a){c.style[b]=a[b]}}};YK.LISTSTORE="LIST_STORE";YK.TREESTORE="TREE_STORE";YK.TREE_ITER="TREE_ITER";YK.WINDOW_TOPLEVEL="WINDOW_TOPLEVEL";YK.WINDOW_POPUP="WINDOW_POPUP";YK.WIN_POS_CENTER="WIN_POS_CENTER";YK.WIN_POS_CENTER="center";YK.JUSTIFY_LEFT="left";YK.JUSTIFY_RIGHT="right";YK.JUSTIFY_TOP="TOP";YK.JUSTIFY_BOTTOM="BOTTOM";YK.JUSTIFY_CENTER="center";YK.JUSTIFY_FILL="justify";YK.ENTER_KEY=13;YK.UP_ARROW_KEY=38;YK.DOWN_ARROW_KEY=40;YK.LEFT_ARROW_KEY=37;YK.RIGHT_ARROW_KEY=39;YK.DELETE_KEY=46;YK.TAB_KEY=9;YK.BACKSPACE_KEY=8;YK.A_KEY=97;YK.CAP_A_KEY=65;YK.ESC_KEY=27;YK.WINDOW_RESTORED="WINDOW_RESTORED";YK.WINDOW_MAXIMIZED="WINDOW_MAXIMIZED";YK.WINDOW_MINIMIZED="WINDOW_MINIMIZED";YK.PANEL_RESTORED="PANEL_RESTORED";YK.PANEL_MAXIMIZED="PANEL_MAXIMIZED";YK.PANEL_MINIMIZED="PANEL_MINIMIZED";YK.WINDOW_WARNING="WINDOW_WARNING";YK.WINDOW_CONFIRM="WINDOW_CONFIRM";YK.WINDOW_INFO="WINDOW_INFO";YK.WINDOW_ERROR="WINDOW_ERROR";YK.SMART_ENTRY_DROPDOWN_FIXED_MODEL="SMART_ENTRY_DROPDOWN_FIXED_MODEL";YK.SMART_ENTRY_DROPDOWN_DYNAMIC_MODEL="SMART_ENTRY_DROPDOWN_DYNAMIC_MODEL";YK.SMART_ENTRY="SMART_ENTRY";YK.BLANK_WIDGET="BLANK_WIDGET";YK.WIDGET="WIDGET";YK.POPUP_WINDOW_ZINDEX="100000";YK.POPUP_WINDOW_DISABLED_ZINDEX="99999";YK.DROPDOWN_ZINDEX="95000";YK.TOOLTIP_ZINDEX="94000";YK.WINDOW_ZINDEX="90000";YK.WINDOW_MODAL_ZINDEX="89999";YK.MENU_ZINDEX="89990";YK.PANEL_ZINDEX="80000";YK.PANEL_MINIMIZED_ZINDEX="80001";YK.PANEL_TOPMOST_ZINDEX="80003";YK.PANEL_MULTICONTAINER_ZINDEX="80004";YK.PANED_DIVIDER_ZINDEX="80000";YK.SHOWLOADING_ZINDEX="70000";YK.POSITION_TOP_RIGHT="topright";YK.POSITION_TOP_CENTER="topcenter";YK.POSITION_TOP_LEFT="topleft";YK.POSITION_BOTTOM_RIGHT="bottomright";YK.POSITION_BOTTOM_CENTER="bottomcenter";YK.POSITION_BOTTOM_LEFT="bottomleft";YK.POSITION_RIGHT_TOP="righttop";YK.POSITION_RIGHT_MIDDLE="rightmiddle";YK.POSITION_RIGHT_BOTTOM="rightbottom";YK.POSITION_LEFT_TOP="lefttop";YK.POSITION_LEFT_MIDDLE="leftmiddle";YK.POSITION_LEFT_BOTTOM="leftbottom";YK.POSITION_JUSTIFIED_TOPLEFT="justified_topleft";YK.POSITION_JUSTIFIED_TOPRIGHT="justified_topright";YK.POSITION_JUSTIFIED_BOTTOMLEFT="justified_bottomleft";YK.POSITION_JUSTIFIED_BOTTOMRIGHT="justified_bottomright";YK.SHOW_NODE_LOADING="SHOW_NODE_LOADING";YK.HIDE_NODE_LOADING="HIDE_NODE_LOADING";YK.SHOW_NODE="SHOW_NODE";YK.HIDE_NODE="HIDE_NODE";gobject={_signals:[],_signalCount:0,signalNew:function(a,b){var c={};if(this.signalLookup(a,b)){throw ("RuntimeError: this signal is already binned to the type")}this._signalCount++;c[a]={type:b,id:this._signalCount};this._signals.push(c);return this._signalCount},signalLookup:function(a,c){for(var b=this._signals.length;b--;){if(this._signals[b][a]&&this._signals[b][a].type===c){return this._signals[b][a].id}if(this._signals[b][a]&&c instanceof this._signals[b][a].type){return this._signals[b][a].id}}return null}};gobject.GObject=function(){this.props={};this._signalHandlers={};this.emit=function(a){if(this._signalHandlers[a]){var b=[];for(var c=1;c<arguments.length;c++){b.push(arguments[c])}for(var c=0;c<this._signalHandlers[a].length;c++){this._signalHandlers[a][c].handler.apply(this,b.concat(this._signalHandlers[a][c].args))}}};this.connect=function(a,d){this._signalCheck(a);if(!this._signalHandlers[a]){this._signalHandlers[a]=[];this._handlerId++}var b=[];var f=new UUID().id;for(var c=2;c<arguments.length;c++){b.push(arguments[c])}this._signalHandlers[a].push({handler:d,args:b,id:f});return f};this.disconnect=function(f){for(var d in this._signalHandlers){var b=this._signalHandlers[d];for(var c=0,a=b.length;c<a;c++){if(b[c].id===f){b.splice(c,1);break}}}};this._signalCheck=function(a){var b=gobject.signalLookup(a,this);if(b){return b}throw ("Undefined signal name: "+a)};this._removeSignal=function(b){for(var a in this._signalHandlers){if(a==b){delete this._signalHandlers.handlerId}}}};YK.Object=function(){gobject.GObject.apply(this);this._id=YK.Object._id;YK.Object._id+=1};YK.Object._id=0;YK.Effect={_fadeOpacity:function(a,c){var b=c;if(c>100){c=b=100}else{if(c<0){c=b=0}}b/=100;if(c<1){c=1}a.style.opacity=(b);a.style.filter="alpha(opacity="+c+")"},_fadeOpacityStep:function(a,g,c,f,h,d){var b=this;this._fadeOpacity(a,Math.round(parseInt(f)+(h*g)));if(g<c){setTimeout(function(){b._fadeOpacityStep(a,(g+1),c,f,h,d)},d)}},setOpacity:function(b,g,a,f,d){var c=Math.ceil(d*(f/1000));var h=(a-g)/c;this._fadeOpacityStep(b,0,c,g,h,(f/c))}};YK.Widget=function(){YK.Object.apply(this);this._domObj;this._minWidth=16;this._minHeight=16;this._width=this._minWidth;this._height=this._minHeight;this._isMinWidthChanged=false;this._isMinHeightChanged=false;this._activated=false;this._tag=null;this._domObj;this._signalName="";this._parent=null;this._tooltipObj=null;this._enabled=true;this.borderWidth=2;this._tabIndex="";this.type=YK.WIDGET;this._mousdownedHandler=null;this._handlers=[];this._render=function(){this._domObj=YK.domBuilder.create({tag:"div",className:"yk_widget"});var a=this._domObj.style;a.width=this._width+"px";a.height=this._height+"px";a.boder="1px";a.position="relative"};this._render();this._receivePublicEvent();this._initPublicEvent()};YK.Widget.prototype=new YK.Object();YK.Widget.prototype.constructor=YK.Widget;YK.Widget.prototype._receivePublicEvent=function(){var a=this;YK.Event.addPublicListener(this,"deactivated",function(){a.hideTooltip()});YK.Event.addPublicListener(this,"destroyed",function(){if(a._tooltipObj){var b=a._tooltipObj.getNode();if(b.parentNode){b.parentNode.removeChild(b)}}})};YK.Widget.prototype._initPublicEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"keyup",function(b){if(b.keyCode===YK.RIGHT_ARROW_KEY&&b.shiftKey){YK.Event.triggerPublicListener("rightarrowkeypressed",a);YK.domBuilder.applyAttributes(a._domObj,{border:""})}if(b.keyCode===YK.LEFT_ARROW_KEY&&b.shiftKey){YK.Event.triggerPublicListener("leftarrowkeypressed",a);YK.domBuilder.applyAttributes(a._domObj,{border:""})}YK.Event.stopBubble(b)});this._mousdownedHandler=YK.Event.addDomListener(this._domObj,"mousedown",function(b){YK.Event.triggerPublicListener("mousedowned",a)})};YK.Widget.prototype.focus=function(){this._domObj.focus()};YK.Widget.prototype.blur=function(){this._domObj.blur()};YK.Widget.prototype.setTabIndex=function(a){this._domObj.tabIndex=(a===undefined||a===null||a==="")?99999:a.toString()};YK.Widget.prototype.getTabIndex=function(){return parseInt(this._domObj.tabIndex)};YK.Widget.prototype.showLoading=function(){if(!this._loadingImgContainer){this._loadingImgContainer=this._constructLoading();this._appendLoading()}else{this._loadingImgContainer.style.display="table"}};YK.Widget.prototype.hideLoading=function(){YK.domBuilder.hideElement(this._loadingImgContainer)};YK.Widget.prototype.enable=function(){};YK.Widget.prototype.disable=function(){};YK.Widget.prototype.setEnable=function(a){this._enabled=(typeof a!="undefined"&&typeof a=="boolean")?a:true;this._enabled?this.enable():this.disable()};YK.Widget.prototype.setTag=function(a){this._tag=a};YK.Widget.prototype.getTag=function(){return this._tag};YK.Widget.prototype.setParent=function(a){this._parent=a};YK.Widget.prototype.getParent=function(){return this._parent};YK.Widget.prototype.showTooltip=function(a){if(this._tooltipObj){if(a||typeof a==="undefined"){this._tooltipObj.show()}else{this._tooltipObj.hide()}}};YK.Widget.prototype.hideTooltip=function(){if(this._tooltipObj){this._tooltipObj.hide()}};YK.Widget.prototype.setTooltip=function(a){this._textMessage=a||"Undefined";if(!this._tooltipObj){this._tooltipObj=this._createTooltip(this._textMessage)}else{this._tooltipObj.addContent(this._textMessage)}};YK.Widget.prototype._createTooltip=function(a){var b=new YK.Tooltip(this._domObj,a,YK.POSITION_RIGHT_TOP);return b};YK.Widget.prototype.refresh=function(){var a=this.getMinWidth();a=a<this._width?this._width:a;this.resizeWidth(a);var b=this.getMinHeight();b=b<this._height?this._height:b;this.resizeHeight(b)};YK.Widget.prototype.setBoldTitle=function(a){if(a){this._domTitle.style.fontWeight="bold"}else{this._domTitle.style.fontWeight="normal"}};YK.Widget.prototype.getNode=function(){return this._domObj};YK.Widget.prototype.show=function(){YK.domBuilder.showElement(this._domObj)};YK.Widget.prototype.hide=function(){YK.domBuilder.hideElement(this._domObj)};YK.Widget.prototype.isHidden=function(){return !YK.domBuilder.isShowed(this._domObj)};YK.Widget.prototype.resetMinSize=function(a,b){this.resetMinWidth(a);this.resetMinHeight(b)};YK.Widget.prototype.resetMinWidth=function(a){this._isMinWidthChanged=a?true:false;this._minWidth=a;this._width=a};YK.Widget.prototype.resetMinHeight=function(a){this._isMinHeightChanged=a?true:false;this._minHeight=a;this._height=a};YK.Widget.prototype.setSize=function(b,a){this._height=a;this._width=b};YK.Widget.prototype.getSize=function(){return[this._width,this._height]};YK.Widget.prototype.setWidth=function(a){this._width=a};YK.Widget.prototype.getWidth=function(){return this._width};YK.Widget.prototype.setHeight=function(a){this._height=a};YK.Widget.prototype.getHeight=function(){return this._height};YK.Widget.prototype._constructLoading=function(){var a=YK.domBuilder.create({tag:"table","class":"yk_loading_bar_container_widget"});a.style.zIndex=YK.SHOWLOADING_ZINDEX;var b=YK.domBuilder.create({append:a,tag:"tr"});var c=YK.domBuilder.create({append:b,tag:"td"});this._loadingImgFrame=YK.domBuilder.create({append:c,tag:"div","class":"yk_loading_frame"});this._loadingImg=YK.domBuilder.create({append:this._loadingImgFrame,tag:"div","class":"yk_loading_bar_widget"});return a};YK.Widget.prototype._appendLoading=function(){var a=this._domObj.firstChild;if(a){this._domObj.insertBefore(this._loadingImgContainer,a)}else{this._domObj.appendChild(this._loadingImgContainer)}};YK.Widget.prototype._removeHandlers=function(){for(var a=this._handlers.length;a--;){YK.Event.removeListener(this._handlers[a])}};YK.Widget.prototype._addHandlers=function(){for(var a=this._handlers.length;a--;){YK.Event.registerHandler(this._handlers[a])}};YK.Widget.prototype._resizeHeight=function(a){this._domObj.style.height=a+"px";this._height=a};YK.Widget.prototype._resizeWidth=function(a){this._domObj.style.width=a+"px";this._width=a};YK.Widget.prototype.getMinWidth=function(){return this._minWidth};YK.Widget.prototype.getMinHeight=function(){return this._minHeight};YK.Widget.prototype.resizeWidth=function(b){var a=b>this._minWidth?b:this._minWidth;this._resizeWidth(a)};YK.Widget.prototype.resizeHeight=function(a){var b=a>this._minHeight?a:this._minHeight;this._resizeHeight(b)};YK.Widget.prototype.resetHeight=function(){this.setHeight(this.getMinHeight())};YK.Widget.prototype.resetWidth=function(){this.setWidth(this.getMinWidth())};YK.StateWindowMaximized=function(a,b){this._window=a;this._name=YK.WINDOW_MAXIMIZED;this._preState=b};YK.StateWindowMaximized.prototype.restore=function(a){this._window._restore();this._window.resizeWidth(this._window._restoredOption.width);this._window.resizeHeight(this._window._restoredOption.height);this._window.move(this._window._restoredOption.left,this._window._restoredOption.top);this._window.showRestoredHeader();this._window.setState(new YK.StateWindowRestored(this._window,this))};YK.StateWindowMaximized.prototype.minimize=function(){this._window._minimize();this._window.showMinimizedHeader();this._window.setState(new YK.StateWindowMinimized(this._window,this))};YK.StateWindowMaximized.prototype._setRestoredOption=function(a){YK.StateWindowMaximized.restoredWidth=a.width;YK.StateWindowMaximized.restoredHeight=a.height;YK.StateWindowMaximized.restoredLeft=a.left;YK.StateWindowMaximized.restoredTop=a.top};YK.StateWindowMinimized=function(a,b){this._window=a;this._name=YK.WINDOW_MINIMIZED;this._preState=b};YK.StateWindowMinimized.prototype.maximize=function(){this._window._maximize();this._window.setState(new YK.StateWindowMaximized(this._window,this))};YK.StateWindowMinimized.prototype.restore=function(){this._window._restore();if(this._window.getState()._preState._name===YK.WINDOW_MAXIMIZED){this._window.showMaximizedHeader();this._window.setState(new YK.StateWindowMaximized(this._window,this))}if(this._window.getState()._preState._name===YK.WINDOW_RESTORED){this._window.showRestoredHeader();this._window.setState(new YK.StateWindowRestored(this._window,this))}};YK.StateWindowRestored=function(a,b){this._window=a;this._name=YK.WINDOW_RESTORED;this._preState=b};YK.StateWindowRestored.prototype.maximize=function(){this._window._maximize();this._window.move(0,0);this._window.resizeWidth(window.innerWidth-3);this._window.resizeHeight(window.innerHeight-3);this._window.showMaximizedHeader();this._window.setState(new YK.StateWindowMaximized(this._window,this))};YK.StateWindowRestored.prototype.minimize=function(){this._window._minimize();this._window.setState(new YK.StateWindowMinimized(this._window,this))};YK.WindowBase=function(){YK.Widget.apply(this);this._minWidth=this._width=this._ghostWidth=this._noneMaximizedWidth=350;this._minHeight=this._height=this._ghostHeight=this._noneMaximizedHeight=120;this._headerHeight=22;this._minimizedWidth=150;this._inconsWidth=62;this._minimizedWindow=null;this._childWidget=null;this._isCloseButtonActive=false;this._tooltip=null;this._controlConfigOptions={isClosedEnabled:true,isMinimizedEnabled:true,isMaximizedEnabled:true};this._isModal=false;var a=this;this._render=function(){var b=this._domObj;b.className+=" yk_window_base";b.id="yk_window_base_"+this._id;b.style.position="fixed";this._headerDom=YK.domBuilder.create({append:b,tag:"div","class":"yk_window_header_base"});this._titleDom=YK.domBuilder.create({append:this._headerDom,text:"Window Title",tag:"label","class":"yk_window_title_base"});this._controlHolder=YK.domBuilder.create({append:this._headerDom,tag:"div","class":"yk_window_control_holder_base"});this._closeButton=YK.domBuilder.create({append:this._controlHolder,tag:"div",title:"Close Window","class":"yk_window_close_botton_base",id:"yk_window_close_botton_base_"+this._id});this._returnToPreviousSizeButton=YK.domBuilder.create({append:this._controlHolder,tag:"div",title:"Restore Window","class":"yk_window_return_size_botton_base",id:"yk_window_return_size_botton_base_"+this._id});this._maximizeButton=YK.domBuilder.create({append:this._controlHolder,tag:"div",title:"Maximize Window","class":"yk_window_maximized_botton_base",id:"yk_window_maximized_botton_base_"+this._id});this._minimizeButton=YK.domBuilder.create({append:this._controlHolder,tag:"div",title:"Minimize Window","class":"yk_window_minimized_botton_base",id:"yk_window_minimized_botton_base_"+this._id});this._bodyDom=YK.domBuilder.create({append:b,tag:"div","class":"yk_window_body_new"})};this._render();this._initEvent()};YK.WindowBase.prototype=new YK.Widget();YK.WindowBase.prototype.constructor=YK.WindowBase;YK.WindowBase.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._minimizeButton,"mousedown",function(b){a._triggerDeactivateEvent();a._state.minimize();YK.Event.stopBubble(b)},false);YK.Event.addDomListener(this._maximizeButton,"mousedown",function(b){a._triggerDeactivateEvent();a._state.maximize();YK.Event.stopBubble(b)},false);YK.Event.addDomListener(this._returnToPreviousSizeButton,"mousedown",function(b){a._triggerDeactivateEvent();a._state.restore();YK.Event.stopBubble(b)},false);YK.Event.addDomListener(this._closeButton,"mousedown",function(b){a.emit("closed",a);a._closeModal();a._domObj.parentNode.removeChild(a._domObj);a._domObj=null;a._triggerDestroyEvent();YK.Event.stopBubble(b)})};YK.WindowBase.prototype._maximize=function(){this._restoredOption={width:this._width,height:this._height,left:parseInt(this._domObj.style.left),top:parseInt(this._domObj.style.top)}};YK.WindowBase.prototype._restore=function(){var a=this._domObj.id;this._domObj.id="";if(this._isWindowRestored(a)){return}YK.domBuilder.showElement(this._domObj);YK.domBuilder.showElement(this._minimizeButton);this._resizeDomTitleWidth(this._width-this._inconsWidth);YK.domBuilder.hideElement(this._minimizedWindow);this._domObj.id=a};YK.WindowBase.prototype._minimize=function(){YK.domBuilder.hideElement(this._domObj);YK.domBuilder.hideElement(this._minimizeButton);YK.domBuilder.hideElement(this._maximizeButton);YK.domBuilder.showElement(this._returnToPreviousSizeButton);var a=this._createMinimizedHolder();if(this._isNodeExistInMinimizedHolder(a)){YK.domBuilder.showElement(this._minimizedWindow);return}this._minimizedWindow=this._createMinimizedWindow();a.appendChild(this._minimizedWindow);this._initMinimizedEvents()};YK.WindowBase.prototype._initMinimizedEvents=function(){var b=this;var d=YK.Event;var c=this._minimizedWindow.lastChild.childNodes[1];d.addDomListener(c,"mousedown",function(f){b._state.restore();d.stopBubble(f)});var a=this._minimizedWindow.lastChild.childNodes[0];d.addDomListener(a,"mousedown",function(f){b._tooltip.hide();b._minimizedWindow.parentNode.removeChild(b._minimizedWindow);b.emit("closed",b);b._triggerDestroyEvent();d.stopBubble(f)});YK.Event.addDomListener(this._minimizedWindow,"mouseover",function(f){if(!b._tooltip){b._createMinimizedPanelTooltip()}b._tooltip.show();YK.Event.stopBubble(f)});YK.Event.addDomListener(this._minimizedWindow,"mouseout",function(f){b._tooltip.hide();YK.Event.stopBubble(f)});d.addDomListener(this._minimizedWindow,"dblclick",function(f){b._state.restore()})};YK.WindowBase.prototype.enableControl=function(){this.enableCloseButton();this.enableMinimizeButton();this.enableMaximizeButton()};YK.WindowBase.prototype.disableControl=function(){this.disableCloseButton();this.disableMinimizeButton();this.disableMaximizeButton()};YK.WindowBase.prototype.enableCloseButton=function(){this._controlConfigOptions.isClosedEnabled=true;YK.domBuilder.showElement(this._closeButton)};YK.WindowBase.prototype.disableCloseButton=function(){this._controlConfigOptions.isClosedEnabled=false;YK.domBuilder.hideElement(this._closeButton)};YK.WindowBase.prototype.enableMinimizeButton=function(){this._controlConfigOptions.isMinimizedEnabled=true;YK.domBuilder.showElement(this._minimizeButton)};YK.WindowBase.prototype.disableMinimizeButton=function(){this._controlConfigOptions.isMinimizedEnabled=false;YK.domBuilder.hideElement(this._minimizeButton)};YK.WindowBase.prototype.enableMaximizeButton=function(){this._controlConfigOptions.isMaximizedEnabled=true;YK.domBuilder.showElement(this._maximizeButton)};YK.WindowBase.prototype.disableMaximizeButton=function(){this._controlConfigOptions.isMaximizedEnabled=false;YK.domBuilder.hideElement(this._maximizeButton)};YK.WindowBase.prototype.showMaximizedHeader=function(){YK.domBuilder.showElement(this._returnToPreviousSizeButton);YK.domBuilder.hideElement(this._maximizeButton);this._domObj.style.position="fixed"};YK.WindowBase.prototype.showRestoredHeader=function(){YK.domBuilder.hideElement(this._returnToPreviousSizeButton);if(this._controlConfigOptions.isMaximizedEnabled){YK.domBuilder.showElement(this._maximizeButton)}this._domObj.style.position="absolute"};YK.WindowBase.prototype.showMinimizedHeader=function(){YK.domBuilder.showElement(this._returnToPreviousSizeButton);YK.domBuilder.hideElement(this._maximizeButton);this._domObj.style.position="fixed"};YK.WindowBase.prototype.setState=function(a){this._state=a};YK.WindowBase.prototype.getState=function(){return this._state};YK.WindowBase.prototype.setTitle=function(a){this._titleDom.innerHTML=a};YK.WindowBase.prototype.getTitle=function(){return this._titleDom.innerHTML};YK.WindowBase.prototype.setBoldTitle=function(a){if(a){this._titleDom.style.fontWeight="bold"}else{this._titleDom.style.fontWeight="normal"}};YK.WindowBase.prototype.setPosition=function(a){if(a==YK.JUSTIFY_CENTER){this._positionCenter()}};YK.WindowBase.prototype.close=function(){this.emit("closed",self);this._closeModal();this._domObj.parentNode.removeChild(this._domObj);this._triggerDestroyEvent()};YK.WindowBase.prototype.move=function(c,b){var a=this._domObj.style;a.top=b+"px";a.left=c+"px"};YK.WindowBase.prototype._triggerDeactivateEvent=function(){YK.Event.triggerPublicListener("deactivated")};YK.WindowBase.prototype._triggerDestroyEvent=function(){YK.Event.triggerPublicListener("destroyed")};YK.WindowBase.prototype._positionCenter=function(){var b=(window.innerWidth-this._width)/2;var a=(window.innerHeight-this._height)/2;this.move(b,a)};YK.WindowBase.prototype._clearChild=function(){this._bodyDom.removeChild(this._childWidget.getNode())};YK.WindowBase.prototype._createMinimizedPanelTooltip=function(){this._tooltip=new YK.Tooltip(this._minimizedWindow,this._titleDom.innerHTML,YK.POSITION_JUSTIFIED_TOPRIGHT)};YK.WindowBase.prototype._createMinimizedHolder=function(){var b="yk_minimized_widget_holder";var a=document.getElementById(b);if(!a){var a=YK.domBuilder.create({append:document.body,tag:"div",id:b})}a.style.zIndex="90000";return a};YK.WindowBase.prototype._isNodeExistInMinimizedHolder=function(c){var d=c.cloneNode(true);for(var b=0,a=d.childNodes.length;b<a;b++){if(this._domObj.id==d.childNodes[b].id){return true}}return false};YK.WindowBase.prototype._createMinimizedWindow=function(){this._resizeDomTitleWidth(this._minimizedWidth-this._inconsWidth);var a=this._headerDom.cloneNode(true);a.className="yk_window_base_minimize";a.removeAttribute("style");a.style.width=this._minimizedWidth+"px";a.id=this._domObj.id;return a};YK.WindowBase.prototype._resizeDomTitleWidth=function(a){this._titleDom.style.width=a+"px"};YK.WindowBase.prototype._isWindowRestored=function(a){if(!document.getElementById(a)){this._domObj.id=a;return true}return false};YK.WindowBase.prototype._showModal=function(){if(!this._isModal){this._createModal()}};YK.WindowBase.prototype._closeModal=function(){if(typeof this._modal!=="undefined"){this._modal.parentNode.removeChild(this._modal)}this._domObj.style.zIndex=90000};YK.WindowBase.prototype._hideModal=function(){this._modal.style.display="none";this._domObj.style.zIndex=90000};YK.WindowBase.prototype._createModal=function(){this._modal=YK.domBuilder.create({append:document.body,tag:"div",id:"yk_window_modal"});this._modal.style.zIndex=YK.WINDOW_MODAL_ZINDEX;var a=YK.Util.getPageSize();this._modal.style.width=a[0]+"px";this._modal.style.height=a[1]+"px";this._isModal=true};gobject.signalNew("maximized",YK.WindowBase,[],null,null);gobject.signalNew("minimized",YK.WindowBase,[],null,null);gobject.signalNew("minimizedmouseovered",YK.WindowBase,[],null,null);gobject.signalNew("restored",YK.WindowBase,[],null,null);gobject.signalNew("closed",YK.WindowBase,[],null,null);YK.Window=function(a){YK.WindowBase.apply(this);this._sideBarsWidth=10;this._state=new YK.StateWindowRestored(this,null);this._childWidget=null;this._headerHeight=27;this._render=function(){var b=this._domObj;b.className+=" yk_window_new";b.style.zIndex=YK.WINDOW_ZINDEX;this._ghostWindowDom=YK.domBuilder.create({append:b,tag:"div","class":"yk_window_ghost_new"});YK.domBuilder.hideElement(this._ghostWindowDom);this._leftBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar yk_window_left_bar_new"});this._rightBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar yk_window_right_bar_new"});this._topBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar yk_window_top_bar_new"});this._bottomBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar yk_window_bottom_bar_new"});this._topLeftBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar_corner yk_window_top_left_bar_new"});this._topRightBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar_corner yk_window_top_right_bar_new"});this._bottomLeftBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar_corner yk_window_bottom_left_bar_new"});this._bottomRightBarDom=YK.domBuilder.create({append:b,tag:"div","class":"resizeable_bar_corner yk_window_bottom_right_bar_new"})};this._render()};YK.Window.prototype=new YK.WindowBase();YK.Window.prototype.constructor=YK.Window;YK.Window.prototype.draw=function(){if(this._childWidget===null){this._createShowLoading()}document.body.appendChild(this._domObj)};YK.Window.prototype.showLoading=function(){if(this._loadingChild){this._loadingChild.getNode().style.display="block"}else{this._width=this._minWidth=this._width-10;this._height=this._minHeight=this._height-27;this._createShowLoading()}};YK.Window.prototype.hideLoading=function(){if(this._loadingChild){this._loadingChild.getNode().style.display="none"}};YK.Window.prototype._createShowLoading=function(){this._loadingChild=new YK.Blank();this._loadingChild.resetMinWidth(this._width);this._loadingChild.resetMinHeight(this._height);this.appendChild(this._loadingChild)};YK.Window.prototype.drawModal=function(){this._showModal();document.body.appendChild(this._domObj)};YK.Window.prototype.enableResize=function(){var a=YK.domBuilder;a.showElement(this._leftBarDom);a.showElement(this._rightBarDom);a.showElement(this._topBarDom);a.showElement(this._bottomBarDom);a.showElement(this._topLeftBarDom);a.showElement(this._topRightBarDom);a.showElement(this._bottomLeftBarDom);a.showElement(this._bottomRightBarDom)};YK.Window.prototype.disableResize=function(){var a=YK.domBuilder;a.hideElement(this._leftBarDom);a.hideElement(this._rightBarDom);a.hideElement(this._topBarDom);a.hideElement(this._bottomBarDom);a.hideElement(this._topLeftBarDom);a.hideElement(this._topRightBarDom);a.hideElement(this._bottomLeftBarDom);a.hideElement(this._bottomRightBarDom)};YK.Window.prototype.appendChild=function(a){if(this._childWidget){this._clearChild()}this._childWidget=a;this._bodyDom.appendChild(this._childWidget.getNode());this.resizeWidth(this.getMinWidth());this.resizeHeight(this.getMinHeight());this._initResizeElementEvent()};YK.Window.prototype._initResizeElementEvent=function(){YK.Event.addDomListener(this._bodyDom,"mousedown",function(a){YK.Event.stopBubble(a)});this._resizeLeftBar();this._resizeRightBar();this._resizeTopBar();this._resizeBottomBar();this._resizeTopLeftBar();this._resizeTopRightBar();this._resizeBottomLeftBar();this._resizeBottomRightBar();this._enableDrag()};YK.Window.prototype._enableDrag=function(){var b=this,a=0,g,d,c=false;YK.LibAdapter.dragInit(this._domObj,1,YK.Util.getWindowWidth()-this._width-17,0,YK.Util.getWindowHeight()-this._height-17);var f=this._getChildNodesOfDomObj();this._domObj.onDragStart=function(){b._triggerDeactivateEvent();b._cleareWindowBody(f[0])};this._domObj.onDragEnd=function(h,k){b._domObj.className="yk_widget yk_window_base yk_window_new";b._insertChildNodesBackToDomObj(f)}};YK.Window.prototype._getChildNodesOfDomObj=function(){var c=[];for(var b=0,a=this._domObj.childNodes.length;b<a;b++){c.push(this._domObj.childNodes[b])}return c};YK.Window.prototype._cleareWindowBody=function(a){this._domObj.className+=" window_dragging";this._domObj.innerHTML="";this._domObj.appendChild(a)};YK.Window.prototype._insertChildNodesBackToDomObj=function(d){var b=document.createDocumentFragment();for(var c=0,a=d.length;c<a;c++){b.appendChild(d[c])}this._domObj.appendChild(b)};YK.Window.prototype._resizeToLeft=function(a){var b=parseInt(this._domObj.style.left);this._domObj.style.left=b+a+"px";this.resizeWidth(parseInt(this._ghostWindowDom.style.width));this._resetGhostWidth(parseInt(this._ghostWindowDom.style.width))};YK.Window.prototype._resizeToTop=function(b){var a=parseInt(this._domObj.style.top);this._domObj.style.top=a+b+"px";this.resizeHeight(parseInt(this._ghostWindowDom.style.height));this._resetGhostHeight(parseInt(this._ghostWindowDom.style.height))};YK.Window.prototype._resizeToRight=function(a){this.resizeWidth(a);this._resetGhostWidth(a)};YK.Window.prototype._resizeToBottom=function(a){this.resizeHeight(a);this._resetGhostHeight(a)};YK.Window.prototype._resizeLeftBar=function(){var b=this;var a=parseInt(window.innerWidth);YK.LibAdapter.hDragInit(b._leftBarDom,-a,b._width-b._minWidth);this._leftBarDom.onDragStart=function(c,f,d){b._triggerDeactivateEvent();YK.domBuilder.showElement(b._ghostWindowDom);YK.Event.stopBubble(d)};this._leftBarDom.onDrag=function(c,f,d){b._ghostWindowDom.style.left=c+"px";b._ghostWindowDom.style.width=b._ghostWidth-c+"px"};this._leftBarDom.onDragEnd=function(c,d){YK.domBuilder.hideElement(b._ghostWindowDom);b._resizeToLeft(c);b._resizeLeftBar()}};YK.Window.prototype._resizeRightBar=function(){var c=false;var b=this;var a=b._minWidth;YK.LibAdapter.hDragInit(b._rightBarDom,a);this._rightBarDom.onDragStart=function(d,g,f){b._triggerDeactivateEvent();YK.domBuilder.showElement(b._ghostWindowDom);YK.Event.stopBubble(f)};this._rightBarDom.onDrag=function(d,g,f){b._ghostWindowDom.style.width=d+"px";c=true};this._rightBarDom.onDragEnd=function(d,f){YK.domBuilder.hideElement(b._ghostWindowDom);if(!c){return}b._resizeToRight(d);b._resizeRightBar()}};YK.Window.prototype._resizeTopBar=function(){var a=this;var b=parseInt(window.innerHeight);YK.LibAdapter.vDragInit(a._topBarDom,-b,a._height-a._minHeight);this._topBarDom.onDragStart=function(c,f,d){a._triggerDeactivateEvent();YK.domBuilder.showElement(a._ghostWindowDom);YK.Event.stopBubble(d)};this._topBarDom.onDrag=function(c,f,d){a._ghostWindowDom.style.top=f+"px";a._ghostWindowDom.style.height=a._ghostHeight-f+"px"};this._topBarDom.onDragEnd=function(c,d){YK.domBuilder.hideElement(a._ghostWindowDom);a._resizeToTop(d);a._resizeTopBar()}};YK.Window.prototype._resizeBottomBar=function(){var a=this;var b=false;YK.LibAdapter.vDragInit(a._bottomBarDom,a._minHeight);this._bottomBarDom.onDragStart=function(c,f,d){a._triggerDeactivateEvent();YK.domBuilder.showElement(a._ghostWindowDom);YK.Event.stopBubble(d)};this._bottomBarDom.onDrag=function(c,f,d){a._ghostWindowDom.style.height=f+"px";b=true};this._bottomBarDom.onDragEnd=function(c,d){YK.domBuilder.hideElement(a._ghostWindowDom);if(!b){return}a._resizeToBottom(d);a._resizeBottomBar()}};YK.Window.prototype._resizeTopLeftBar=function(){var b=this;var a=parseInt(window.innerWidth);var d=this._width-this._minWidth;var f=parseInt(window.innerHeight);var c=this._height-this._minHeight;YK.LibAdapter.dragInit(this._topLeftBarDom,-a,d,-f,c);this._topLeftBarDom.onDragStart=function(g,k,h){b._triggerDeactivateEvent();YK.domBuilder.showElement(b._ghostWindowDom);YK.Event.stopBubble(h)};this._topLeftBarDom.onDrag=function(g,k,h){b._ghostWindowDom.style.left=g+"px";b._ghostWindowDom.style.width=b._ghostWidth-g+"px";b._ghostWindowDom.style.top=k+"px";b._ghostWindowDom.style.height=b._ghostHeight-k+"px"};this._topLeftBarDom.onDragEnd=function(g,h){YK.domBuilder.hideElement(b._ghostWindowDom);b._resizeToTop(h);b._resizeToLeft(g);b._resizeTopLeftBar()}};YK.Window.prototype._resizeTopRightBar=function(){var c=false;var b=this;var a=this._minWidth;var f=parseInt(window.innerWidth);var g=parseInt(window.innerHeight);var d=this._height-this._minHeight;YK.LibAdapter.dragInit(this._topRightBarDom,a,f,-g,d);this._topRightBarDom.onDragStart=function(h,l,k){b._triggerDeactivateEvent();YK.domBuilder.showElement(b._ghostWindowDom);YK.Event.stopBubble(k)};this._topRightBarDom.onDrag=function(h,l,k){b._ghostWindowDom.style.width=h+"px";b._ghostWindowDom.style.top=l+"px";b._ghostWindowDom.style.height=b._ghostHeight-l+"px";c=true};this._topRightBarDom.onDragEnd=function(h,k){YK.domBuilder.hideElement(b._ghostWindowDom);if(!c){return}b._resizeToTop(k);b._resizeToRight(h);b._resizeTopRightBar()}};YK.Window.prototype._resizeBottomLeftBar=function(){var c=false;var b=this;var a=parseInt(window.innerWidth);var f=this._width-this._minWidth;var g=b._minHeight;var d=parseInt(window.innerHeight);YK.LibAdapter.dragInit(this._bottomLeftBarDom,-a,f,g,d);this._bottomLeftBarDom.onDragStart=function(h,l,k){b._triggerDeactivateEvent();YK.domBuilder.showElement(b._ghostWindowDom);YK.Event.stopBubble(k)};this._bottomLeftBarDom.onDrag=function(h,l,k){b._ghostWindowDom.style.left=h+"px";b._ghostWindowDom.style.width=b._ghostWidth-h+"px";b._ghostWindowDom.style.height=l+"px";c=true};this._bottomLeftBarDom.onDragEnd=function(h,k){YK.domBuilder.hideElement(b._ghostWindowDom);if(!c){return}b._resizeToLeft(h);b._resizeToBottom(k);b._resizeBottomLeftBar()}};YK.Window.prototype._resizeBottomRightBar=function(){var c=false;var b=this;var a=b._minWidth;var f=parseInt(window.innerWidth);var g=b._minHeight;var d=parseInt(window.innerHeight);YK.LibAdapter.dragInit(this._bottomRightBarDom,a,f,g,d);this._bottomRightBarDom.onDragStart=function(h,l,k){b._triggerDeactivateEvent();YK.domBuilder.showElement(b._ghostWindowDom);YK.Event.stopBubble(k)};this._bottomRightBarDom.onDrag=function(h,l,k){b._ghostWindowDom.style.width=h+"px";b._ghostWindowDom.style.height=l+"px";c=true};this._bottomRightBarDom.onDragEnd=function(h,k){YK.domBuilder.hideElement(b._ghostWindowDom);if(!c){return}b._resizeToRight(h);b._resizeToBottom(k);b._resizeBottomRightBar()}};YK.Window.prototype._resetGhostWidth=function(a){this._ghostWidth=a};YK.Window.prototype._resetGhostHeight=function(a){this._ghostHeight=a};YK.Window.prototype._repositionResizeableBars=function(){this._leftBarDom.style.left="0px";this._rightBarDom.style.left=this._width-3+"px";this._topBarDom.style.top="0px";this._bottomBarDom.style.top=this._height-3+"px";this._topLeftBarDom.style.left="0px";this._topLeftBarDom.style.top="0px";this._topRightBarDom.style.left=this._width-3+"px";this._topRightBarDom.style.top="0px";this._bottomLeftBarDom.style.top=this._height-3+"px";this._bottomLeftBarDom.style.left="0px";this._bottomRightBarDom.style.top=this._height-3+"px";this._bottomRightBarDom.style.left=this._width-3+"px";this._ghostWindowDom.style.left="0px";this._ghostWindowDom.style.top="0px"};YK.Window.prototype._repositionElements=function(){this._repositionResizeableBars()};YK.Window.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._bodyDom.style.width=a-this._sideBarsWidth+"px";this._ghostWindowDom.style.width=a+"px";this._repositionElements()};YK.Window.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";this._bodyDom.style.height=a-this._headerHeight+"px";this._ghostWindowDom.style.height=a+"px";this._repositionElements()};YK.Window.prototype.resetMinWidth=function(a){this._minWidth=a;this._ghostWidth=a};YK.Window.prototype.resetMinHeight=function(a){this._minHeight=a;this._ghostHeight=a};YK.Window.prototype.getMinWidth=function(){var b=this._childWidget.getMinWidth()+this._sideBarsWidth;var a=b>this._minWidth?b:this._minWidth;this.resetMinWidth(b);return b};YK.Window.prototype.getMinHeight=function(){var a=this._childWidget.getMinHeight()+this._headerHeight;var b=a>this._minHeight?a:this._minHeight;this.resetMinHeight(a);return a};YK.Window.prototype.resizeWidth=function(b){var a=this.getMinWidth();a=a<b?b:a;this._childWidget.resizeWidth(a-this._sideBarsWidth);this._resizeWidth(a)};YK.Window.prototype.resizeHeight=function(a){var b=this.getMinHeight();b=b<a?a:b;this._childWidget.resizeHeight(b-this._headerHeight-2);this._resizeHeight(b)};YK.Box=function(c,b,a){YK.Widget.apply(this);this._spacing=(c===undefined||c==0)?0:c;this._padding=(b===undefined||b==0)?0:b;this._children=[];this._width=this._minWidth=10;this._height=this._minHeight=10;this._isWidthLocked=false;this._isHeightLocked=false;this._draggable=a;this._render=function(){var d=this._domObj;d.className+=" box"}};YK.Box.prototype=new YK.Widget();YK.Box.prototype.constructor=YK.Box;YK.Box.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"click",function(b){a.emit("clicked")})};YK.Box.prototype.getChildren=function(){var d=[],c=this._children,a=c.length;for(var b=0;b<a;b++){d.push(c[b].childWidget)}return d};YK.Box.prototype.getFirstChild=function(){return this._children[0]["childWidget"]};YK.Box.prototype.enable=function(){for(var a=this._children.length;a--;){this._children[a]["childWidget"].enable()}};YK.Box.prototype.disable=function(){for(var a=this._children.length;a--;){this._children[a]["childWidget"].disable()}};YK.Box.prototype.getLastChild=function(){return this._children[this._children.length-1]["childWidget"]};YK.Box.prototype.getNextSibling=function(a){var b=this._isChild(a);if(b===this._children.length-1){return null}return this._children[b+1]["childWidget"]};YK.Box.prototype.getPreviousSibling=function(a){var b=this._isChild(a);if(b===0){return null}return this._children[b-1]["childWidget"]};YK.Box.prototype.refresh=function(){this._refreshWidth();this._refreshHeight();this._refreshChildren()};YK.Box.prototype.lockWidth=function(){this._isWidthLocked=true};YK.Box.prototype.lockHeight=function(){this._isHeightLocked=true};YK.Box.prototype.unlockHeight=function(){this._isHeightLocked=false};YK.Box.prototype.unlockWidth=function(){this._isWidthLocked=false};YK.Box.prototype.lockSize=function(){this.lockWidth();this.lockHeight()};YK.Box.prototype.unlockSize=function(){this.unlockWidth();this.unlockHeight()};YK.Box.prototype._refreshChildren=function(){for(var a=this._children.length;a--;){this._children[a]["childWidget"].refresh()}};YK.Box.prototype._refreshWidth=function(){var a=this.getMinWidth();if(this._isWidthLocked){a=a<this._width?this._width:a}this.resizeWidth(a)};YK.Box.prototype._refreshHeight=function(){var a=this.getMinHeight();if(this._isHeightLocked){a=a<this._height?this._height:a}this.resizeHeight(a)};YK.Box.prototype.appendChild=function(c,b){c.setParent(this);var a=this._createChildObject(c,b);this._children.push(a);this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.Box.prototype.addSeparator=function(){var a=this._children[this._children.length-1]["space"];YK.domBuilder.showElement(a.childNodes[0])};YK.Box.prototype.cloneWidget=function(){return YK.Util.clone(this)};YK.Box.prototype.insertBefore=function(a,c,b){this._insertBefore(a,c,b);this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.Box.prototype._insertBefore=function(c,g,d){c.setParent(this);var b=this._isChild(g);this._children.splice(b,0,this._createChildObject(c,d));var a=g.getNode().parentNode;var f=this._domObj.lastChild;var h=f.previousSibling;this._domObj.insertBefore(h,a);this._domObj.insertBefore(f,a)};YK.Box.prototype.removeChild=function(a){var b=this._isChild(a);if(b===false){YK.Util.debug("The widget has not yet been packed to vbox")}this.removeChildByIndex(b)};YK.Box.prototype.reorderChild=function(c,a){var h=this._isChild(c);if(h===false){YK.Util.debug("The widget has not yet been packed to vbox")}if(a>=this._children.length||a<0){YK.Util.debug("Position is undefined or out of range")}if(h===a){return}var g=this._children[h];var f=this._children[a];this._children[a]=g;this._children[h]=f;var d=YK.domBuilder.create({append:this._domObj,tag:"div"});var b=YK.domBuilder.create({append:this._domObj,tag:"div"});this._domObj.replaceChild(b,f.element);this._domObj.replaceChild(d,g.element);this._domObj.appendChild(g.element);this._domObj.appendChild(f.element);this._domObj.replaceChild(g.element,b);this._domObj.replaceChild(f.element,d)};YK.Box.prototype._isChild=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["childWidget"]===c){return b}}return false};YK.Box.prototype._appendChild=function(a,b){this._domObj.appendChild(a);this._domObj.appendChild(b)};YK.Box.prototype.getChildrenLength=function(){return this._children.length};YK.Box.prototype._getChildObjectBy=function(d,c){var b=this._children;for(var a=b.length;a--;){if(b[a][d]===c){return b[a]}}};YK.Box.prototype._enableDrag=function(b){var a=this,c=b.firstChild;YK.Event.addDomListener(b,"mouseover",function(){YK.domBuilder.showElement(c)});YK.Event.addDomListener(b,"mouseout",function(){YK.domBuilder.hideElement(c)});YK.Event.addDomListener(c,"mouseover",function(){b.draggable=true});YK.Event.addDomListener(c,"mouseout",function(){b.draggable=false});b.className+=" yk_box_draggable";b.ondragstart=function(d){d.dataTransfer.effectAllowed="move";d.dataTransfer.dropEffect="move";d.dataTransfer.setData("Text",d.target.getAttribute("id"));d.dataTransfer.setDragImage(d.target,d.layerX,d.layerY);return true};b.ondrop=function(k){var m=k.dataTransfer.getData("Text");var f=document.querySelector("#"+m);var l=a._getChildObjectBy("element",f);if(l===undefined){return false}var d=a._height,h=a._width;a.removeChild(l.childWidget);var g=a._getChildObjectBy("element",this)["childWidget"];a._insertBefore(l.childWidget,g,l);a.resizeHeight(d);a.resizeWidth(h);k.stopPropagation();return true};b.ondragover=function(f){b.style.backgroundColor="#FFFDCF";var g=f.dataTransfer.getData("Text");var d=document.querySelector("#"+g);if(d===this){return true}return false};b.ondragleave=function(d){b.style.backgroundColor="";YK.domBuilder.hideElement(c)}};gobject.signalNew("clicked",YK.Box,[],null,null);YK.HBox=function(c,b,a){YK.Box.call(this,c,b,a);this._render=function(){var d=this._domObj;d.className+=" hbox";d.style.width=this._width+"px";d.style.height=this._height+"px"};this._render();this._initEvent()};YK.HBox.prototype=new YK.Box();YK.HBox.prototype.constructor=YK.HBox;YK.HBox.prototype.replaceChild=function(b,d,c){b.setParent(this);var a=this._isChild(d);if(!a){YK.Util.debug("The target child widget was not found!")}var f=this._children[a];f.element.insertBefore(b.getNode(),d.getNode());f.element.removeChild(d.getNode());f.childWidget=b;f.expand=c.expand===undefined?f.expand:c.expand;f.fill=c.fill===undefined?f.fill:c.fill;f.padding=c.padding===undefined?f.padding:c.padding;f.resizableHeight=c.resizableHeight===undefined?f.resizableHeight:c.resizableHeight;this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.HBox.prototype.removeChildByIndex=function(a){if(!this._children[a]){YK.Util.debug("The index is out of range")}this._resizeWidth(this._width-parseInt(this._children[a]["element"].style.width));this._domObj.removeChild(this._children[a]["element"]);this._domObj.removeChild(this._children[a]["space"]);this._children.splice(a,1)};YK.HBox.prototype._createChildObject=function(f,d){var b=this._createChildNodeHolder(f.getNode());var c=this._createSpace();this._appendChild(b,c);var a={element:b,childWidget:f,space:c,expand:d.expand===undefined?true:d.expand,fill:d.fill===undefined?true:d.fill,padding:d.padding===undefined?0:d.padding,resizableHeight:d.resizableHeight===undefined?true:d.resizableHeight};return a};YK.HBox.prototype._createChildNodeHolder=function(b){var a=YK.domBuilder.create({tag:"div","class":"yk_hbox_element",id:"yk_vbox_element_"+YK.LibAdapter.getGUID(),style:"position: relative; float: left;"});var c=YK.domBuilder.create({append:a,tag:"div","class":"yk_box_hanlde"});a.appendChild(b);if(this._draggable){this._enableDrag(a)}return a};YK.HBox.prototype._createSpace=function(){var a=YK.domBuilder.create({tag:"div","class":"yk_hbox_space"});var b=YK.domBuilder.create({append:a,tag:"div","class":"yk_hbox_separator"});return a};YK.HBox.prototype._hideLastSpace=function(){if(this._domObj.childNodes.length>=1){this._domObj.childNodes[this._domObj.childNodes.length-1].style.width="0px"}};YK.HBox.prototype._resizeChildrenHeight=function(c){var f;for(var d=0,b=this._children.length;d<b;d++){f=this._children[d];f.element.style.top=this._padding+"px";f.space.style.top=this._padding+"px";if(f.resizableHeight){f.element.style.height=c+"px";f.childWidget.resizeHeight(c);f.space.style.height=c+"px"}else{var a=f.childWidget.getMinHeight();f.element.style.height=a+"px";f.space.style.height=a+"px"}}};YK.HBox.prototype.getMinHeight=function(){var g=this._children[0]["childWidget"].getMinHeight();var b;for(var d=1,a=this._children.length;d<a;d++){b=this._children[d]["childWidget"].getMinHeight();g=g<b?b:g}var c=this._padding*2;var f=g+c;f=f<this._minHeight?this._minHeight:f;return f};YK.HBox.prototype.resizeHeight=function(a){var b=this.getMinHeight();b=b<a?a:b;this._resizeHeight(b);this._resizeChildrenHeight(b-this._padding*2)};YK.HBoxFactory=function(d,g,f,c){var a=c!==undefined?c:false;var b=d?new YK.HBoxHomogeneous(g,f,a):new YK.HBoxNoneHomogeneous(g,f,a);return b};YK.HBoxHomogeneous=function(c,b,a){YK.HBox.call(this,c,b,a);this._render=function(){var d=this._domObj;d.className+=" box_homogeneous"};this._render()};YK.HBoxHomogeneous.prototype=new YK.HBox();YK.HBoxHomogeneous.prototype.constructor=YK.HBoxHomogeneous;YK.HBoxHomogeneous.prototype.resize=function(b,a){this._resizeHeight(a);this._resizeWidth(b)};YK.HBoxHomogeneous.prototype._handleFilledElement=function(b,a){b.childWidget.getNode().style.left=b.padding+"px";b.childWidget.resizeWidth(a-b.padding*2)};YK.HBoxHomogeneous.prototype._handleNoneFilledElement=function(d,a){var b=d.childWidget.getMinWidth();var c=(a-b)/2;d.childWidget.getNode().style.left=c+"px";d.childWidget.resizeWidth(b)};YK.HBoxHomogeneous.prototype._resizeChildrenWidth=function(c){var d;for(var b=0,a=this._children.length;b<a;b++){d=this._children[b];d.space.style.width=this._spacing+"px";d.space.style.left=this._padding+"px";d.element.style.width=c+"px";d.element.style.left=this._padding+"px";if(d.fill){this._handleFilledElement(d,c)}else{this._handleNoneFilledElement(d,c)}}this._hideLastSpace()};YK.HBoxHomogeneous.prototype._getMaxChildWidth=function(){var c=this._children[0]["childWidget"].getMinWidth()+(this._children[0]["padding"]*2);var b;for(var d=1,a=this._children.length;d<a;d++){b=this._children[d]["childWidget"].getMinWidth()+(this._children[d]["padding"]*2);c=c<b?b:c}return c};YK.HBoxHomogeneous.prototype.getMinWidth=function(){var b=this._getMaxChildWidth()*this._children.length;var d=this._spacing*(this._children.length-1);var a=this._padding*2;var c=b+d+a;c=this._minWidth<c?c:this._minWidth;return c};YK.HBoxHomogeneous.prototype.resizeWidth=function(d){var a=this._getMaxChildWidth();var f=this.getMinWidth();if(d>f){var b=this._padding*2;var c=d-f-b;var g=c/this._children.length;this._resizeWidth(d);this._resizeChildrenWidth(a+g)}else{this._resizeWidth(f);this._resizeChildrenWidth(a)}};YK.HBoxNoneHomogeneous=function(c,b,a){YK.HBox.call(this,c,b,a);this._render=function(){var d=this._domObj;d.className+=" hbox_none_homogeneous"};this._render()};YK.HBoxNoneHomogeneous.prototype=new YK.HBox();YK.HBoxNoneHomogeneous.prototype.constructor=YK.HBoxNoneHomogeneous;YK.HBoxNoneHomogeneous.prototype.resize=function(b,a){this._resizeHeight(a);this._resizeWidth(b)};YK.HBoxNoneHomogeneous.prototype._handleFilledElement=function(b,a){b.childWidget.getNode().style.left=b.padding+"px";b.childWidget.resizeWidth(a-b.padding*2)};YK.HBoxNoneHomogeneous.prototype._handleNoneFilledElement=function(d,b,a){var c=(b-a)/2;d.childWidget.getNode().style.left=c+"px";d.childWidget.resizeWidth(a)};YK.HBoxNoneHomogeneous.prototype._handleExpandedElement=function(d,c){var a=d.childWidget.getMinWidth();var b=a+c+d.padding*2;d.element.style.width=b+"px";if(d.fill){this._handleFilledElement(d,b)}else{this._handleNoneFilledElement(d,b,a)}};YK.HBoxNoneHomogeneous.prototype._handleNoneExpandedElement=function(a){a.childWidget.getNode().style.left=a.padding+"px";if(this._isWidthLocked||this._isHeightLocked){a.childWidget.refresh()}};YK.HBoxNoneHomogeneous.prototype._resizeChildrenWidth=function(c){var d;for(var b=0,a=this._children.length;b<a;b++){d=this._children[b];d.space.style.width=this._spacing+"px";d.space.style.left=this._padding+"px";d.element.style.left=this._padding+"px";if(d.expand){this._handleExpandedElement(d,c)}else{this._handleNoneExpandedElement(d)}}this._hideLastSpace()};YK.HBoxNoneHomogeneous.prototype._getNumberOfExpandedChildren=function(){var c=0;for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["expand"]){c++}}return c};YK.HBoxNoneHomogeneous.prototype.getMinWidth=function(){var b=0;for(var d=0,a=this._children.length;d<a;d++){b+=this._children[d]["childWidget"].getMinWidth()+(this._children[d]["padding"]*2)}var c=this._padding*2;var g=this._spacing*(a-1);var f=b+g+c;f=this._minWidth<f?f:this._minWidth;return f};YK.HBoxNoneHomogeneous.prototype.resizeWidth=function(c){var a=this.getMinWidth();if(c>a){var b=c-a;var d=b/this._getNumberOfExpandedChildren();this._resizeWidth(c);this._resizeChildrenWidth(d)}else{this._resizeWidth(a);this._resizeChildrenWidth(0)}};YK.VBox=function(c,b,a){YK.Box.call(this,c,b,a);this._render=function(){var d=this._domObj;d.className+=" vbox"};this._render();this._initEvent()};YK.VBox.prototype=new YK.Box();YK.VBox.prototype.constructor=YK.VBox;YK.VBox.prototype.replaceChild=function(b,d,c){b.setParent(this);var a=this._isChild(d);if(!a&&a!==0){YK.Util.debug("target child widget not found")}var f=this._children[a];f.element.insertBefore(b.getNode(),d.getNode());f.element.removeChild(d.getNode());f.childWidget=b;f.expand=c.expand===undefined?f.expand:c.expand;f.fill=c.fill===undefined?f.fill:c.fill;f.padding=c.padding===undefined?f.padding:c.padding;f.resizableWidth=c.resizableWidth===undefined?f.resizableWidth:c.resizableWidth;this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.VBox.prototype.removeChildByIndex=function(a){if(!this._children[a]){YK.Util.debug("The index is out of range")}this._resizeHeight(this._height-parseInt(this._children[a]["element"].style.height));this._domObj.removeChild(this._children[a]["element"]);this._domObj.removeChild(this._children[a]["space"]);this._children.splice(a,1)};YK.VBox.prototype._createChildObject=function(f,d){var b=this._createChildNodeHolder(f.getNode());var c=this._createSpace();this._appendChild(b,c);var a={element:b,childWidget:f,space:c,expand:d.expand===undefined?true:d.expand,fill:d.fill===undefined?true:d.fill,padding:d.padding===undefined?0:d.padding,resizableWidth:d.resizableWidth===undefined?true:d.resizableWidth};return a};YK.VBox.prototype._createChildNodeHolder=function(b){var a=YK.domBuilder.create({tag:"div","class":"yk_vbox_element",id:"yk_vbox_element_"+YK.LibAdapter.getGUID(),style:"position: relative; display: block;"});var c=YK.domBuilder.create({append:a,tag:"div","class":"yk_box_hanlde"});a.appendChild(b);if(this._draggable){this._enableDrag(a)}return a};YK.VBox.prototype._createSpace=function(){var a=YK.domBuilder.create({tag:"div","class":"yk_vbox_space"});var b=YK.domBuilder.create({append:a,tag:"div","class":"yk_vbox_separator"});return a};YK.VBox.prototype._hideLastSpace=function(){this._domObj.childNodes[this._domObj.childNodes.length-1].style.height="0px"};YK.VBox.prototype._handleHiddenChild=function(a){if(a.childWidget.isHidden()){YK.domBuilder.hideElement(a.element);YK.domBuilder.hideElement(a.space)}else{YK.domBuilder.showElement(a.element);YK.domBuilder.showElement(a.space)}};YK.VBox.prototype.getMinWidth=function(){var c=this._children[0]["childWidget"].getMinWidth();var b;for(var d=1,a=this._children.length;d<a;d++){b=this._children[d]["childWidget"].getMinWidth();c=c<b?b:c}var f=c+this._padding*2;f=f<this._minWidth?this._minWidth:f;return f};YK.VBox.prototype._resizeChildrenWidth=function(d){var f;for(var c=0,a=this._children.length;c<a;c++){f=this._children[c];f.element.style.left=this._padding+"px";f.space.style.left=this._padding+"px";if(f.resizableWidth){f.element.style.width=d+"px";f.childWidget.resizeWidth(d);f.space.style.width=d+"px"}else{var b=f.childWidget.getMinWidth();f.element.style.width=b+"px";f.space.style.width=b+"px"}}};YK.VBox.prototype.resizeWidth=function(b){var a=this.getMinWidth();a=a<b?b:a;this._resizeWidth(a);this._resizeChildrenWidth(a-this._padding*2)};YK.VBoxFactory=function(d,g,f,c){var a=c!==undefined?c:false;var b=d?new YK.VBoxHomogeneous(g,f,a):new YK.VBoxNoneHomogeneous(g,f,a);return b};YK.VBoxHomogeneous=function(c,b,a){YK.VBox.call(this,c,b,a);this._render=function(){var d=this._domObj;d.className+=" vbox_homogeneous"};this._render()};YK.VBoxHomogeneous.prototype=new YK.VBox();YK.VBoxHomogeneous.prototype.constructor=YK.VBoxHomogeneous;YK.VBoxHomogeneous.prototype.resize=function(b,a){this._resizeHeight(a);this._resizeWidth(b)};YK.VBoxHomogeneous.prototype._handleFilledElement=function(b,a){b.childWidget.getNode().style.top=b.padding+"px";b.childWidget.resizeHeight(a-b.padding*2)};YK.VBoxHomogeneous.prototype._handleNoneFilledElement=function(d,a){var b=d.childWidget.getMinHeight();var c=(a-b)/2;d.childWidget.getNode().style.top=c+"px";d.childWidget.resizeHeight(b)};YK.VBoxHomogeneous.prototype._resizeChildrenHeight=function(b){var d;for(var c=0,a=this._children.length;c<a;c++){d=this._children[c];d.space.style.height=this._spacing+"px";d.space.style.top=this._padding+"px";d.element.style.height=b+"px";d.element.style.top=this._padding+"px";this._handleHiddenChild(d);if(d.fill){this._handleFilledElement(d,b)}else{this._handleNoneFilledElement(d,b)}}this._hideLastSpace()};YK.VBoxHomogeneous.prototype._getMaxHeight=function(){var d=this._children[0]["childWidget"].getMinHeight()+(this._children[0]["padding"]*2);var b;for(var c=1,a=this._children.length;c<a;c++){b=this._children[c]["childWidget"].isHidden()?0:this._children[c]["childWidget"].getMinHeight()+(this._children[c]["padding"]*2);d=d<b?b:d}return d};YK.VBoxHomogeneous.prototype.getMinHeight=function(){var d=this._spacing*(this._children.length-1);var b=this._getMaxHeight()*this._children.length;var a=this._padding*2;var c=b+d+a;c=c<this._minHeight?this._minHeight:c;return c};YK.VBoxHomogeneous.prototype.resizeHeight=function(a){var f=this._getMaxHeight();var d=this.getMinHeight();if(a>d){var c=a-d-this._padding*2;var b=c/this._children.length;this._resizeHeight(a);this._resizeChildrenHeight(f+b)}else{this._resizeHeight(d);this._resizeChildrenHeight(f)}};YK.VBoxNoneHomogeneous=function(b,a){YK.VBox.call(this,b,a);this._render=function(){var c=this._domObj;c.className+=" vbox_none_homogeneous"};this._render()};YK.VBoxNoneHomogeneous.prototype=new YK.VBox();YK.VBoxNoneHomogeneous.prototype.constructor=YK.VBoxNoneHomogeneous;YK.VBoxNoneHomogeneous.prototype.resize=function(b,a){this._resizeHeight(a);this._resizeWidth(b)};YK.VBoxNoneHomogeneous.prototype._handleFilledElement=function(b,a){b.childWidget.getNode().style.top=b.padding+"px";b.childWidget.resizeHeight(a-b.padding*2)};YK.VBoxNoneHomogeneous.prototype._handleNoneFilledElement=function(d,b,a){var c=(b-a)/2;d.childWidget.getNode().style.top=c+"px";d.childWidget.resizeHeight(a)};YK.VBoxNoneHomogeneous.prototype._handleExpandedElement=function(d,c){var b=d.childWidget.getMinHeight();var a=b+c+d.padding*2;d.element.style.height=a+"px";if(d.fill){this._handleFilledElement(d,a)}else{this._handleNoneFilledElement(d,a,b)}};YK.VBoxNoneHomogeneous.prototype._handleNoneExpandedElement=function(b){var a=b.childWidget.getMinHeight();b.element.style.height=a+b.padding*2+"px";b.childWidget.getNode().style.top=b.padding+"px";if(this._isWidthLocked||this._isHeightLocked){b.childWidget.refresh()}};YK.VBoxNoneHomogeneous.prototype._resizeChildrenHeight=function(b){var d;for(var c=0,a=this._children.length;c<a;c++){d=this._children[c];d.space.style.height=this._spacing+"px";d.space.style.top=this._padding+"px";d.element.style.top=this._padding+"px";this._handleHiddenChild(d);if(d.expand){this._handleExpandedElement(d,b)}else{this._handleNoneExpandedElement(d)}}this._hideLastSpace()};YK.VBoxNoneHomogeneous.prototype._getNumberOfExpandedChildren=function(){var c=0;for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["expand"]){c++}}return c};YK.VBoxNoneHomogeneous.prototype.getMinHeight=function(){var c=0;for(var d=0,a=this._children.length;d<a;d++){c+=this._children[d]["childWidget"].isHidden()?0:this._children[d]["childWidget"].getMinHeight()+(this._children[d]["padding"]*2)}var b=this._padding*2;var f=c+this._spacing*(a-1)+b;f=f<this._minHeight?this._minHeight:f;return f};YK.VBoxNoneHomogeneous.prototype.resizeHeight=function(a){var d=this.getMinHeight();if(a>d){var c=a-d;var b=c/this._getNumberOfExpandedChildren();this._resizeHeight(a);this._resizeChildrenHeight(b)}else{var c=a-d;var b=c/this._getNumberOfExpandedChildren();this._resizeHeight(d);this._resizeChildrenHeight(0)}};YK.Paned=function(){YK.Widget.apply(this);this._minWidth=200;this._minHeight=200;this._width=this._minWidth;this._height=this._minHeight;this._render=function(){this._domObj.className+=" yk_paned"};this._render()};YK.Paned.prototype=new YK.Widget();YK.Paned.prototype.constructor=YK.Paned;YK.Paned.prototype.pack1=function(a){this._child1=a;this._paned1.appendChild(this._child1.getNode())};YK.Paned.prototype.pack2=function(a){this._child2=a;this._paned2.appendChild(this._child2.getNode());this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.Paned.prototype.resize=function(){this._resizePaned1();this._resizePaned2()};YK.Paned.prototype._resizePaned1=function(){this._resizePaned1Width();this._resizePaned1Height()};YK.Paned.prototype._resizePaned2=function(a){this._resizePaned2Width();this._resizePaned2Height()};YK.Paned.prototype._showGhostDivider=function(){var a=this._ghostDivider.style;a.backgroundColor="#838B8B";a.opacity=1};YK.Paned.prototype._hideGhostDivider=function(){var a=this._ghostDivider.style;a.disply="none";a.opacity=0.1};gobject.signalNew("childrendminimize",YK.Paned,null,null,[]);gobject.signalNew("childrestore",YK.Paned,null,null,[]);YK.VPaned=function(){YK.Paned.apply(this);this._dividerHeight=6;this._paned1Height=(this._height/2)-(this._dividerHeight/2);this._paned2Height=(this._height/2)-(this._dividerHeight/2);this._isPaned1Restore=true;this._isPaned2Restore=true;this._topAnchored=0;this._render=function(){this._domObj.className+=" yk_vPaned";this._domObj.style.position="relative";this._paned1=YK.domBuilder.create({tag:"div","class":"yk_paned1"});this._domDivider=YK.domBuilder.create({tag:"div","class":"yk_dom_divider"});this._domDivider.style.zIndex=YK.PANED_DIVIDER_ZINDEX;this._dom=YK.domBuilder.create({append:this._domDivider,tag:"div","class":"yk_paned_divider_image"});this._domDivider.style.height=this._dividerHeight+"px";this._ghostDivider=this._domDivider.cloneNode(true);this._ghostDivider.className="yk_paned_ghost_divider";this._paned2=YK.domBuilder.create({tag:"div","class":"yk_paned2"});this._domObj.appendChild(this._paned1);this._domObj.appendChild(this._domDivider);this._domObj.appendChild(this._paned2);this._domObj.appendChild(this._ghostDivider)};this._render();this._vBehaviour(0,this._height-this._dividerHeight)};YK.VPaned.prototype=new YK.Paned();YK.VPaned.prototype.constructor=YK.VPaned;YK.VPaned.prototype.setPosition=function(a){var b=this._child1.getMinHeight();this._topAnchored=(b<a)?a:b};YK.VPaned.prototype.autoResize=function(a){if(a.getNode().parentNode.className=="yk_paned1"){this._expandBottomElement()}if(a.getNode().parentNode.className=="yk_paned2"){this._expandTopElement()}this._hideDividerElement();if(!this._isPaned1Restore&&!this._isPaned2Restore){this.emit("childrendminimize")}};YK.VPaned.prototype._expandBottomElement=function(){this._child2.resizeHeight(this._height);this._child1.hide();this._paned1.style.height="0px";this._isPaned1Restore=false};YK.VPaned.prototype._expandTopElement=function(){this._child1.resizeHeight(this._height);this._child2.hide();this._paned2.style.height="0px";this._isPaned2Restore=false};YK.VPaned.prototype._restoreTopElement=function(a){this._paned1.style.height=a+"px";this._child1.resizeHeight(a);this._child1.show()};YK.VPaned.prototype._restoreBottomElement=function(a){this._paned2.style.height=a+"px";this._child2.resizeHeight(a);this._child2.show()};YK.VPaned.prototype._restoreDividerElement=function(){YK.domBuilder.showElement(this._domDivider);YK.domBuilder.showElement(this._ghostDivider)};YK.VPaned.prototype._hideDividerElement=function(){YK.domBuilder.hideElement(this._domDivider);YK.domBuilder.hideElement(this._ghostDivider)};YK.VPaned.prototype._restoreWidget1=function(){if(this._isPaned2Restore){this._restoreTopElement(this._paned1Height);this._restoreBottomElement(this._paned2Height);this._restoreDividerElement()}else{this._restoreTopElement(this._height)}this._isPaned1Restore=true};YK.VPaned.prototype._restoreWidget2=function(){if(this._isPaned1Restore){this._restoreBottomElement(this._paned2Height);this._restoreTopElement(this._paned1Height);this._restoreDividerElement()}else{this._restoreBottomElement(this._height)}this._isPaned2Restore=true};YK.VPaned.prototype.restoreStatus=function(a){if(a===this._child1){this._restoreWidget1()}if(a===this._child2){this._restoreWidget2()}if(this._isPaned1Restore||this._isPaned2Restore){this.emit("childrestore")}};YK.VPaned.prototype._resizePaned1Width=function(){if(this._width>this._child1.getWidth()){this._child1.resizeWidth(this._width)}else{this._resizeWidth(this._child1.getWidth())}};YK.VPaned.prototype._resizePaned1Height=function(a){this._modifyPaned1Height();this._resizeHeight(this._paned1Height,this._paned2Height);this._topMinY=this._child1.getMinHeight();this._vBehaviour(this._topMinY,this._height-this._dividerHeight)};YK.VPaned.prototype._resizePaned2Width=function(){if(this._width>this._child2.getWidth()){this._child2.resizeWidth(this._width)}else{this._resizeWidth(this._child2.getWidth())}};YK.VPaned.prototype._resizePaned2Height=function(b){this._modifyPaned2Height();this._resizeHeight(this._paned1Height,this._paned2Height);this._bottomMinY=this._child2.getMinHeight();var a=this._height-this._dividerHeight-this._bottomMinY;this._vBehaviour(this._topMinY,a)};YK.VPaned.prototype._modifyPaned1Height=function(){this._child1.resizeHeight(this._paned1Height)};YK.VPaned.prototype._modifyPaned2Height=function(){this._child2.resizeHeight(this._paned2Height)};YK.VPaned.prototype._resizePaned12Dom=function(a,b){this._paned1Height=a;this._paned2Height=b;this._paned1.style.height=a+"px";this._paned2.style.height=b+"px"};YK.VPaned.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=this._width+"px";this._paned1.style.width=this._width+"px";this._domDivider.style.width=this._width+"px";this._ghostDivider.style.width=this._width+"px";this._paned2.style.width=this._width+"px"};YK.VPaned.prototype._resizeHeight=function(a,b){this._height=a+b+this._dividerHeight;this._domObj.style.height=this._height+"px";this._paned1.style.height=a+"px";this._ghostDivider.style.top=a+"px";this._paned2.style.height=b+"px"};YK.VPaned.prototype.getMinWidth=function(){var b=this._child1.getMinWidth();var a=this._child2.getMinWidth();var c=this._minWidth>b?this._minWidth:b;c=c>a?c:a;return c};YK.VPaned.prototype.getMinHeight=function(){var a=this._child1.getMinHeight();var b=this._child2.getMinHeight();var c=a+b;c=this._minHeight>c?this._minHeight:c;return c};YK.VPaned.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._resizeWidth(a);this._child1.resizeWidth(a);this._child2.resizeWidth(a);if(this._isPaned1Restore&&this._isPaned2Restore){this.resize()}};YK.VPaned.prototype.resizeHeight=function(a){var h=this.getMinHeight();var h=a>h?a:h;var b=(h-this.getHeight())/2;var g=this._paned1Height+b;var f=this._paned2Height+b;if(this._paned2Height===this._child2.getMinHeight()||this._paned1Height===this._child1.getMinHeight()||g<this._child1.getMinHeight()||f<this._child2.getMinHeight()){if(this._paned2Height===this._child2.getMinHeight()||f<this._child2.getMinHeight()){this._paned1Height=this._paned1Height+b*2;this._paned2Height=this._child2.getMinHeight()}if(this._paned1Height===this._child1.getMinHeight()||g<this._child1.getMinHeight()){this._paned2Height=this._paned2Height+b*2;this._paned1Height=this._child1.getMinHeight()}}else{this._paned1Height=g;this._paned2Height=f}if(this._topAnchored!==0){var c=this._child1.getMinHeight();var d=this._child2.getMinHeight();var a=this._topAnchored+d;this._paned1Height=a<h?this._topAnchored:h-d;this._paned2Height=h-this._paned1Height}this._paned1Height-=2;this._paned2Height-=2;if(this._isPaned1Restore&&this._isPaned2Restore){this.resize()}};YK.VPaned.prototype._vBehaviour=function(c,b){var a=this;YK.LibAdapter.vDragInit(this._ghostDivider,c,b);this._ghostDivider.onDragStart=function(){this.style.background="#DFE8F6";this.style.opacity="0.9";if(this.firstChild){this.removeChild(this.firstChild)}};this._ghostDivider.onDragEnd=function(d,h){var f=h;var g=a._height-f-a._dividerHeight;a.setPosition(f);a._resizePaned12Dom(f,g);a._child1.resizeHeight(f);a._child2.resizeHeight(g);this.style.background="";this.style.opacity="0.5"}};YK.HPaned=function(){YK.Paned.apply(this);var a=this;this._dividerWidth=6;this._paned1Width=(this._width/2)-(this._dividerWidth/2);this._paned2Width=(this._width/2)-(this._dividerWidth/2);this._isPaned1Restore=true;this._isPaned2Restore=true;this._drawerWidth=6;this._isDrawed=false;this._isDrawedToLeft=false;this._isDrawerLeftEnabled=false;this._isDrawerRightEnabled=false;this._leftAnchored=0;this._drawerEventId=null;this._isDragged=false;this._drawedWidget=null;this._render=function(){this._domObj.className+=" yk_hPaned";this._paned1=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_paned1"});this._domDivider=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_dom_divider"});this._domDivider.style.width=this._dividerWidth+"px";this._ghostDivider=this._domDivider.cloneNode(true);this._dom=YK.domBuilder.create({append:this._ghostDivider,tag:"div",id:"drawer_"+this._id});this._ghostDivider.className="yk_paned_ghost_divider";this._paned2=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_paned2"});this._domObj.appendChild(this._ghostDivider)};this._render();this._hBehaviour(0,this._width-this._dividerWidth)};YK.HPaned.prototype=new YK.Paned();YK.HPaned.prototype.constructor=YK.HPaned;YK.HPaned.prototype.setPosition=function(a){var b=this._child1.getMinWidth();this._leftAnchored=(b<a)?a:b};YK.HPaned.prototype.enableDrawerRight=function(){this._drawedWidget=this._child2;this._enableDrawer();this._isDrawerRightEnabled=true;this._changeDrawerDirection(YK.HPANED_DRAWER_RIGHT_ENABLED)};YK.HPaned.prototype.enableDrawerLeft=function(){this._drawedWidget=this._child1;this._enableDrawer();this._isDrawerLeftEnabled=true;this._changeDrawerDirection(YK.HPANED_DRAWER_LEFT_ENABLED)};YK.HPaned.prototype._drawOut=function(){this._drawedWidget.show();this.restoreStatus(this._drawedWidget);this._isDrawed=false};YK.HPaned.prototype._drawIn=function(){this._isDrawed=true;this.autoResize(this._drawedWidget);this._positionDrawer()};YK.HPaned.prototype._positionDrawer=function(){this._isDrawerLeftEnabled?this._ghostDivider.style.left="0px":this._ghostDivider.style.left=parseInt(this._paned1.style.width)+"px"};YK.HPaned.prototype._enableDrawer=function(b){var a=this;this._drawerEventId=YK.Event.addDomListener(this._dom,"click",function(c){if(a._isDrawed){a._drawOut();return}a._drawIn();YK.Event.stopBubble(c)});YK.Event.addDomListener(this._ghostDivider,"mouseover",function(c){if(a._isDragged){YK.Event.addDomListener(a._drawerEventId.obj,a._drawerEventId.type,a._drawerEventId.callback)}YK.Event.stopBubble(c)})};YK.HPaned.prototype._expandLeftWidget=function(){this._child1.resizeWidth(this._width);this._child2.hide();this._paned2.style.width="0px";this._hideDividerElement()};YK.HPaned.prototype._expandLeftElement=function(){if(this._isDrawerRightEnabled||this._isDrawerLeftEnabled){this._expandLeftElementWidthDrawer()}else{this._expandLeftWidget()}this._isPaned2Restore=false};YK.HPaned.prototype._expandRightWidget=function(){this._child2.resizeWidth(this._width);this._child1.hide();this._paned1.style.width="0px";this._hideDividerElement()};YK.HPaned.prototype._expandRightElement=function(){if(this._isDrawerRightEnabled||this._isDrawerLeftEnabled){this._expandRightElementWidthDrawer()}else{this._expandRightWidget()}this._isPaned1Restore=false};YK.HPaned.prototype._expandLeftElementWidthDrawer=function(){this._child1.resizeWidth(this._width-this._drawerWidth);this._child2.hide();this._paned2.style.width="0px";this._paned1.style.width=this._width-this._drawerWidth+"px";this._isDrawedToLeft=false;this._changeDrawerDirection(YK.HPANED_DRAWER_LEFT_ENABLED)};YK.HPaned.prototype._expandRightElementWidthDrawer=function(){this._child2.resizeWidth(this._width-this._drawerWidth);this._child1.hide();this._paned1.style.width="0px";this._paned2.style.width=this._width-this._drawerWidth+"px";this._isDrawedToLeft=true;this._changeDrawerDirection(YK.HPANED_DRAWER_RIGHT_ENABLED)};YK.HPaned.prototype.autoResize=function(d){var c=d.getNode().parentNode.className=="yk_paned1";if(c){this._expandRightElement()}var a=d.getNode().parentNode.className=="yk_paned2";if(a){this._expandLeftElement()}var b=!this._isPaned1Restore&&!this._isPaned2Restore;if(b){this.emit("childrendminimize",this)}};YK.HPaned.prototype._restoreLeftElement=function(a){this._paned1.style.width=a+"px";this._child1.resizeWidth(a)};YK.HPaned.prototype._restoreRightElement=function(a){this._paned2.style.width=a+"px";this._child2.resizeWidth(a)};YK.HPaned.prototype._restoreDividerElement=function(){YK.domBuilder.showElement(this._domDivider);YK.domBuilder.showElement(this._ghostDivider);this._ghostDivider.style.left=this._paned1Width+"px";if(this._isDrawerLeftEnabled){this._changeDrawerDirection(YK.HPANED_DRAWER_LEFT_ENABLED)}if(this._isDrawerRightEnabled){this._changeDrawerDirection(YK.HPANED_DRAWER_RIGHT_ENABLED)}};YK.HPaned.prototype._changeDrawerDirection=function(a){this._dom.className=a};YK.HPaned.prototype._hideDividerElement=function(){YK.domBuilder.hideElement(this._domDivider);YK.domBuilder.hideElement(this._ghostDivider)};YK.HPaned.prototype._restoreWidget1=function(){var a=this._isDrawed?this._drawerWidth:0;if(this._isPaned2Restore){this._restoreLeftElement(this._paned1Width);this._restoreRightElement(this._paned2Width);this._restoreDividerElement()}else{this._restoreLeftElement(this._width-a)}this._isPaned1Restore=true};YK.HPaned.prototype._restoreWidget2=function(){var a=this._isDrawed?this._drawerWidth:0;if(this._isPaned1Restore){this._restoreRightElement(this._paned2Width);this._restoreLeftElement(this._paned1Width);this._restoreDividerElement()}else{this._restoreRightElement(this._width-a)}this._isPaned2Restore=true};YK.HPaned.prototype.restoreStatus=function(a){if(a===this._child1){this._restoreWidget1()}if(a===this._child2){this._restoreWidget2()}if(this._isPaned1Restore||this._isPaned2Restore){this.emit("childrestore",this)}};YK.HPaned.prototype._resizePaned1Height=function(){if(this._height>this._child1.getHeight()){this._child1.resizeHeight(this._height)}else{this._resizeHeight(this._child1.getHeight())}};YK.HPaned.prototype._resizePaned1Width=function(){this._modifyPaned1Width();this._resizeWidth(this._paned1Width,this._paned2Width);this._leftMinX=this._child1.getMinWidth();this._hBehaviour(this._leftMinX,this._width-this._dividerWidth)};YK.HPaned.prototype._resizePaned2Height=function(){if(this._height>this._child2.getHeight()){this._child2.resizeHeight(this._height)}else{this._resizeHeight(this._child2.getHeight());this._child1.resizeHeight(this._child2.getHeight())}};YK.HPaned.prototype._resizePaned2Width=function(b){this._modifyPaned2Width();this._resizeWidth(this._paned1Width,this._paned2Width);this._rightMinX=this._child2.getMinWidth();var a=this._width-this._dividerWidth-this._rightMinX;this._hBehaviour(this._child1.getMinWidth(),a)};YK.HPaned.prototype._modifyPaned1Width=function(a){if(typeof a!="undefined"){this._child1.resizeWidth(a)}else{this._child1.resizeWidth(this._paned1Width)}};YK.HPaned.prototype._modifyPaned2Width=function(a){if(typeof a!="undefined"){this._child2.resizeWidth(a)}else{this._child2.resizeWidth(this._paned2Width)}};YK.HPaned.prototype._hBehaviour=function(a,c){var b=this;YK.LibAdapter.hDragInit(this._ghostDivider,a,c);this._ghostDivider.onDragStart=function(){b._ghostDivider.style.zIndex=YK.PANED_DIVIDER_ZINDEX;b._isDragged=false};this._ghostDivider.onDrag=function(){b._isDragged=true;if(b._drawerEventId){YK.Event.removeListener(b._drawerEventId)}};this._ghostDivider.onDragEnd=function(d,h){b._ghostDivider.style.zIndex="";if(!b._isDragged){return}var g=d;var f=b._width-g-b._dividerWidth;b.setPosition(g);b._resizePaned12Dom(g,f);b._child1.resizeWidth(g);b._child2.resizeWidth(f)}};YK.HPaned.prototype._resizePaned12Dom=function(b,a){this._paned1Width=b;this._paned2Width=a;this._paned1.style.width=b+"px";this._paned2.style.width=a+"px"};YK.HPaned.prototype._resizeWidth=function(a,b){this._width=a+b+this._dividerWidth;this._domObj.style.width=this._width+1+"px";this._paned1.style.width=a+"px";this._ghostDivider.style.left=a+"px";this._paned2.style.width=b+"px"};YK.HPaned.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=this._height+"px";this._paned1.style.height=this._height+"px";this._domDivider.style.height=this._height+"px";this._ghostDivider.style.height=this._height+"px";this._paned2.style.height=this._height+"px"};YK.HPaned.prototype.getMinWidth=function(){var b=this._child1.getMinWidth();var a=this._child2.getMinWidth();var c=b+a+this._dividerWidth;c=c>this._minWidth?c:this._minWidth;return c};YK.HPaned.prototype.getMinHeight=function(){var a=this._child1.getMinHeight();var b=this._child2.getMinHeight();var c=this._minHeight>a?this._minHeight:a;c=c>b?c:b;return c};YK.HPaned.prototype.resizeWidth=function(g){var f=this.getMinWidth();var f=g>f?g:f;var d=(f-this.getWidth())/2;this.setWidth(f);var h=this._paned1Width+d;var c=this._paned2Width+d;if(this._isDrawedToLeft){this._modifyPaned2Width(f-this._drawerWidth);this._resizeWidth(0,f)}else{this._modifyPaned1Width(f-this._drawerWidth);this._resizeWidth(f,0)}if(this._paned2Width===this._child2.getMinWidth()||this._paned1Width===this._child1.getMinWidth()||h<this._child1.getMinWidth()||c<this._child2.getMinWidth()){if(this._paned2Width===this._child2.getMinWidth()||c<this._child2.getMinWidth()){this._paned1Width=(this._paned1Width+d*2)-1;this._paned2Width=(this._child2.getMinWidth())-1}if(this._paned1Width===this._child1.getMinWidth()||h<this._child1.getMinWidth()){this._paned2Width=(this._paned2Width+d*2)-1;this._paned1Width=(this._child1.getMinWidth())-1}}else{this._paned1Width=this._paned1Width+d-1;this._paned2Width=this._paned2Width+d-1}if(this._leftAnchored!==0){var b=this._child1.getMinWidth();var a=this._child2.getMinWidth();var g=this._leftAnchored+a;this._paned1Width=g<f?this._leftAnchored:f-a;this._paned2Width=f-this._paned1Width}this._paned1Width-=this._dividerWidth/2;this._paned2Width-=this._dividerWidth/2;if(this._isPaned1Restore&&this._isPaned2Restore){this.resize()}};YK.HPaned.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this.setHeight(b);this._child1.resizeHeight(b);this._child2.resizeHeight(b);if(this._isDrawedToLeft){this._resizePaned1Height()}else{this._resizePaned2Height()}if(this._isPaned1Restore&&this._isPaned2Restore){this.resize()}};YK.HPANED_DRAWER_RIGHT_ENABLED="HPANED_DRAWER_RIGHT_ENABLED";YK.HPANED_DRAWER_LEFT_ENABLED="HPANED_DRAWER_LEFT_ENABLED";YK.Image=function(b,c,a){YK.Widget.apply(this);this.IMAGE_CLICKED="clicked";this.IMAGE_MOUSEOVER="mouseover";this.IMAGE_MOUSEOUT="mouseout";this.IMAGE_CLOSED="closed";this._size=null;this._dom=null;this._width=this._minWidth=c||16;this._height=this._minHeight=a||16;this._attribute;this._render=function(){this._domObj.className+=" yk_image";this._domObj.tabIndex="0";var d="IMAGE-"+YK.LibAdapter.getGUID();this._domObj.setAttribute("id",d);this.header=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_image_header"});this.headerDom=YK.domBuilder.create({append:this.header,tag:"div","class":"yk_image_header_dom"});this.closeDom=YK.domBuilder.create({append:this.headerDom,tag:"div",className:"yk_image_header_close_button"});var f=YK.domBuilder.create({append:this._domObj,tag:"table",className:"yk_image_table"});var g=YK.domBuilder.create({append:f,tag:"tr"});var h=YK.domBuilder.create({append:g,tag:"td",className:"yk_image_table_td"});this._dom=YK.domBuilder.create({append:h,tag:"img",draggable:false,id:"yk_image_"+this._id});this._disableLayer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_image_div_disable"});this._invisibleOverlay=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_image_invisible_overlay"});if(b!==undefined){this.setFromFile(b,c,a)}};this._render();this._initEvent()};YK.Image.prototype=new YK.Widget();YK.Image.prototype.constructor=YK.Image;YK.Image.prototype._initEvent=function(){var a=this,b;YK.Event.addDomListener(this._dom,"click",function(){a.emit("clicked")});YK.Event.addDomListener(this._dom,"mouseover",function(){a.emit("mouseover")});YK.Event.addDomListener(this._dom,"mouseout",function(){a.emit("mouseout")});this._handlers.push(YK.Event.addDomListener(this._domObj,"mousedown",function(){b=true},false));this._handlers.push(YK.Event.addDomListener(this._domObj,"mouseup",function(){b=false},false));this._handlers.push(YK.Event.addDomListener(this._domObj,"focus",function(c){if(!b){this.style.border="1px dashed gray"}},false));this._handlers.push(YK.Event.addDomListener(this._domObj,"blur",function(c){this.style.border=""},false))};YK.Image.prototype.setFromFile=function(d,b,a){var c=d;this._dom.src=c;this.resetMinWidth(b||this._minWidth);this.resetMinHeight(a||this._minHeight);this.resizeWidth(this._minWidth);this.resizeHeight(this._minHeight)};YK.Image.prototype.enableDelete=function(){YK.ImageAnimator.init(this)};YK.Image.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Image.prototype.resetWidth=function(a){this._dom.setAttribute("width",a||this._minWidth);this.resetMinWidth(a||this._minWidth);this.resetMinHeight(this._calculateDomHeight());this.resize(this._width,this._height)};YK.Image.prototype.resetHeight=function(a){this._dom.setAttribute("height",a||this._minHeight);this.resetMinHeight(a||this._minHeight);this.resetMinWidth(this._calculateDomWidth());this.resize(this._width,this._height)};YK.Image.prototype.resetSize=function(b,a){if(b!==null){this.resetWidth(b)}if(a!==null){this.resetHeight(a)}};YK.Image.prototype._calculateDomWidth=function(){var b=0;var a=this._dom.cloneNode(true);a.style.position="absolute";a.style.display="block";b=YK.Util.fullWidth(a);return b};YK.Image.prototype._calculateDomHeight=function(){var a=0;var b=this._dom.cloneNode(true);b.style.position="absolute";b.style.display="block";a=YK.Util.fullHeight(b);return a};YK.Image.prototype.resetDefaultSize=function(){var a=this._getActualImageSize();this.resetSize(a[0],a[1])};YK.Image.prototype._getActualImageSize=function(){var b=this.getChildNode();var a=new Image();a.src=b.src;return[a.width||16,a.height||16]};YK.Image.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px"};YK.Image.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px"};YK.Image.prototype.setAttribute=function(a){this._attribute=a;this._applyAttribute()};YK.Image.prototype.getChildNode=function(){return this._dom};YK.Image.prototype.disable=function(){YK.domBuilder.showElement(this._disableLayer);this._removeHandlers()};YK.Image.prototype.enable=function(){YK.domBuilder.hideElement(this._disableLayer);this._addHandlers()};YK.Image.prototype._applyAttribute=function(){for(var a in this._attribute){this._dom.style[a]=this._attribute[a]}};gobject.signalNew("closed",YK.Image,[],null,null);gobject.signalNew("clicked",YK.Image,[],null,null);gobject.signalNew("mouseout",YK.Image,[],null,null);gobject.signalNew("mouseover",YK.Image,[],null,null);YK.ImageAnimator={_timeoutId1:null,_timeoutId2:null,_isHeaderActive:false,_isImageMousovered:false,_imageObj:null,init:function(b){this._imageObj=b;YK.domBuilder.showElement(this._imageObj._invisibleOverlay);var a=this;YK.Event.addDomListener(this._imageObj._invisibleOverlay,"mouseover",function(c){a._handleImageMouseovered();YK.Event.stopBubble(c)});YK.Event.addDomListener(this._imageObj._invisibleOverlay,"mouseout",function(c){a._handleImageMouseOut();YK.Event.stopBubble(c)});YK.Event.addDomListener(this._imageObj.header,"mouseover",function(c){clearTimeout(a._timeoutId2);YK.Event.stopBubble(c)});YK.Event.addDomListener(this._imageObj.header,"mouseout",function(c){a._handleImageMouseOut();YK.Event.stopBubble(c)});YK.Event.addDomListener(this._imageObj._invisibleOverlay,"click",function(){a._imageObj.emit("clicked")});YK.Event.addDomListener(this._imageObj.closeDom,"click",function(){a._imageObj.emit("closed")})},_handleImageMouseovered:function(){clearTimeout(this._timeoutId2);if(this._isHeaderActive){return}var a=this;a._imageObj._domObj.className+=" yk_image_enable_delete";this._timeoutId1=window.setTimeout(function(){YK.domBuilder.showElement(a._imageObj.header);a._imageObj.headerDom.style.top=18+"px";var b=18;var c=window.setInterval(function(){b-=4;a._imageObj.headerDom.style.top=b+"px";if(b<0){a._imageObj.headerDom.style.top=0+"px";a._isHeaderActive=true;a._isImageMousovered=true;clearInterval(c)}},40)},200)},_handleImageMouseOut:function(){var a=this;clearTimeout(this._timeoutId1);a._timeoutId2=window.setTimeout(function(){var b=0;var c=window.setInterval(function(){b+=4;a._imageObj.headerDom.style.top=b+"px";if(b>18){a._imageObj.headerDom.style.top=18+"px";YK.domBuilder.hideElement(a._imageObj.header);a._isHeaderActive=false;a._isImageMousovered=false;a._imageObj._domObj.className="yk_image";clearInterval(c)}},40)},50)}};YK.Label=function(a){YK.Widget.apply(this);this.LABEL_CLICKED="clicked";this.LABEL_MOUSEOVER="mouseover";this.LABEL_MOUSEOUT="mouseout";this._dom=null;this._attribute=null;this._isSelectable=false;this._isEnable=true;this._className="yk_label";this._render=function(){this._domObj.className+=" "+this._className;this._domObj.setAttribute("id",this._className+"_"+this._id);var b=YK.domBuilder.create({append:this._domObj,tag:"table",style:"width: 100%; height: 100%;"});var c=YK.domBuilder.create({append:b,tag:"tr"});var d=YK.domBuilder.create({append:c,tag:"td",className:"yk_label_align"});this._dom=YK.domBuilder.create({append:d,tag:"label",className:"yk_none_selectable"});this._dom.innerHTML=a;this._disabledLabel=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_label_disabled"});this._minWidth=this._width=this._calculateMinWidthMinHeight()[0];this._minHeight=this._height=this._calculateMinWidthMinHeight()[1];this.resizeWidth(this._minWidth);this.resizeHeight(this._minHeight)};this._render();YK.LabelEvent.initEvent(this)};YK.Label.prototype=new YK.Widget();YK.Label.prototype.constructor=YK.Label;YK.Label.prototype.setText=function(b){this._dom.innerHTML=b;var a=this._calculateMinWidthMinHeight();this.resetMinSize(a[0],a[1]);this.resizeWidth(a[0])};YK.Label.prototype.getText=function(){return this._dom.textContent.replace("&amp;","&")};YK.Label.prototype.disable=function(){this._isEnable=false;this._domObj.className="yk_widget yk_label yk_label_disable";if(this._attribute){YK.domBuilder.applyAttributes(this._dom,{cursor:"default",color:"#ccc"})}var a=this._dom.firstChild;if(a.tagName=="A"){YK.domBuilder.applyAttributes(a,{cursor:"default",color:"#ccc"})}YK.domBuilder.showElement(this._disabledLabel)};YK.Label.prototype.enable=function(){this._isEnable=true;this._domObj.className="yk_widget yk_label";if(this._isHover){this.enableHoverStyle()}this.setAttribute(this._attribute);var a=this._dom.firstChild;if(a.tagName=="A"){YK.domBuilder.applyAttributes(a,{cursor:"",color:""})}YK.domBuilder.hideElement(this._disabledLabel)};YK.Label.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Label.prototype.setTabindex=function(a){this._domObj.tabIndex=a};YK.Label.prototype._calculateMinWidthMinHeight=function(){var b=this._dom.cloneNode(true);var c=YK.Util.fullWidth(b);var a=YK.Util.fullHeight(b);return[c,a]};YK.Label.prototype.enableHoverStyle=function(){this._isHover=true;this._domObj.className+=" yk_label_enable_hover"};YK.Label.prototype._calculateHeight=function(){var b=this._dom.cloneNode(true);var c=YK.domBuilder.create({tag:"div"});c.style.width=this._width+"px";c.appendChild(b);var a=YK.Util.fullHeight(c);return a};YK.Label.prototype.setAttribute=function(b){if(this._isEnable){this._attribute=b;YK.domBuilder.applyAttributes(this._dom,this._attribute);var a=this._calculateMinWidthMinHeight();this.resetMinSize(a[0],a[1]);this.resizeWidth(a[0]);this.resizeHeight(a[1])}};YK.Label.prototype.getAttribute=function(){return this._attribute};YK.Label.prototype.setSelectable=function(a){this._isSelectable=a;this._dom.className=this._isSelectable?"yk_selectable":"yk_none_selectable"};YK.Label.prototype.getSelectable=function(){return this._isSelectable};YK.Label.prototype.show=function(){if(this._domObj.style.display!="inline"){this._domObj.style.display="block"}};YK.Label.prototype.setWidthChars=function(a){this.setMaxWidth(a);console.log("[The method setWidthChars() is being deprecated and changed to setMaxWidth()]")};YK.Label.prototype.setMaxWidth=function(a){this._minWidth=this._maxWidth=this._width=a;this._minHeight=this._maxHeight=this._height=this._calculateHeight();this._resizeToMaxWidth(a);this.resizeHeight(this._height)};YK.Label.prototype.setJustify=function(a){this._dom.parentNode.style.textAlign=a};YK.Label.prototype.setStyle=function(d){var c=this._domObj.style;var a=this._dom.style;for(var b in d){c[b]=d[b];if(b=="cursor"){a[b]=d[b]}}};YK.Label.prototype._resizeToMaxWidth=function(a){this._domObj.style.maxWidth=a+"px"};YK.Label.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+1+"px"};YK.Label.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px"};YK.Label.prototype.resizeWidth=function(b){var a=this.getMinWidth();a=b>a?b:a;this._resizeWidth(a)};YK.Label.prototype.resizeHeight=function(a){var b=this.getMinHeight();b=a>b?a:b;this._resizeHeight(b)};gobject.signalNew("clicked",YK.Label,null,null,[]);gobject.signalNew("mouseover",YK.Label,null,null,[]);gobject.signalNew("mouseout",YK.Label,null,null,[]);YK.LabelEvent={initEvent:function(a){var b=false;YK.Event.addDomListener(a._domObj,"focus",function(c){if(!b){this.style.border="1px dashed gray"}});YK.Event.addDomListener(a._domObj,"blur",function(c){this.style.border=""});YK.Event.addDomListener(a._domObj,"click",function(c){a.emit("clicked")});YK.Event.addDomListener(a._domObj,"mousedown",function(){this.style.border="";b=true});YK.Event.addDomListener(a._domObj,"mouseup",function(){this.style.border="";b=false});YK.Event.addDomListener(a._domObj,"mouseover",function(c){a.emit("mouseover")});YK.Event.addDomListener(a._domObj,"mouseout",function(c){if(a._isEnable){a.emit("mouseout")}})}};YK.Button=function(b){YK.Widget.apply(this);var a=this;this._label=b||"";this._labelWidget=YK.NullLabelObj;this._imageWidget=YK.NullImageObj;this._isEnable=true;this._signalClicked=null;this._width=this._minWidth=16;this._height=this._minHeight=24;this.BUTTON_CLICKED="clicked";this.BUTTON_MOUSEOUT="mouseout";this.BUTTON_MOUSEOVER="mouseover";this.BUTTON_ENTERKEYPRESSED="enterkeypressed";this._render=function(){this._domObj.className+=" yk_button";this._domObj.tabIndex="0";this._domObj.setAttribute("id","yk_button_"+this._id);this._imageDom=YK.domBuilder.create({tag:"div",className:"yk_button_image"});this._labelDom=YK.domBuilder.create({tag:"div",className:"yk_button_label"});if(YK.Util.detect.version<3.6){this._gradient=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_button_gradient"})}if(b){this.setLabel(new YK.Label(b))}};this._render();this._initEvent()};YK.Button.prototype=new YK.Widget();YK.Button.prototype.constructor=YK.Button;YK.Button.prototype._initEvent=function(){var c=false;var b=YK.Event;var a=this;this._handlers.push(b.addDomListener(this._domObj,"click",function(d){if(a._isEnable===true){a.emit("clicked")}}));this._handlers.push(b.addDomListener(this._domObj,"keyup",function(d){if(d.keyCode==YK.ENTER_KEY){if(a._isEnable===true){a.emit("enterkeypressed")}}}));this._handlers.push(b.addDomListener(this._domObj,"mouseover",function(d){a.emit("mouseover")}));this._handlers.push(b.addDomListener(this._domObj,"mousedown",function(){this.style.border="";c=true}));this._handlers.push(b.addDomListener(this._domObj,"mouseup",function(){this.style.border="";c=false}));this._handlers.push(b.addDomListener(this._domObj,"mouseout",function(d){a.emit("mouseout")}));this._handlers.push(YK.Event.addDomListener(this._domObj,"focus",function(d){if(!c){this.style.border="1px dotted black"}}));this._handlers.push(YK.Event.addDomListener(this._domObj,"blur",function(d){this.style.border=""}))};YK.Button.prototype._positionImage=function(){var b=this._imageDom.style;var c=(this._height/2)-(this._imageWidget.getHeight()/2);var a=(this._width-this._imageWidget.getWidth()-this._labelWidget.getWidth()-this.borderWidth)/2;b.top=c+"px";b.left=a+"px"};YK.Button.prototype._positionLabel=function(){var a=this._labelDom.style;var b=(this._height/2)-(this._labelWidget.getHeight()/2)-2;a.top=b+"px";a.left=parseInt(this._imageDom.style.left)+"px"};YK.Button.prototype._positionImageLabel=function(){this._positionImage();this._positionLabel()};YK.Button.prototype._getMaxChildrenHeight=function(){var a=this._minHeight;a=a>this._imageWidget.getMinHeight()?a:this._imageWidget.getMinHeight();a=a>this._labelWidget.getMinHeight()?a:this._labelWidget.getMinHeight();return a};YK.Button.prototype._getMaxChildrenWidth=function(){var a=0;a+=this._imageWidget.getMinWidth();a+=this._labelWidget.getMinWidth();a+=15;a=a<this._minWidth?this._minWidth:a;return a};YK.Button.prototype.setImage=function(a){if(this._imageDom.childNodes){this._imageDom.innerHTML=""}this._imageWidget=a;this.resetMinSize(this._getMaxChildrenWidth(),this._getMaxChildrenHeight());this.resizeWidthHeight(this._minWidth,this._minHeight);this._imageDom.appendChild(this._imageWidget.getNode());this._domObj.insertBefore(this._imageDom,this._domObj.childNodes[1])};YK.Button.prototype.setAsImage=function(a){this._domObj.className+=" yk_button_with_image_shape";this._domObj.style.backgroundImage="url("+a.getChildNode().src+")";this.resetMinSize(a.getMinWidth(),a.getMinHeight());this.resizeWidthHeight(this._minWidth,this._minHeight)};YK.Button.prototype.getImage=function(){return this._imageWidget};YK.Button.prototype.setLabel=function(a){if(this._labelDom.childNodes){this._labelDom.innerHTML=""}this._labelWidget=a;this._labelWidget.setTabIndex("");this._label=a.getText();this._labelWidget.setStyle({cursor:"pointer"});this.resetMinSize(this._getMaxChildrenWidth(),this._getMaxChildrenHeight());this.resizeWidthHeight(this._minWidth,this._minHeight);this._labelWidget.setJustify("center");this._labelDom.appendChild(this._labelWidget.getNode());this._domObj.appendChild(this._labelDom)};YK.Button.prototype.setTextLabel=function(a){if(a!=null){this.setLabel(new YK.Label(a))}};YK.Button.prototype.getLabel=function(){return this._labelWidget.getText()};YK.Button.prototype._resizeHeight=function(a){this._domObj.style.height=a-this.borderWidth+"px";this._height=a};YK.Button.prototype._resizeWidth=function(a){this._domObj.style.width=a-this.borderWidth+"px";this._width=a};YK.Button.prototype.showLoading=function(){this._labelDom.style.display="none";this._imageDom.style.display="none";this._removeHandlers();if(!this._loading){this._loading=YK.domBuilder.create({tag:"div",className:"yk_button_loading",append:this._domObj})}};YK.Button.prototype.hideLoading=function(){this._addHandlers();this._labelDom.style.display="";this._imageDom.style.display="";if(this._loading){this._domObj.removeChild(this._loading);this._loading=null}};YK.Button.prototype.setTabindex=function(a){this._domObj.tabIndex=a};YK.Button.prototype.disable=function(){this._isEnable=false;this._domObj.className+=" yk_button_disabled";this._labelWidget.setStyle({cursor:"default"});this._removeHandlers()};YK.Button.prototype.enable=function(){this._isEnable=true;this._domObj.className="yk_widget yk_container yk_button";this._labelWidget.setStyle({cursor:"pointer"});this._addHandlers()};YK.Button.prototype.resizeWidthHeight=function(c,a){var d=a>this._minHeight?a:this._minHeight;var b=c>this._minWidth?c:this._minWidth;this._resizeWidth(b);this._resizeHeight(d);this._positionImageLabel()};YK.Button.prototype.resizeWidth=function(b){var a=b>this._minWidth?b:this._minWidth;this._resizeWidth(a);this._positionImageLabel()};YK.Button.prototype.resizeHeight=function(a){var b=a>this._minHeight?a:this._minHeight;this._resizeHeight(b);this._positionImageLabel()};gobject.signalNew("clicked",YK.Button,null,null,[]);gobject.signalNew("mouseout",YK.Button,null,null,[]);gobject.signalNew("mouseover",YK.Button,null,null,[]);gobject.signalNew("enterkeypressed",YK.Button,null,null,[]);YK.NullImageObj=YK.NullObjectBuilder.build(new YK.Image());YK.NullImageObj.getWidth=function(){return 0};YK.NullImageObj.getHeight=function(){return 0};YK.NullImageObj.getMinWidth=function(){return 0};YK.NullImageObj.getMinHeight=function(){return 0};YK.NullImageObj.getNode=function(){return Dom.create({tag:"div"})};YK.NullLabelObj=YK.NullObjectBuilder.build(new YK.Label());YK.NullLabelObj.getWidth=function(){return 0};YK.NullLabelObj.getHeight=function(){return 0};YK.NullLabelObj.getMinWidth=function(){return 0};YK.NullLabelObj.getMinHeight=function(){return 0};YK.NullLabelObj.getNode=function(){return Dom.create({tag:"div"})};YK.NullLabelObj.getText=function(){return" "};YK.RadioButton=function(b,a){YK.Widget.apply(this);this._activated=false;this._name=b?b.getName():new UUID().id;this._addToGroup(this);this._imageSize=16;this._space=4;this._imageClassUnchecked="yk_radio_button_img_unchecked";this._imageClassChecked="yk_radio_button_img_checked";this._isFocus=false;this._labelWidget=new YK.Label(a);this._render=function(){this._domObj.className+=" yk_radio_button";this._domObj.id="yk_radio_button"+this._id;this._domObj.tabIndex="0";this._radioImgLabelContainer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_radio_button_img_label_container"});this._radioImage=YK.domBuilder.create({append:this._radioImgLabelContainer,tag:"div",className:this._imageClassUnchecked});this._radioLabel=YK.domBuilder.create({append:this._radioImgLabelContainer,tag:"div","class":"yk_radio_button_label"});this._radioLabel.appendChild(this._labelWidget.getNode());this._width=this._minWidth=this._imageSize+this._labelWidget.getMinWidth()+this._space;this._height=this._minHeight=this._labelWidget.getMinHeight()};this._render();this._initEvent();this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.RadioButton.prototype=new YK.Widget();YK.RadioButton.prototype.constructor=YK.RadioButton;YK.RadioButton.group=[];YK.RadioButton.prototype._initEvent=function(){var a=this,c=false;var b=YK.Event;b.addDomListener(this._domObj,"click",function(){a._unMarkeOther(a);a._unFocusOther(a);a._select();a.emit("checked")});b.addDomListener(this._domObj,"keyup",function(d){if(d.keyCode==YK.ENTER_KEY){a._unMarkeOther(a);a._unFocusOther(a);a.setFocus(a);a._select();a.emit("checked")}});b.addDomListener(this._domObj,"mousedown",function(){a._unFocusOther(a);c=true});b.addDomListener(this._domObj,"mouseup",function(){a._unFocusOther(a);c=false});b.addDomListener(this._domObj,"focus",function(){if(!c){a.setFocus(a)}});b.addDomListener(this._domObj,"blur",function(){a._unFocusOther(a)})};YK.RadioButton.prototype.setTabindex=function(a){this._domObj.tabIndex=a};YK.RadioButton.prototype._unFocusOther=function(c){var d=YK.RadioButton.group;for(var b=d.length;b--;){if(d[b].name===c.getName()){for(var a=d[b].children.length;a--;){this._unFocus(d[b].children[a])}return}}};YK.RadioButton.prototype._unFocus=function(a){a.getNode().firstChild.lastChild.className="yk_radio_button_label"};YK.RadioButton.prototype.setFocus=function(){this._domObj.firstChild.lastChild.className+=" yk_radio_focus"};YK.RadioButton.prototype._setActive=function(a){this._activated=a};YK.RadioButton.prototype.setChecked=function(){this._unMarkeOther(this);this._unFocusOther(this);this._select();this.emit("checked")};YK.RadioButton.prototype.getCheckedState=function(){return this._activated};YK.RadioButton.prototype._select=function(){this._radioImage.className=this._imageClassUnchecked+" "+this._imageClassChecked;this._setActive(true)};YK.RadioButton.prototype._deSelect=function(){this._radioImage.className=this._imageClassUnchecked;this._setActive(false)};YK.RadioButton.prototype.reset=function(){var c=YK.RadioButton.group;for(var b=c.length;b--;){if(c[b].name===this._name){for(var a=c[b].children.length;a--;){c[b].children[a]._deSelect()}return}}};YK.RadioButton.prototype.getGroup=function(){var c=YK.RadioButton.group;var a=[];for(var b=c.length;b--;){if(c[b].getName()===this.getName()){a.push(c[b])}}return a};YK.RadioButton.prototype.getName=function(){return this._name};YK.RadioButton.prototype.setName=function(a){this._name=a};YK.RadioButton.prototype._addToGroup=function(d){var a=YK.RadioButton.group;if(a!=[]){for(var b=a.length;b--;){if(a[b].name==d._name){a[b].children.push(d);return}}}var c={name:d._name,children:[d]};a.push(c)};YK.RadioButton.prototype._unMarkeOther=function(c){var d=YK.RadioButton.group;for(var b=d.length;b--;){if(d[b].name===c.getName()){for(var a=d[b].children.length;a--;){d[b].children[a]._deSelect()}return}}};YK.RadioButton.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";this._radioImgLabelContainer.style.height=this._minHeight+"px"};YK.RadioButton.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._radioImgLabelContainer.style.width=a+"px"};YK.RadioButton.prototype.resizeWidth=function(b){var a=this._minWidth<b?b:this._minWidth;this._resizeWidth(a)};YK.RadioButton.prototype.resizeHeight=function(a){var b=this._minHeight<a?a:this._minHeight;this._resizeHeight(b);this._positionCheckBox()};YK.RadioButton.prototype._positionCheckBox=function(a){this._radioImgLabelContainer.style.top=this._height/2-this._minHeight/2+"px"};gobject.signalNew("checked",YK.RadioButton,null,null,[]);YK.CheckButton=function(a){YK.Widget.apply(this);this.CHECKBUTTON_CHECKED="checked";this.CHECKBUTTON_UNCHECKED="unchecked";this.CHECKBUTTON_FOCUSED="focused";this.CHECKBUTTON_BLURRED="blurred";this._width=this._minWidth=22;this._height=this._minHeight=22;this._isChecked=false;this._imageSize=16;this._space=7;this._imageClass="yk_check_button_img";this._disabledModal=null;this._labelWidget=new YK.Label(a);this._render=function(){this._domObj.className+=" yk_check_button";this._domObj.tabIndex="0";this._domObj.setAttribute("id","yk_check_button_"+this._id);this._checkImgLabelContainer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_check_button_img_label_container"});this._checkImage=YK.domBuilder.create({append:this._checkImgLabelContainer,tag:"div",className:"yk_check_button_img"});this._checkLabel=YK.domBuilder.create({append:this._checkImgLabelContainer,tag:"div","class":"yk_check_button_label"});this._checkLabel.appendChild(this._labelWidget.getNode());this._width=this._minWidth=this._imageSize+this._labelWidget.getMinWidth()+this._space;this._height=this._minHeight=this._labelWidget.getMinHeight()};this._render();YK.CheckButtonEvent.initEvent(this);this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.CheckButton.prototype=new YK.Widget();YK.CheckButton.prototype.constructor=YK.CheckButton;YK.CheckButton.prototype.setTabindex=function(a){this._domObj.tabIndex=a};YK.CheckButton.prototype.setChecked=function(){this._checkImage.className=this._imageClass+" yk_check_button_checked";this._isChecked=true;this.emit("checked",this._labelWidget.getText())};YK.CheckButton.prototype.setUnchecked=function(){this._checkImage.className="yk_check_button_img yk_check_button_unchecked";this._isChecked=false;this.emit("unchecked",this._labelWidget.getText())};YK.CheckButton.prototype.getCheckedState=function(){return this._isChecked};YK.CheckButton.prototype.disable=function(){this._labelWidget.setAttribute({color:"#6F6F6F"});this._removeHandlers()};YK.CheckButton.prototype.enable=function(){this._labelWidget.setAttribute({color:""});this._addHandlers()};YK.CheckButton.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";this._checkImgLabelContainer.style.height=this._minHeight+"px"};YK.CheckButton.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._checkImgLabelContainer.style.width=a+"px"};YK.CheckButton.prototype.resizeWidth=function(b){var a=this._minWidth<b?b:this._minWidth;this._resizeWidth(a)};YK.CheckButton.prototype.resizeHeight=function(a){var b=this._minHeight<a?a:this._minHeight;this._resizeHeight(b);this._positionCheckBox()};YK.CheckButton.prototype._positionCheckBox=function(a){this._checkImgLabelContainer.style.top=this._height/2-this._minHeight/2+"px"};gobject.signalNew("checked",YK.CheckButton,null,null,[]);gobject.signalNew("unchecked",YK.CheckButton,null,null,[]);gobject.signalNew("focused",YK.CheckButton,null,null,[]);gobject.signalNew("blurred",YK.CheckButton,null,null,[]);YK.CheckButtonEvent={initEvent:function(a){var c=false;var b=YK.Event;a._handlers.push(b.addDomListener(a._domObj,"click",function(){if(!a._isChecked){a.setChecked()}else{a.setUnchecked()}this.style.border="";c=false}));a._handlers.push(b.addDomListener(a._domObj,"mousedown",function(){this.style.border="";c=true},false));a._handlers.push(b.addDomListener(a._checkImgLabelContainer,"mouseover",function(){if(a._isChecked){a._checkImage.className="yk_check_button_img yk_check_button_checked_hover"}else{a._checkImage.className="yk_check_button_img yk_check_button_unchecked_hover"}}));a._handlers.push(b.addDomListener(a._checkImgLabelContainer,"mouseout",function(){if(a._isChecked){a._checkImage.className="yk_check_button_img yk_check_button_checked"}else{a._checkImage.className="yk_check_button_img"}}));a._handlers.push(b.addDomListener(a._domObj,"focus",function(){a.emit("focused");if(!c){this.style.border="1px dashed gray"}}));a._handlers.push(b.addDomListener(a._domObj,"blur",function(){a.emit("blurred");this.style.border=""}));a._handlers.push(b.addDomListener(a._domObj,"keyup",function(d){if(d.keyCode==YK.ENTER_KEY){if(!a._isChecked){a.setChecked()}else{a.setUnchecked()}}}))}};YK.Entry=function(a){YK.Widget.apply(this);this.ENTRY_KEYPRESSED="keypressed";this.ENTRY_ENTERKEYPRESSED="enterkeypressed";this.ENTRY_FOCUSED="focused";this.ENTRY_BLURRED="blurred";this.ENTRY_CHANGED="changed";this.ENTRY_CLICKED="clicked";var b=this;this._dom=null;this._text="";this._maxLength=a||"";this._width=this._minWidth=60;this._height=this._minHeight=18;this._widthChars;this._span;this._visible=true;this._entryFirstValue="";this._showError=true;this._noBorder=false;this._render=function(){var c=this;this._domObj.className+=" yk_entry";this._span=YK.domBuilder.create({append:this._domObj,tag:"span"});this._dom=YK.domBuilder.create({append:this._span,tag:"input",className:"yk_entry_input",type:"text",style:"border:0;"});this._dom.setAttribute("id","yk_entry_input_"+this._id);this.resize(this._width,this._height)};this._render();this._initEvent()};YK.Entry.prototype=new YK.Widget();YK.Entry.prototype.constructor=YK.Entry;YK.Entry.prototype._initEvent=function(){var a=this;var b=YK.Event;b.addDomListener(this._dom,"keyup",function(c){if(c.keyCode===YK.ENTER_KEY){a.emit("enterkeypressed",a._dom.value,c);return}if(a._dom.value!=a._entryFirstValue){a.emit("changed",a._dom.value)}a.emit("keypressed",a._dom.value,c);b.stopBubble(c)},false);b.addDomListener(this._span,"click",function(){a._dom.focus();a.emit("clicked",a._dom.value)});b.addDomListener(this._dom,"keypress",function(){a._entryFirstValue=a._dom.value});b.addDomListener(this._dom,"focus",function(c){a.emit("focused",a._dom.value,c);if(!a._noBorder){a._domObj.style.border="1px solid #F9CF06"}if(a._label){a._label.style.display="none"}});b.addDomListener(this._dom,"blur",function(c){a.emit("blurred",a._dom.value,c);if(!a._noBorder){a._domObj.style.border=""}if(a._label){if(!a._dom.value){a._label.style.display=""}}},false)};YK.Entry.prototype.setFocus=function(){this._dom.focus()};YK.Entry.prototype.showError=function(a){this._showError=(typeof a!=="undefined"&&typeof a==="boolean")?a:true;if(this._showError){this._domObj.className+=" yk_entry_onerror"}else{this._domObj.className="yk_widget yk_entry"}};YK.Entry.prototype.setTabindex=function(a){this._dom.tabIndex=a};YK.Entry.prototype.setTextSelectable=function(a){if(a){this.activateTextSelectable()}else{this.deactivateTextSelectable()}};YK.Entry.prototype.activateTextSelectable=function(){this._dom.className=""};YK.Entry.prototype.deactivateTextSelectable=function(){this._dom.className="yk_entry_non_selectable"};YK.Entry.prototype.setBorderVisible=function(a){this._domObj.style.borderColor=a?"1px solid grey":"transparent"};YK.Entry.prototype.showBorder=function(){this._domObj.style.border="1px solid #F9CF06";this._noBorder=false};YK.Entry.prototype.hideBorder=function(){this._domObj.style.border="0px solid transparent";this._noBorder=true};YK.Entry.prototype.setText=function(a){this._text=a;this._dom.value=a===undefined?"":this._text;if(this._label){this._removeLabel()}this.emit("changed")};YK.Entry.prototype._removeLabel=function(){this._span.removeChild(this._label);this._label=null};YK.Entry.prototype.getText=function(){return this._dom.value};YK.Entry.prototype.setWidthChars=function(a){this._widthChars=a;this._updateWidthHeight(a);this._resizeWidth(this._width)};YK.Entry.prototype.getWidthChars=function(){return this._widthChars};YK.Entry.prototype.setMaxLength=function(a){this._maxLength=a;this._dom.setAttribute("maxlength",a)};YK.Entry.prototype.getMaxLength=function(){return this._maxLength};YK.Entry.prototype.setVisibility=function(a){this._visible=a;this._visible?this._dom.setAttribute("type","text"):this._dom.setAttribute("type","password")};YK.Entry.prototype.getVisibility=function(){return this._visible};YK.Entry.prototype.getTextLength=function(){var a=this._dom.value.length;return a};YK.Entry.prototype._updateWidthHeight=function(b){var a=this._dom.cloneNode(true);if(b){var c=a.style;a.setAttribute("size",b);c.width=""}document.body.appendChild(a);this._width=a.clientWidth;this._minWidth=this._width;document.body.removeChild(a)};YK.Entry.prototype.setDisplayLabel=function(a){if(this._label){this._label.innerHTML=a||""}else{this._label=YK.domBuilder.create({tag:"span",append:this._span,className:"yk_entry_label",text:a})}};YK.Entry.prototype.select=function(){this._dom.select()};YK.Entry.prototype.setReadonly=function(a){this._readonly=(typeof a!="undefined"&&typeof a=="boolean")?a:false;this._readonly?this.enableReadonly():this.disableReadonly()};YK.Entry.prototype.enableReadonly=function(){this._dom.setAttribute("readonly","readonly")};YK.Entry.prototype.disableReadonly=function(){this._dom.setAttribute("readonly","")};YK.Entry.prototype.enable=function(){this._dom.disabled=false;this._domObj.style.backgroundColor="";this._dom.style.backgroundColor=""};YK.Entry.prototype.disable=function(){this._dom.disabled=true;this._dom.style.width=parseInt(this._domObj.style.width)-4+"px";this._domObj.style.backgroundColor="#EDECEC";this._dom.style.backgroundColor="#EDECEC"};YK.Entry.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Entry.prototype._resizeWidth=function(a){this._domObj.style.width=a+"px";this._dom.style.width=a-6+"px";this._width=a};YK.Entry.prototype._resizeHeight=function(a){this._domObj.style.height=a+"px";this._dom.style.height=a-2+"px";this._span.style.lineHeight=a+"px";this._height=a};YK.Entry.prototype._resizeHeightByFont=function(a){this._height=this._minHeight=a;this._domObj.style.height=a+"px";this._dom.style.height=a-2+"px";this._span.style.lineHeight=a+"px"};YK.Entry.prototype.resizeEntryByFont=function(c){this._dom.style.fontSize=c+"px";var d=this._dom.cloneNode(true);var b=d.style;b.fontSize=c+"px";b.width="";b.height="";var a=YK.Util.fullHeight(d);this._resizeHeightByFont(a)};YK.Entry.prototype.resizeWidth=function(a){this._width=a;this._resizeWidth(a)};YK.Entry.prototype.resizeHeight=function(a){this._height=a;this._resizeHeight(a)};gobject.signalNew("keypressed",YK.Entry,null,null,[]);gobject.signalNew("enterkeypressed",YK.Entry,null,null,[]);gobject.signalNew("focused",YK.Entry,null,null,[]);gobject.signalNew("blurred",YK.Entry,null,null,[]);gobject.signalNew("changed",YK.Entry,null,null,[]);gobject.signalNew("clicked",YK.Entry,null,null,[]);YK.DropDownRendere=function(a){YK.Object.apply(this);this._host=a;this._selectedRowNode=null;this._dropDown=YK.domBuilder.create({tag:"div",append:document.body,className:"dropdown_holder",id:"dropdown_holder_"+this._id});this._dropDown.style.zIndex=YK.DROPDOWN_ZINDEX;YK.domBuilder.hideElement(this._dropDown);this._initEvent();this._receivePublicEvent()};YK.DropDownRendere.prototype=new YK.Object();YK.DropDownRendere.prototype.constructor=YK.DropDownRendere;YK.DropDownRendere.prototype._initEvent=function(){var a=this,b=YK.Event;b.addDomListener(this._dropDown,"click",function(d){var c=d.target;if(YK.Util.isMatched("yk_drop_down_item",c.className)){a._host.mainViewHandleRowNodeSelection(c)}b.stopBubble(d)});b.addDomListener(this._dropDown,"mouseover",function(d){var c=d.target;if(YK.Util.isMatched("yk_drop_down_item",c.className)){a.hilightRowNode(c)}})};YK.DropDownRendere.prototype._receivePublicEvent=function(){var a=this;YK.Event.addPublicListener(this,"destroyed",function(){if(a._dropDown.parentNode){a._dropDown.parentNode.removeChild(a._dropDown)}});YK.Event.addPublicListener(this,"mousedowned",function(){a.hide()})};YK.DropDownRendere.prototype.showLoading=function(){this._dropDown.className+=" yk_drop_down_loading"};YK.DropDownRendere.prototype.hideLoading=function(){this._dropDown.className="dropdown_holder"};YK.DropDownRendere.prototype.show=function(){YK.domBuilder.showElement(this._dropDown)};YK.DropDownRendere.prototype.hide=function(){YK.domBuilder.hideElement(this._dropDown)};YK.DropDownRendere.prototype.positionDropDown=function(a,b){this._dropDown.style.top=b+"px";this._dropDown.style.left=a+"px"};YK.DropDownRendere.prototype.clear=function(){this._dropDown.innerHTML=""};YK.DropDownRendere.prototype.getSelectedRowNode=function(){return this._selectedRowNode};YK.DropDownRendere.prototype.setSelectedRowNode=function(a){this._selectedRowNode=a};YK.DropDownRendere.prototype.setSelectedRowNodeValueObj=function(a){this._selectedRowNode.valueObj=a};YK.DropDownRendere.prototype._positionRowNode=function(a,b){a.style.paddingLeft=15*(b.split(":").length/2-1)+5+"px"};YK.DropDownRendere.prototype.deHilightSelectedRow=function(){if(this._selectedRowNode){this._selectedRowNode.className="yk_drop_down_item";this._resetSelectedRowNode()}};YK.DropDownRendere.prototype._hilightElement=function(a){this._selectedRowNode.className+=" yk_drop_down_item_selected"};YK.DropDownRendere.prototype.hilightRowNode=function(b,a){this.deHilightSelectedRow();this._selectedRowNode=b;this._hilightElement(a)};YK.DropDownRendere.prototype.hilightNextRowNode=function(){var a=this._getNextSelectableNode(this._selectedRowNode);this.hilightRowNode(a);this._scrollToHilightedRow()};YK.DropDownRendere.prototype.hilightPreviousRowNode=function(){var a=this._getPreviousSelectableNode(this._selectedRowNode)||this._selectedRowNode;this.hilightRowNode(a);this._scrollToHilightedRow()};YK.DropDownRendere.prototype.hilightRowById=function(d){if(d!==""){var b=this._dropDown.childNodes;for(var c=0,a=b.length;c<a;c++){if(b[c].modelId==d){this.hilightRowNode(this._dropDown.childNodes[c],c);this._scrollToHilightedRow();break}}}else{this.deHilightSelectedRow()}};YK.DropDownRendere.prototype._getSelectedNodeIndex=function(){var c=this._dropDown.cloneNode(true).childNodes;for(var b=0,a=c.length;b<a;b++){if(YK.Util.isMatched("yk_drop_down_item_selected",c[b].className)){break}}return b};YK.DropDownRendere.prototype._scrollToHilightedRow=function(){var a=this._getSelectedNodeIndex();this._dropDown.scrollTop=a*18};YK.DropDownRendere.prototype._constructRowNodes=function(f,g){var b=g||document.createDocumentFragment();for(var d=0,a=f.length;d<a;d++){var h=f[d];var c=YK.domBuilder.create({tag:"div",append:b,text:h.display,id:"yk_drop_down_item_"+h.path+"_"+this._id,className:"yk_drop_down_item"});c.modelId=h.path;if(h.hasChildNodes){c.className="yk_drop_down_group";this._host.dropDownRenderSubRowNodes(h.path,b)}this._positionRowNode(c,h.path);c.valueObject=h.valueObject}this._dropDown.appendChild(b);this._resetSelectedRowNode()};YK.DropDownRendere.prototype._getPreviousSelectableNode=function(a){var a=a;var c=a?a.previousSibling:this._dropDown.lastChild;if(!c){return}var b=YK.Util.isMatched("yk_drop_down_item",c.className);c=b?c:this._getPreviousSelectableNode(c);return c};YK.DropDownRendere.prototype._getNextSelectableNode=function(b){var b=b||this._dropDown.firstChild;var a=b.nextSibling||b;var c=YK.Util.isMatched("yk_drop_down_item",a.className);a=c?a:this._getNextSelectableNode(a);return a};YK.DropDownRendere.prototype.resizeWidth=function(a){this._dropDown.style.width=a+"px"};YK.DropDownRendere.prototype._resetSelectedRowNode=function(){this._selectedRowNode=null};gobject.signalNew("itemselected",YK.DropDownRendere,null,null,[]);YK.DropDownMediator=function(a){this._mainView=a;this._keyControll=new YK.KeyControll(this);this._dropDownRendere=new YK.DropDownRendere(this)};YK.DropDownMediator.prototype.mainViewGetEntryValue=function(){return YK.Util.trim(this._mainView._entry.value)};YK.DropDownMediator.prototype.mainViewGetTags=function(){return this._mainView._tagHolder.childNodes};YK.DropDownMediator.prototype.mainViewShowEntry=function(){this._mainView.__showEntry()};YK.DropDownMediator.prototype.mainViewHandleRowNodeSelection=function(a){this._mainView.handleRowNodeSelection(a)};YK.DropDownMediator.prototype.mainViewHandleEntrySelection=function(){this._mainView.handleEntrySelection()};YK.DropDownMediator.prototype.dropDownConstruct=function(b,a){this._dropDownRendere._constructRowNodes(b,a)};YK.DropDownMediator.prototype.dropDownRenderSubRowNodes=function(b,a){this._mainView.renderDropDownSubRowNodes(b,a)};YK.DropDownMediator.prototype.dropDownClear=function(){this._dropDownRendere.clear()};YK.DropDownMediator.prototype.dropDownShowLoading=function(){this._dropDownRendere.showLoading()};YK.DropDownMediator.prototype.dropDownHideLoading=function(){this._dropDownRendere.hideLoading()};YK.DropDownMediator.prototype.dropDownResizeWidth=function(a){this._dropDownRendere.resizeWidth(a)};YK.DropDownMediator.prototype.dropDownShow=function(){this._dropDownRendere.show()};YK.DropDownMediator.prototype.dropDownHide=function(){this._dropDownRendere.hide()};YK.DropDownMediator.prototype.dropDownPosition=function(a,b){this._dropDownRendere.positionDropDown(a,b)};YK.DropDownMediator.prototype.dropDownHilightRowById=function(a){this._dropDownRendere.hilightRowById(a)};YK.DropDownMediator.prototype.dropDownHilightNextRowNode=function(){this._dropDownRendere.hilightNextRowNode()};YK.DropDownMediator.prototype.dropDownHilightPreviousRowNode=function(){this._dropDownRendere.hilightPreviousRowNode()};YK.DropDownMediator.prototype.dropDownGetSelectedRow=function(){return this._dropDownRendere.getSelectedRowNode()};YK.DropDownMediator.prototype.dropDownSetSelectedRowNodeValueObj=function(a){this._dropDownRendere.setSelectedRowNodeValueObj(a)};YK.DropDownMediator.prototype.keyControllIsCtrlAKeyPressed=function(a){this._keyControll.isCtrlAKeyPressed(a)};YK.DropDownMediator.prototype.keyControllFireDownArrowKey=function(){this._keyControll.fireDownArrowKey()};YK.DropDownMediator.prototype.keyControllFireUpArrowKey=function(){this._keyControll.fireUpArrowKey()};YK.DropDownMediator.prototype.keyControllFireLeftArrowKey=function(){this._keyControll.fireLeftArrowKey()};YK.DropDownMediator.prototype.keyControllFireRightArrowKey=function(){this._keyControll.fireRightArrowKey()};YK.DropDownMediator.prototype.keyControllFireEnterKey=function(){this._keyControll.fireEnterKey()};YK.DropDownMediator.prototype.keyControllFireBackSpace=function(a){this._keyControll.fireBackSpace(a)};YK.DropDownMediator.prototype.keyControllFireDeleteKey=function(){this._keyControll.fireDeleteKey()};YK.KeyControll=function(a){this._host=a};YK.KeyControll.prototype.fireDownArrowKey=function(){this._host.dropDownHilightNextRowNode()};YK.KeyControll.prototype.fireUpArrowKey=function(){this._host.dropDownHilightPreviousRowNode()};YK.KeyControll.prototype.fireEnterKey=function(){this._handleSelection()};YK.KeyControll.prototype._handleSelection=function(){var a=this._host.dropDownGetSelectedRow();if(a){this._host.mainViewHandleRowNodeSelection(a)}else{this._host.mainViewHandleEntrySelection()}};YK.EntryDropDownMediator=function(a){YK.DropDownMediator.apply(this,[a])};YK.EntryDropDownMediator.prototype=new YK.DropDownMediator();YK.EntryDropDownMediator.prototype.constructor=YK.EntryDropDownMediator;YK.EntryDropDownController=function(a){this._model=null;var b=this;this._view=a;this._render=function(d,c){var f=this.__mashupModel(d.getChildren());a._renderDropDown(f,c)};a.connect("_rendersubnodes",function(d,c){var f=b._model.getChildByPath(d);b._render(f,c)});a.connect("_search",function(d){var c=b._model.search(d);var f=c?c.getPath():"";a._hilightRow(f)});a.connect("_itemselected",function(c){var d=b._model.getChildByPath(c);a.setText(d.getValue()["display"]);a._setSelectedRowValue(d.getValue());a.emit("selected",d.getValue())});a.connect("_searchModelByValueMember",function(g,c){var f=b._model.getChldBy(g,c);if(typeof f!=="undefined"){var d=f.getValue();a.setText(d.display);a.emit("selected",d);a._setSelectedRowValue(d)}});a.connect("_searchbyindex",function(c){var f=b._model.getChildByIndex(c);if(f!==null){var d=f.getValue();a.setText(d.display);a.emit("selected",d);a._setSelectedRowValue(d)}});a.connect("_modelfiltered",function(c){b._performFilterAction(c)})};YK.EntryDropDownController.prototype.setModel=function(a){this._model=a};YK.EntryDropDownController.prototype.__mashupModel=function(b){var g=[],d,f;for(var c=0,a=b.length;c<a;c++){d=b[c];f=d.getChildren().length>0;g.push({display:d.getValue()["display"],hasChildNodes:f,path:d.getPath(),valueObject:d.getValue()})}return g};YK.EntryDropDownController.prototype._performFilterAction=function(c){var a=YK.Util.trim(c);if(a!=""){this._view._clearDropDown();var d=this._model.filter(a);var b=this.__mashupModel(d);if(b.length<=0){this._view._hideDropDown();return}this._view._renderDropDown(b,null)}else{this._view._hideDropDown()}};YK.EntryDropDown=function(a){YK.Entry.apply(this,[a]);this.ENTRYDROPDOWN_SELECTED="selected";this._filteredData=[];this._selectedRowValue=null;this._scrolledHost=YK.NullScrollerHostObj;this._render=function(){var b=this;this._domObj.className+=" yk_entry_drop_down";this._dom.setAttribute("id","yk_entry_drop_down_"+this._id);this._entry=this._dom};this._render();this._entryDropDownMediator=new YK.EntryDropDownMediator(this);this._controller=new YK.EntryDropDownController(this);YK.EntryDropDownEvent.initEvent(this)};YK.EntryDropDown.prototype=new YK.Entry();YK.EntryDropDown.prototype.constructor=YK.EntryDropDown;YK.EntryDropDown.prototype.setSelectedItemBy=function(b,a){this.emit("_searchModelByValueMember",b,a)};YK.EntryDropDown.prototype.setSelectedIndex=function(a){this.emit("_searchbyindex",a)};YK.EntryDropDown.prototype.setModel=function(a){this._controller.setModel(a)};YK.EntryDropDown.prototype.setText=function(a){this._dom.value=a};YK.EntryDropDown.prototype.getText=function(a){return this._dom.value};YK.EntryDropDown.prototype.getSelectedRowValue=function(){return this._selectedRowValue};YK.EntryDropDown.prototype.getValue=function(){return this.getSelectedRowValue()};YK.EntryDropDown.prototype._setSelectedRowValue=function(a){this._selectedRowValue=a};YK.EntryDropDown.prototype._renderDropDown=function(b,a){var c=this._entryDropDownMediator.dropDownConstruct(b,a);this._isDropDownCreated=true};YK.EntryDropDown.prototype.renderDropDownSubRowNodes=function(b,a){this.emit("_rendersubnodes",b,a)};YK.EntryDropDown.prototype._clearDropDown=function(){this._entryDropDownMediator.dropDownClear()};YK.EntryDropDown.prototype._hideDropDown=function(){this._entryDropDownMediator.dropDownHide()};YK.EntryDropDown.prototype._showDropDown=function(){this._entryDropDownMediator.dropDownShow();this._setPosition()};YK.EntryDropDown.prototype._setPosition=function(){var d=YK.Util.pageY(this._domObj);var c=YK.Util.pageX(this._domObj);var g=parseInt(this._domObj.style.height);var b=this._getNearestScrollerY();var a=c+1,f=d+g+3-b;this._entryDropDownMediator.dropDownPosition(a,f)};YK.EntryDropDown.prototype._getNearestScrollerY=function(){var b=0;var a=this._domObj.parentNode;if(a!==null){while(a.parentNode!==null){if(this._scrolledHost.getNode()===a){b=a.scrollTop;break}a=a.parentNode}}return b};YK.EntryDropDown.prototype.handleRowNodeSelection=function(){var a=this._entryDropDownMediator.dropDownGetSelectedRow();this.emit("_itemselected",a.modelId);this._entry.value=a.firstChild.nodeValue;this._hideDropDown()};YK.EntryDropDown.prototype.handleEntrySelection=function(){this._hideDropDown()};YK.EntryDropDown.prototype._handleSearch=function(){this.emit("_search",this._dom.value)};YK.EntryDropDown.prototype._hilightRow=function(a){this._entryDropDownMediator.dropDownHilightRowById(a)};YK.EntryDropDown.prototype._resizeWidth=function(a){this._domObj.style.width=a+"px";this._dom.style.width=a-6+"px";if(this._entryDropDownMediator){this._entryDropDownMediator.dropDownResizeWidth(a)}this._width=a};gobject.signalNew("_search",YK.EntryDropDown,null,null,[]);gobject.signalNew("_itemselected",YK.EntryDropDown,null,null,[]);gobject.signalNew("_rendersubnodes",YK.EntryDropDown,null,null,[]);gobject.signalNew("_searchModelByValueMember",YK.EntryDropDown,null,null,[]);gobject.signalNew("_searchbyindex",YK.EntryDropDown,null,null,[]);gobject.signalNew("_modelfiltered",YK.EntryDropDown,null,null,[]);gobject.signalNew("selected",YK.EntryDropDown,null,null,[]);YK.NullScrollerHostObj=YK.NullObjectBuilder.build(new YK.Widget());YK.NullScrollerHostObj.getNode=function(){return YK.domBuilder.create({tag:"div"})};YK.EntryDropDownEvent={initEvent:function(a){var c=false;var b=YK.Event;a.connect("changed",function(d){a._selectedRowValue=null;a._showDropDown();a.emit("_modelfiltered",d)});b.addPublicListener(this,"deactivated",function(){a._hideDropDown()});b.addPublicListener(a,"scrolled",function(d){a._scrolledHost=d});this.bindInputEvent(a)},bindInputEvent:function(a){var b=YK.Event;var c;b.addDomListener(a._domObj,"keydown",function(d){switch(d.keyCode){case YK.DOWN_ARROW_KEY:a._entryDropDownMediator.keyControllFireDownArrowKey();return;case YK.UP_ARROW_KEY:a._entryDropDownMediator.keyControllFireUpArrowKey();return;case YK.ENTER_KEY:a._entryDropDownMediator.keyControllFireEnterKey();return;case YK.TAB_KEY:a._entryDropDownMediator.keyControllFireEnterKey();YK.Event.stopDefault(d);return}if(a._dom.value){clearTimeout(c);c=setTimeout(function(){a._handleSearch()},200)}})}};YK.Frame=function(a){YK.Widget.apply(this);this._label=a||" ";this._labelXAlign=0;this._labelYAlign=0.5;this._child=null;this._minWidth=this._minContainerWidth=this._width=20;this._minHeight=this._minContainerHeight=this._height=20;this._childOffsetWidth=18;this._childOffsetHeight=39;this._attribute;this._render=function(){var c=this._domObj;c.className+=" yk_frame";var d="FRAME-"+YK.LibAdapter.getGUID();c.setAttribute("id",d);this._labelDom=YK.domBuilder.create({append:c,tag:"div"});this._label=new YK.Label(a);this._label.setJustify(YK.JUSTIFY_CENTER);this._labelDom.appendChild(this._label.getNode());this._minWidth=this._minContainerWidth=this._width=this._label.getWidth()+2;this._minHeight=this._minContainerHeight=this._height=this._label.getHeight()+24;this._frameArea=YK.domBuilder.create({append:c,tag:"div",className:"yk_frame_area"});var b=this._frameArea.style;b.width=this._width-2+"px";b.height=this._height-10+"px";this._widgetContainer=YK.domBuilder.create({append:this._frameArea,tag:"div",style:"position: relative"});this._widgetContainer.style.left="7px";c.style.height=this._height+"px";c.style.width=this._width+"px";this.setLabelAlign(this._labelXAlign,0.5)};this._render()};YK.Frame.prototype=new YK.Widget();YK.Frame.prototype.constructor=YK.Frame;YK.Frame.prototype.appendChild=function(b){if(typeof b!="undefined"){if(this._child!==null){this._widgetContainer.removeChild(this._child.getNode())}this._child=b;this._widgetContainer.appendChild(b.getNode());var a=this._getSize();this.resize(a[0],a[1])}};YK.Frame.prototype.removeChild=function(a){this._widgetContainer.removeChild(a.getNode());this._child=YK.NullObj};YK.Frame.prototype.setLabel=function(a){this._label.setText(a);this.setLabelAlign(this._labelXAlign,this._labelYAlign)};YK.Frame.prototype.getLabel=function(){return this._label.getText()};YK.Frame.prototype.setLabelWidget=function(a){this.setLabel(a.getText());this._labelWidget=a;this._domObj.style.width=this._labelWidget._minWidth+2+"px";this._frameArea.style.width=this._labelWidget._minWidth+"px"};YK.Frame.prototype.getLabelWidget=function(){return this._labelWidget};YK.Frame.prototype.setLabelAlign=function(c,a){this._labelXAlign=c;this._labelYAlign=a;var b=(this._width-this._label.getWidth())*c-1;if(b<1){b=1}this._labelDom.style.left=b+"px"};YK.Frame.prototype.getLabelAlign=function(){return[this._labelXAlign,this._labelYAlign]};YK.Frame.prototype._getSize=function(){var b=this._child.getMinWidth();var a=this._child.getMinHeight();b=this._minContainerWidth>b?this._minContainerWidth:b;a=this._minContainerHeight>a?this._minContainerHeight:a;return[b+this._childOffsetWidth,a+this._childOffsetHeight]};YK.Frame.prototype._setLabelXAlign=function(){this._labelXAlign=(this._width/2)-parseInt(this._labelDom.style.width)/2};YK.Frame.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a);this._resizeChildren(b,a);this.setLabelAlign(this._labelXAlign,this._labelYAlign)};YK.Frame.prototype._resizeWidth=function(a){if(this._minWidth>a){return}if(this._width<a){this._width=a}else{a=this._width}this._domObj.style.width=a-2+"px";this._frameArea.style.width=a-4+"px";this._widgetContainer.style.width=a-this._childOffsetWidth+"px"};YK.Frame.prototype._resizeHeight=function(a){this._domObj.style.height=a-2+"px";this._frameArea.style.height=a-12+"px";this._widgetContainer.style.height=a-this._childOffsetHeight+"px";this._height=a};YK.Frame.prototype._resizeChildren=function(b,a){this._child.resizeWidth(b-this._childOffsetWidth);this._child.resizeHeight(a-this._childOffsetHeight)};YK.Frame.prototype.getMinWidth=function(){return this._child.getMinWidth()+this._childOffsetWidth};YK.Frame.prototype.getMinHeight=function(){return this._child.getMinHeight()+this._childOffsetHeight};YK.Frame.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this.setWidth(a);this.resize(a,this._height)};YK.Frame.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this.resize(this._width,b)};YK.Frame.prototype.setAttribute=function(a){this._attribute=a;this._applyAttribute()};YK.Frame.prototype._applyAttribute=function(){for(var a in this._attribute){if(a=="border"){this._frameArea.style.border=this._attribute[a]}else{if(a=="backgroundColor"){this._domObj.style[a]=this._attribute[a]}else{this._label.getNode().childNodes[0].childNodes[0].childNodes[0].childNodes[0].style[a]=this._attribute[a]}}}};YK.Frame.prototype.lockWidth=function(){this._isWidthLocked=true};YK.Frame.prototype.lockHeight=function(){this._isHeightLocked=true};YK.Frame.prototype.unlockHeight=function(){this._isHeightLocked=false};YK.Frame.prototype.unlockWidth=function(){this._isWidthLocked=false};YK.Frame.prototype.lockSize=function(){this.lockWidth();this.lockHeight()};YK.Frame.prototype.unlockSize=function(){this.unlockWidth();this.unlockHeight()};YK.Frame.prototype.refresh=function(){var a=this.getMinWidth();if(this._isWidthLocked){a=a<this._width?this._width:a}this.resizeWidth(a);var b=this.getMinHeight();if(this._isHeightLocked){b=b<this._height?this._height:b}this.resizeHeight(b)};YK.NullObj=YK.NullObjectBuilder.build(new YK.Widget());YK.NullObj.resizeWidth=function(){};YK.NullObj.resizeHeight=function(){};YK.NullObj.getMinWidth=function(){return 0};YK.NullObj.getMinHeight=function(){return 0};YK.NullObj.getNode=function(){return Dom.create({tag:"div"})};YK.TreePath=function(a){this.pathStr=a?a:"0"};YK.TreeIter=function(a){YK.Object.apply(this);this._modelType=YK.TREE_ITER;this.path=a?a:"0";this.hasNode=false;this.parent=null;this.children=[];this._value};YK.TreeIter.prototype=new YK.Object();YK.TreeIter.prototype.constructor=YK.TreeIter;YK.TreeIter.prototype.getChldBy=function(f,c){var d=String(this._value[f]).toLowerCase();var a=String(c).toLowerCase();if(d===a){return this}for(var b=this.children.length;b--;){return this.children[b].getChldBy(f,c)}};YK.TreeIter.prototype.setParent=function(a){this.parent=a};YK.TreeIter.prototype.getParent=function(){return this.parent};YK.TreeIter.prototype.setRow=function(a){this._value=a};YK.TreeIter.prototype.getValue=function(){return this._value};YK.TreeIter.prototype.getModelType=function(){return this._modelType};YK.TreeIter.prototype.copy=function(){return this};YK.TreeIter.prototype.getChildByPath=function(a){var b=a.split(":");var c=this._getChildByPath(parseInt(b[0]));b.splice(0,1);if(b.length===1){return c}return c.getChildByPath(b.join(":"))};YK.TreeIter.prototype._getChildByPath=function(c){for(var a=this.children.length;a--;){var b=this.children[a].path.split(":");if(parseInt(b[b.length-2])===c){return this.children[a]}}return null};YK.TreeIter.prototype.updateValue=function(a){this._value.value=a;this.emit("valueupdated",this.path,a)};YK.TreeIter.prototype.getPath=function(){return this.path};YK.TreeIter.prototype.getChildren=function(){return this.children};YK.TreeIter.prototype.add=function(a){this.children.push(a)};YK.TreeIter.prototype.remove=function(b){for(var a=this.children.length;a--;){if(this.children[a]===b){this.children.splice(a,1);break}}};YK.TreeIter.prototype.getChild=function(a){return this.children[a]||null};YK.TreeIter.prototype._search=function(h){var f=new RegExp("^"+h.toLowerCase());var d=this.getChildren();var b=d.length;if(b>0){for(var c=0;c<b;c++){var k=d[c];this._child=k._search(h);if(this._child){return this._child}}}else{var g=this.getValue()["display"];var a=g.toLowerCase().match(f);if(a){return this}}};gobject.signalNew("valueupdated",YK.TreeIter,[],null,null);YK.TreeStore=function(a){YK.Object.apply(this);this._modelType=YK.TREESTORE;this._header=a||"Header";this.children=[]};YK.TreeStore.prototype=new YK.Object();YK.TreeStore.prototype.constructor=YK.TreeStore;YK.TreeStore.prototype.append=function(b,d){if(b){var c=b.getPath()+b.getChildren().length.toString()+":";var a=new YK.TreeIter(c);a.setRow(d);a.hasNode=d.hasChild||false;a.setParent(b);b.add(a);b.hasNode=true}else{var a=new YK.TreeIter(this.children.length.toString()+":");a.setRow(d);a.hasNode=d.hasChild||false;a.setParent(this);this.add(a)}return a};YK.TreeStore.prototype.appendNodes=function(d,f){if(f.length===0){return}var b=[];for(var c=0,a=f.length;c<a;c++){b.push(this.append(d,f[c]))}this.emit("nodesappended",d);return b};YK.TreeStore.prototype.getModelType=function(){return this._modelType};YK.TreeStore.prototype.getChldBy=function(d,b){for(var a=this.children.length;a--;){var c=this.children[a].getChldBy(d,b);if(c){return c}}};YK.TreeStore.prototype.getLastChild=function(){return this.children[this.children.length-1]};YK.TreeStore.prototype.getChildByIndex=function(a){if(a<0||a>this.children.length){return null}return this.children[a]};YK.TreeStore.prototype.getChildByPath=function(a){var b=a.split(":");var c=this._getChildByPath(parseInt(b[0]));b.splice(0,1);if(b.length===1){return c}return c.getChildByPath(b.join(":"))};YK.TreeStore.prototype._getChildByPath=function(c){for(var a=this.children.length;a--;){var b=this.children[a].path.split(":");if(parseInt(b[0])===c){return this.children[a]}}return null};YK.TreeStore.prototype.getChildren=function(){return this.children};YK.TreeStore.prototype.add=function(a){this.children.push(a)};YK.TreeStore.prototype._searchByValueMember=function(g,d,c){var f;var c=c||this.children;for(var b=0,a=c.length;b<a;b++){f=c[b];if(f._value[g]===d){return f}}for(var b=0,a=c.length;b<a;b++){f=c[b];if(f.hasNode){f=this._searchByValueMember(g,d,f.getChildren());if(f){return f}}}};YK.TreeStore.prototype.filter=function(f){if(f.length===0){return null}var d=[];var c=new RegExp("^"+f.toLowerCase());for(var b=0,a=this.children.length;b<a;b++){var g=this.children[b];result=g.getValue()["display"].toLowerCase().match(c);if(result){d.push(g)}}return d};YK.TreeStore.prototype.remove=function(c){for(var b=0,a=this.children.length;b<a;b++){if(this.children[b]===c){this.children.splice(b,1);break}}};YK.TreeStore.prototype.removeByPath=function(b){var c=this.getChildByPath(b);var a=c.getParent();a.remove(c)};YK.TreeStore.prototype.getChild=function(a){return this.children[a]||null};YK.TreeStore.prototype.search=function(g,d){var f=new RegExp("^"+g.toLowerCase());var d=d||this.children;var b="";for(var c=0,a=d.length;c<a;c++){var h=d[c];b=h._search(g);if(b){return b}}};gobject.signalNew("nodesappended",YK.TreeStore,[],null,null);YK.TreeView=function(a){YK.Widget.apply(this);this._TREEVIEW_NODESELECTED="nodeselected";this._TREEVIEW_NODEEXPANDED="nodeexpanded";this.__width=this._minWidth=100;this.__height=this._minHeight=100;this.__nodeImgWidth=15;this.__model=a||null;this._selectedNode=null;this._hilightedNode=null;this._menuNode=null;this._selectedNodeDataObj=null;this.__selectedNodePath="";this.__expandedNodePath="";this.__isLoading=false;this._maxWidth=this._minWidth;this._commandMap=new YK.CommandMap();this._nodeHilighter=new YK.TreeViewNodeHilighter();this._config={menuEnabled:false};this.__render=function(){this._domObj.className+=" yk_treeview_new";this._domObj.style.width=this.__width+"px";this._domObj.style.height=this.__height+"px"};this.__render();new YK.TreeViewController(this);this._receivePublicEvent()};YK.TreeView.prototype=new YK.Widget();YK.TreeView.prototype.constructor=YK.TreeView;YK.TreeView.prototype.setSelectedItemBy=function(b,a){this.emit("_search_by",b,a)};YK.TreeView.prototype.setConfig=function(a){this._config=a};YK.TreeView.prototype.setModel=function(a){this._domObj.innerHTML="";this.__model=a;this.__selectedNodePath="";this.emit("_modelreset",this.__model)};YK.TreeView.prototype.getModel=function(){return this.__model};YK.TreeView.prototype.showLoading=function(a){this._commandMap.executeLoading(a,YK.SHOW_NODE_LOADING);this.__isLoading=true};YK.TreeView.prototype.hideLoading=function(a){this._commandMap.executeLoading(a,YK.HIDE_NODE_LOADING);this.__isLoading=false};YK.TreeView.prototype.getSelectedNodeDataObj=function(){return this._selectedNodeDataObj};YK.TreeView.prototype.getSelectedNode=function(){console.log("getSelectedNode() will be depriciated, use getSelectedNodeDataObj()");return this.getSelectedNodeDataObj()};YK.TreeView.prototype._setSelectedNodeDataObj=function(a){this._selectedNodeDataObj=a};YK.TreeView.prototype.deleteNode=function(a){this.emit("_deletednode",a);this.emit("_deselectedNode")};YK.TreeView.prototype.deselectNode=function(){if(this._selectedNode){YK.domBuilder.applyAttributes(this._selectedNode,{backgroundColor:""})}this._selectedNode=null;this.emit("_deselectedNode")};YK.TreeView.prototype._constructTreeNode=function(d,h,g){var b={text:d.display,isFirstNode:h,isParent:d.hasChildNodes?true:false,id:d.path,width:this._maxWidth+this.__nodeImgWidth+10,docFragment:g,expandable:d.hasChildNodes?true:false,menuEnabled:this._config.menuEnabled};var a=new YK.TreeViewNodeBuilder(b);a.render();var f=a.node;this._handleActions(f);var c=this;a.connect("treemenu_docked",function(k){YK.Event.triggerPublicListener("treemenu_docked",c);var l=k.parentNode;c.emit("_node_menu_selected",l.modelId,l);c._nodeHilighter.hideMenus(k,c._domObj.childNodes)});a.connect("treemenu_undocked",function(k){YK.Event.triggerPublicListener("mousedowned",c)});return f};YK.TreeView.prototype.__clearTreeNodes=function(){this._domObj.innerHTML=""};YK.TreeView.prototype._clearSiblings=function(b){var c=b.modelId,h=this._domObj.childNodes,k=[];var f=new RegExp("^"+c);for(var d=0,a=h.length;d<a;d++){var g=h[d];if(g.modelId.match(f)&&c!==g.modelId){k.push(g)}}for(var d=k.length;d--;){this._domObj.removeChild(k[d])}};YK.TreeView.prototype._constructTreeNodes=function(b,f,h){if(b){this._clearSiblings(b)}var g=document.createDocumentFragment();for(var c=0,a=f.length;c<a;c++){var d=this._constructTreeNode(f[c],h,g)}this.__appendToTree(b,g,h)};YK.TreeView.prototype._refreshTreeNodes=function(a){this.__clearTreeNodes();this._constructTreeNodes(null,a,true)};YK.TreeView.prototype.__appendToTree=function(a,c,d){if(d){this._domObj.appendChild(c);return}if(a){var b=a.nextSibling;this._domObj.insertBefore(c,b)}};YK.TreeView.prototype._showNodes=function(a){this._commandMap.executeNode(a,YK.SHOW_NODE)};YK.TreeView.prototype._hideNodes=function(a){this._commandMap.executeNode(a,YK.HIDE_NODE)};YK.TreeView.prototype._renderSubNodes=function(a){this.emit("_rendersubnodes",a,a.modelId);a.hasBeenExpanded=true};YK.TreeView.prototype._showExpanded=function(a){a.isExpanded=true;var b=a.firstChild.firstChild.firstChild;b.style.backgroundPosition="-386px 1px"};YK.TreeView.prototype._showCollapse=function(a){a.isExpanded=false;var b=a.firstChild.firstChild.firstChild;b.style.backgroundPosition=""};YK.TreeView.prototype.__collapse=function(a){this._hideNodes(a);this._showCollapse(a)};YK.TreeView.prototype.__expand=function(b){if(typeof b!=="undefined"){var a=b.hasBeenExpanded;if(!a){this._renderSubNodes(b)}else{this._showNodes(b)}this._handleNodeExpanding(b);this._showExpanded(b)}};YK.TreeView.prototype._handleNodeExpanding=function(a){var b=a.modelId;if(this.__expandedNodePath!==b){this.__expandedNodePath=b;this.emit("_nodeexpanded",b,a)}};YK.TreeView.prototype._handleExpandCollapse=function(c){var b=this,d=c.modelId;var a=c.firstChild.firstChild;YK.Event.addDomListener(a,"click",function(f){if(b.__isLoading){return}if(c.isExpanded){b.__collapse(c)}else{b.__expand(c)}YK.Event.stopBubble(f)})};YK.TreeView.prototype._handleNodeSelection=function(a){var b=a.modelId;this._nodeHilighter.hilightSelectedNode(a);if(this.__selectedNodePath!==b){this.__selectedNodePath=b;this.emit("_nodeselected",b,a)}};YK.TreeView.prototype._handleNodeClick=function(b){var a=this;YK.Event.addDomListener(b,"click",function(c){a._handleNodeSelection(b);YK.Event.triggerPublicListener("mousedowned",a);YK.Event.stopBubble(c)})};YK.TreeView.prototype._receivePublicEvent=function(){var a=this;YK.Event.addPublicListener(this,"mousedowned",function(){a._nodeHilighter.hideMenus(null,a._domObj.childNodes)});YK.Event.addPublicListener(this,"ecs_keypressed",function(){a._nodeHilighter.hideMenus(null,a._domObj.childNodes)});YK.Event.addPublicListener(this,"menu_closed",function(){a._nodeHilighter.hideMenus(null,a._domObj.childNodes)})};YK.TreeView.prototype._handleMouseOver=function(b){var a=this;YK.Event.addDomListener(b,"mouseover",function(c){a._nodeHilighter.hilightNode(b);a._nodeHilighter.showMenu(b);YK.Event.stopBubble(c)});YK.Event.addDomListener(b,"mouseout",function(c){a._nodeHilighter.deHilightNode();a._nodeHilighter.hideMenu(b);YK.Event.stopBubble(c)})};YK.TreeView.prototype._handleActions=function(a){this._handleNodeClick(a);this._handleExpandCollapse(a);this._handleMouseOver(a)};YK.TreeView.prototype.expandNodes=function(g){var f=g.split(":"),d="";for(var b=0,a=f.length-1;b<a;b++){d+=f[b]+":";var c=this._getNodeByPath(d);this.__expand(c)}var c=this._getNodeByPath(g);this._handleNodeSelection(c)};YK.TreeView.prototype._getNodeByPath=function(d){var b=this._domObj.childNodes;for(var c=0,a=b.length;c<a;c++){if(b[c].modelId===d){return b[c]}}};gobject.signalNew("_search_by",YK.TreeView,[],null,null);gobject.signalNew("_rendersubnodes",YK.TreeView,[],null,null);gobject.signalNew("_nodeselected",YK.TreeView,[],null,null);gobject.signalNew("_nodeexpanded",YK.TreeView,[],null,null);gobject.signalNew("nodeexpanded",YK.TreeView,[],null,null);gobject.signalNew("_node_menu_selected",YK.TreeView,[],null,null);gobject.signalNew("nodeselected",YK.TreeView,[],null,null);gobject.signalNew("_modelreset",YK.TreeView,[],null,null);gobject.signalNew("_deletednode",YK.TreeView,[],null,null);gobject.signalNew("_deselectedNode",YK.TreeView,[],null,null);gobject.signalNew("treemenuclicked",YK.TreeView,[],null,null);YK.TreeViewController=function(a){this._view=a;this._selectedNode=null;this._viewSignals=[];var b=this;this._view.connect("_modelreset",function(c){b.setModel(c)})};YK.TreeViewController.prototype.setModel=function(a){this._model=a;this._constructTreeNode(this._model,true);this._initSignals()};YK.TreeViewController.prototype._initSignals=function(){var a=this;if(this._viewSignals.length>0){this._disconnectSignalFromView()}this._model.connect("nodesappended",function(b){a._constructTreeNode(b)});this._viewSignals.push(this._view.connect("_nodeexpanded",function(d,c){a._selectedNode=c;var b=a._model.getChildByPath(d);a._view._setSelectedNodeDataObj({domNode:c,model:a._model.getChildByPath(d),display:b.getValue()});a._view.emit("nodeexpanded",b.getValue())}));this._viewSignals.push(this._view.connect("_nodeselected",function(d,c){a._selectedNode=c;var b=a._model.getChildByPath(d);a._view._setSelectedNodeDataObj({domNode:c,model:a._model.getChildByPath(d),display:b.getValue()});a._view.emit("nodeselected",b.getValue())}));this._viewSignals.push(this._view.connect("_node_menu_selected",function(f,d){a._selectedNode=d;var b=a._model.getChildByPath(f);if(!b){return}a._view._setSelectedNodeDataObj({domNode:d,model:a._model.getChildByPath(f),display:b.getValue()});var c=d.lastChild;a._view.emit("treemenuclicked",c.isLeaf,c)}));this._viewSignals.push(this._view.connect("_rendersubnodes",function(b,d){var c=a._model.getChildByPath(d);a._selectedNode=b;a._constructTreeNode(c)}));this._viewSignals.push(this._view.connect("_deletednode",function(c){var b=a._removeChildModel(c.model);if(b.getModelType()===YK.TREESTORE){a._refreshTreeNode(b)}else{a._constructTreeNode(b)}}));this._viewSignals.push(this._view.connect("_deselectedNode",function(){a._view._setSelectedNodeDataObj(null)}));this._viewSignals.push(this._view.connect("_search_by",function(d,b){var c=a._model._searchByValueMember(d,b);a._view.expandNodes(c.getPath())}))};YK.TreeViewController.prototype._disconnectSignalFromView=function(){for(var a=this._viewSignals.length;a--;){this._view.disconnect(this._viewSignals[a])}};YK.TreeViewController.prototype._removeChildModel=function(c){var a=c.path.substring(0,c.path.length-2);var b=this._getParentModel(a);b.remove(c);return b};YK.TreeViewController.prototype._getParentModel=function(a){return a===""?this._model:this._model.getChildByPath(a)};YK.TreeViewController.prototype._refreshTreeNode=function(a){this._selectedNode=null;var b=this._mashupModel(a.getChildren());this._view._refreshTreeNodes(b)};YK.TreeViewController.prototype._constructTreeNode=function(b,a){var c=this._mashupModel(b.getChildren());this._view._constructTreeNodes(this._selectedNode,c,a)};YK.TreeViewController.prototype._mashupModel=function(b){var g=[],d,f;for(var c=0,a=b.length;c<a;c++){d=b[c];f=(d.getChildren().length>0)||d.hasNode?true:false;g.push({display:d.getValue()["display"],hasChildNodes:f,path:d.getPath()})}return g};YK.ActivateCommand=function(){};YK.ActivateCommand.prototype={executeLoading:function(d){var b=d.firstChild.firstChild;for(var c=0,a=b.childNodes.length;c<a;c++){YK.domBuilder.hideElement(b.childNodes[c])}YK.domBuilder.showElement(b.lastChild)},executeNode:function(d){var a=new RegExp("^"+d.modelId);var f=d.parentNode.childNodes;for(var b=f.length;b--;){var c=f[b];if(c.modelId.match(a)&&c.modelId!==d.modelId){YK.domBuilder.showElement(c)}}}};YK.CommandMap=function(){this._activateCommand=new YK.ActivateCommand();this._deactivateCommand=new YK.DeactivateCommand();this.executeLoading=function(b,a){if(a===YK.SHOW_NODE_LOADING){this._activateCommand.executeLoading(b)}if(a===YK.HIDE_NODE_LOADING){this._deactivateCommand.executeLoading(b)}};this.executeNode=function(b,a){if(a===YK.SHOW_NODE){this._activateCommand.executeNode(b)}if(a===YK.HIDE_NODE){this._deactivateCommand.executeNode(b)}}};YK.DeactivateCommand=function(){};YK.DeactivateCommand.prototype={executeLoading:function(d){var b=d.firstChild.firstChild;for(var c=0,a=b.childNodes.length;c<a;c++){YK.domBuilder.showElement(b.childNodes[c])}YK.domBuilder.hideElement(b.lastChild)},executeNode:function(d){var a=new RegExp("^"+d.modelId);var f=d.parentNode.childNodes;for(var b=f.length;b--;){var c=f[b];if(c.modelId.match(a)&&c.modelId!==d.modelId){YK.domBuilder.hideElement(c)}}}};YK.TreeViewNodeBuilder=function(a){YK.Object.apply(this);this._nodeProperties=a;this.render=function(){this._constructNode();this._constructLoadingImage();this._constructNodeText();this._constructMenuTrigger();this._positionNode();this._resize()};this._positionNode=function(){var c=this._nodeProperties.id.split(":").length-2;var b=this._nodeProperties.isFirstNode?0:16*c;this.node.firstChild.style.left=b+"px"};this._constructNode=function(){this.node=YK.domBuilder.create({append:this._nodeProperties.docFragment,tag:"div","class":"yk_treeview_node",id:"yk_treeview_node_"+this._id});this.node.modelId=this._nodeProperties.id;this.node.hasBeenExpanded=false;this.node.isExpanded=false;this._container=YK.domBuilder.create({append:this.node,tag:"div","class":"yk_treeview_node_row"});this._dotContainer=YK.domBuilder.create({append:this._container,tag:"div","class":"yk_treeview_dot_container",id:"yk_treeview_dot_container_"+this._id});var b=YK.domBuilder.create({append:this._dotContainer,tag:"div","class":"yk_treeview_node_image"});if(this._nodeProperties.expandable){b.className+=" hasChild"}};this._constructLoadingImage=function(){var b=YK.domBuilder.create({append:this._dotContainer,tag:"div","class":"yk_treeview_node_image_loading"});YK.domBuilder.hideElement(b)};this._constructNodeText=function(){YK.domBuilder.create({append:this._container,tag:"div",text:this._nodeProperties.text,"class":"yk_treeview_node_text"})};this._constructMenuTrigger=function(){var b=YK.domBuilder.create({append:this.node,tag:"div","class":"yk_treeview_menu_trigger",id:"yk_treeview_menu_trigger_"+this._id});b.tabIndex="0";b.docked=false;b.isLeaf=this._nodeProperties.isParent?false:true;if(this._nodeProperties.menuEnabled){var c=YK.domBuilder.create({append:b,tag:"div","class":"yk_treeview_menu_image"})}this._initEvent(b)};this._resize=function(){var b=YK.Util.calculateTextWidth(this._nodeProperties.text)+18;this._container.style.width=b+"px"};this._initEvent=function(c){var b=this;YK.Event.addDomListener(c,"keyup",function(){YK.Event.triggerPublicListener("ecs_keypressed")});YK.Event.addDomListener(c,"click",function(d){if(!c.docked){b.emit("treemenu_docked",c);c.docked=true}else{b.emit("treemenu_undocked",c);c.docked=false}YK.Event.stopBubble(d)});YK.Event.addDomListener(c,"mousedown",function(d){YK.Event.stopBubble(d)})}};YK.TreeViewNodeBuilder.prototype=new YK.Object();YK.TreeViewNodeBuilder.prototype.constructor=YK.TreeViewNodeBuilder;gobject.signalNew("treemenu_docked",YK.TreeViewNodeBuilder,[],null,null);gobject.signalNew("treemenu_undocked",YK.TreeViewNodeBuilder,[],null,null);YK.TreeViewNodeHilighter=function(){this._hilightedNode=null;this._selectedNode=null;this.deHilightNode=function(){if(!this._hilightedNode.selected){YK.domBuilder.applyAttributes(this._hilightedNode,{backgroundColor:""})}};this.hilightNode=function(a){if(this._hilightedNode){if(!this._hilightedNode.selected){YK.domBuilder.applyAttributes(this._hilightedNode,{backgroundColor:""})}}if(a.selected){return}this._hilightedNode=a;YK.domBuilder.applyAttributes(this._hilightedNode,{backgroundColor:"#FFFFCC"})};this.hilightSelectedNode=function(a){if(this._selectedNode){YK.domBuilder.applyAttributes(this._selectedNode,{backgroundColor:""});this._selectedNode.selected=false}this._selectedNode=a;this._selectedNode.selected=true;YK.domBuilder.applyAttributes(this._selectedNode,{backgroundColor:"#FFFF66"})};this.hideMenus=function(a,d){for(var b=d.length;b--;){var c=d[b].lastChild;if(c!==a){c.docked=false;c.style.opacity=0}}};this.hideMenu=function(b){var a=b.lastChild;if(a.docked){return}this._menuNode.style.opacity=0};this.showMenu=function(a){this._menuNode=a.lastChild;this._menuNode.style.opacity=0.9}};YK.Dom=function(b,a){YK.Widget.apply(this);this.DOM_CLICKED="clicked";this.DOM_DOUBLECLICKED="doubleclicked";this.DOM_MOUSEOVER="mouseover";this.DOM_MOUSEUP="mouseup";this.DOM_MOUSEOUT="mouseout";this._width=this._minWidth=this._initWidth=b||16;this._height=this._minHeight=this._initHeight=a||16;this._dom=null;this._render=function(){var c=this._domObj;c.className+=" yk_dom";var d="DOM-"+YK.LibAdapter.getGUID();c.setAttribute("id",d)};this._render();this._initEvent()};YK.Dom.prototype=new YK.Widget();YK.Dom.prototype.constructor=YK.Dom;YK.Dom.prototype.appendChild=function(a){if(this._dom){this._domObj.replaceChild(a,this._dom)}else{this._domObj.appendChild(a)}this._dom=a;this._resetSize()};YK.Dom.prototype.setInnerHTML=function(b){var a=YK.domBuilder.create({tag:"div"});a.innerHTML=b;this.appendChild(a)};YK.Dom.prototype.getValue=function(){return this._dom.innerHTML};YK.Dom.prototype.getText=function(){return this._dom.textContent};YK.Dom.prototype._resetSize=function(){var a=this._getChildSize();this._minWidth=a[0];this._minHeight=a[1];this.resize(a[0],a[1])};YK.Dom.prototype._initEvent=function(){var a=this;var b=YK.Event;b.addDomListener(this._domObj,"click",function(c){a.emit("clicked",a.getValue())},false);b.addDomListener(this._domObj,"dblclick",function(c){a.emit("doubleclicked",a.getValue())},false);b.addDomListener(this._domObj,"mouseover",function(c){a.emit("mouseover",a.getValue())},false);b.addDomListener(this._domObj,"mouseout",function(c){a.emit("mouseout",a.getValue())},false);b.addDomListener(this._domObj,"mouseup",function(c){a.emit("mouseup",a.getValue())},false)};YK.Dom.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Dom.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._dom.style.width=a+"px"};YK.Dom.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";this._dom.style.height=a+"px"};YK.Dom.prototype.setAttribute=function(a){YK.domBuilder.applyAttributes(this._domObj,a)};YK.Dom.prototype._getChildSize=function(){var b=YK.Util;var c=this._dom.cloneNode(true);c.style.width=this._width+"px";var a=b.fullHeight(c)?b.fullHeight(c):this._height;return[this._width,a]};YK.Dom.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._resizeWidth(a)};YK.Dom.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this._resizeHeight(b)};gobject.signalNew("clicked",YK.Dom,null,null,[]);gobject.signalNew("doubleclicked",YK.Dom,null,null,[]);gobject.signalNew("mouseover",YK.Dom,null,null,[]);gobject.signalNew("mouseup",YK.Dom,null,null,[]);gobject.signalNew("mouseout",YK.Dom,null,null,[]);YK.Panel=function(b,a){YK.WindowBase.apply(this);this.PANEL_MINIMIZED="minimized";this.PANEL_MINIMIZEDPANEL_MOUSEOVERED="minimizedpanelmouseovered";this.PANEL_MINIMIZEDPANEL_MOUSEOUT="minimizedpanelmouseout";this.PANEL_RESTORED="restored";this.PANEL_CLOSED="closed";this._state=new YK.StatePanelRestored(this,null);this._width=this._minWidth=20;this._height=this._minHeight=20;this._title=b||"gtk Title";this._minimizedWidth=150;this._inconsWidth=58;this._minimizedIconsWidth=40;this._headerHeight=22;this._padding=a===undefined?10:a*2;this._bodyHeight=this._height-this._headerHeight;this._child=null;this._minimizedWindow=null;this._tooltip=null;this._render=function(){var d=YK.domBuilder;var c=this._domObj;c.className+=" yk_panel";c.style.position="absolute";c.style.zIndex=YK.PANEL_ZINDEX;this._titleDom.className+=" yk_none_selectable yk_panel_header_title";this._titleDom.innerHTML=this._title;this._bodyDom=YK.domBuilder.create({append:c,tag:"div",className:"yk_panel_body"})};this._render()};YK.Panel.prototype=new YK.WindowBase();YK.Panel.prototype.constructor=YK.Panel;YK.Panel.prototype.appendChild=function(a){if(this._child){this._flushChild()}this._child=a;this._child.setParent(this);this._positionChild(a.getNode());this.resizeHeight(this._height);this.resizeWidth(this._width)};YK.Panel.prototype.minimize=function(){this._state.minimize()};YK.Panel.prototype.maximize=function(){this._state.maximize()};YK.Panel.prototype.restore=function(){this._state.restore()};YK.Panel.prototype.setTopMost=function(a){if(a){this._domObj.style.zIndex=YK.PANEL_TOPMOST_ZINDEX}else{this._domObj.style.zIndex=YK.PANEL_ZINDEX}};YK.Panel.prototype.getChild=function(){return this._child};YK.Panel.prototype._isNodeExistInMinimizedHolder=function(c){var d=c.cloneNode(true);for(var b=0,a=d.childNodes.length;b<a;b++){if(this._domObj.id==d.childNodes[b].id){return true}}return false};YK.Panel.prototype._createMinimizedHolder=function(){var b="yk_minimized_widget_holder";var a=document.getElementById(b);if(!a){var a=YK.domBuilder.create({append:document.body,tag:"div",id:b})}return a};YK.Panel.prototype.setTitleJustify=function(a){this._headerDom.childNodes[0].style.textAlign=a};YK.Panel.prototype._isPanelRestored=function(a){if(!document.getElementById(a)){this._domObj.id=a;return true}return false};YK.Panel.prototype.getTitle=function(){return this._title};YK.Panel.prototype._positionChild=function(a){if(this._bodyDom.childNodes){this._bodyDom.innerHTML=""}this._bodyDom.appendChild(a);var b=a.style;b.left=this._padding/2+"px";b.top=this._padding/2+"px"};YK.Panel.prototype._flushChild=function(){this._bodyDom.removeChild(this._child.getNode());this._child=null};YK.Panel.prototype.setBoldTitle=function(a){if(a){this._titleDom.style.fontWeight="bold"}else{this._titleDom.style.fontWeight="normal"}};YK.Panel.prototype._resetTitle=function(a){this._titleDom.innerHTML=a};YK.Panel.prototype.setTitle=function(b,a){this._title=b;var a=a||1;this._titleDom.innerHTML=this._title};YK.Panel.prototype._resizeDomTitleWidth=function(a){this._titleDom.style.width=a+"px"};YK.Panel.prototype._createMinimizedWindow=function(){this._resizeDomTitleWidth(this._minimizedWidth-this._minimizedIconsWidth);var a=this._headerDom.cloneNode(true);a.className="yk_panel_minimize";a.removeAttribute("style");a.style.width=this._minimizedWidth+"px";a.id=this._domObj.id;a.style.zIndex=YK.PANEL_MINIMIZED_ZINDEX;return a};YK.Panel.prototype._getSubElementsHeight=function(){return this._headerHeight+this._subHeaderHeight+this._footerHeight};YK.Panel.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Panel.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=this._width-2+"px";this._titleDom.style.width=this._width-this._inconsWidth+"px";this._bodyDom.style.width=this._width-3+"px"};YK.Panel.prototype._resizeHeight=function(a){this._height=a;this._bodyHeight=this._height-this._headerHeight;this._domObj.style.height=this._height-2+"px";this._bodyDom.style.height=this._bodyHeight+"px"};YK.Panel.prototype.getBodyHeight=function(){return this._bodyHeight};YK.Panel.prototype.getMinWidth=function(){var a=this._child.getMinWidth()+this._padding;return a>this._minWidth?a:this._minWidth};YK.Panel.prototype.getMinHeight=function(){var a=this._child.getMinHeight()+this._headerHeight+this._padding;return a>this._minHeight?a:this._minHeight};YK.Panel.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._child.resizeWidth(a-this._padding);this._resizeWidth(a)};YK.Panel.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this._child.resizeHeight(b-this._padding-this._headerHeight);this._resizeHeight(b)};gobject.signalNew("minimized",YK.Panel,[],null,null);gobject.signalNew("minimizedpanelmouseovered",YK.Panel,[],null,null);gobject.signalNew("minimizedpanelmouseout",YK.Panel,[],null,null);gobject.signalNew("restored",YK.Panel,[],null,null);gobject.signalNew("closed",YK.Panel,[],null,null);YK.StatePanelMaximized=function(a,b){this._window=a;this._name=YK.PANEL_MAXIMIZED;this._preState=b};YK.StatePanelMaximized.prototype.restore=function(a){this._window.emit("restored",this._window);this._window._restore();this._window.resizeWidth(this._window._restoredOption.width);this._window.resizeHeight(this._window._restoredOption.height);this._window.move(this._window._restoredOption.left,this._window._restoredOption.top);this._window.showRestoredHeader();this._window.setState(new YK.StatePanelRestored(this._window,this));this._window.setTopMost(false)};YK.StatePanelMaximized.prototype.minimize=function(){this._window.emit("minimized",this._window);this._window._minimize();this._window.showMinimizedHeader();this._window.setState(new YK.StatePanelMinimized(this._window,this))};YK.StatePanelMaximized.prototype.maximize=function(){};YK.StatePanelMaximized.prototype._setRestoredOption=function(a){YK.StatePanelMaximized.restoredWidth=a.width;YK.StatePanelMaximized.restoredHeight=a.height;YK.StatePanelMaximized.restoredLeft=a.left;YK.StatePanelMaximized.restoredTop=a.top};YK.StatePanelMinimized=function(a,b){this._window=a;this._name=YK.PANEL_MINIMIZED;this._preState=b};YK.StatePanelMinimized.prototype.minimize=function(){};YK.StatePanelMinimized.prototype.maximize=function(){this._window.emit("maximized",this._window);this._window._maximize();this._window.setState(new YK.StatePanelMaximized(this._window,this));this._window.setTopMost(true)};YK.StatePanelMinimized.prototype.restore=function(){this._window._restore();if(this._window.getState()._preState._name===YK.PANEL_MAXIMIZED){this._window.emit("maximized",this._window);this._window.showMaximizedHeader();this._window.setState(new YK.StatePanelMaximized(this._window,this));this._window.setTopMost(true)}if(this._window.getState()._preState._name===YK.PANEL_RESTORED){this._window.emit("restored",this._window);this._window.showRestoredHeader();this._window.setState(new YK.StatePanelRestored(this._window,this));this._window.setTopMost(false)}};YK.StatePanelRestored=function(a,b){this._window=a;this._name=YK.PANEL_RESTORED;this._preState=b||this};YK.StatePanelRestored.prototype.restore=function(){};YK.StatePanelRestored.prototype.maximize=function(){this._window.emit("maximized",this._window);this._window.showMaximizedHeader();this._window._maximize();this._window.move(0,0);this._window.resizeWidth(window.innerWidth-3);this._window.resizeHeight(window.innerHeight-3);this._window.setState(new YK.StatePanelMaximized(this._window,this));this._window.setTopMost(true)};YK.StatePanelRestored.prototype.minimize=function(){this._window.emit("minimized",this._window);this._window._minimize();this._window.setState(new YK.StatePanelMinimized(this._window,this))};YK.Blank=function(){YK.Widget.apply(this);this.type=YK.BLANK_WIDGET;this._render=function(){this._domObj.className+=" yk_blank"};this._render();this.showLoading()};YK.Blank.prototype=new YK.Widget();YK.Blank.prototype.constructor=YK.Blank;YK.NoteBook=function(){YK.Widget.apply(this);this.NOTEBOOK_TABCHANGED="tabchanged";this._minWidth=200;this._minHeight=200;this._width=this._minWidth;this._height=this._minHeight;this._tabHeight=32;this._hBarHeight=3;this._loadingImgWidth=16;this._extraWidthRight=10;this._border=2;this._vspaceWidth=2;this._numberTabs=0;this._tabs=new YK.Tabs(this._width,this._tabHeight,this._vspaceWidth);var a=this._height-this._tabHeight-this._hBarHeight;this._contents=new YK.Contents(this._width,a);this._render=function(){this._domObj.className+=" yk_notebook";this._domObj.tabIndex="0";this._domObj.style.width=this._width+"px";this._domObj.style.height=this._height+"px";var b=YK.domBuilder.create({tag:"div",className:"yk_hbar"});this._appendChild(this._contents,this._tabs,b)};this._initEvent();this._render()};YK.NoteBook.prototype=new YK.Widget();YK.NoteBook.prototype.constructor=YK.NoteBook;YK.NoteBook.prototype._initEvent=function(){var a=this;this._tabs.connect("active",function(c){var b=a._contents.activateContent(c);a.emit("tabchanged",a.getActiveTab())});YK.Event.addDomListener(this._domObj,"focus",function(b){a._tabs._focus()});YK.Event.addDomListener(this._domObj,"blur",function(b){a._tabs._blur()});YK.Event.addPublicListener(this,"rightarrowkeypressed",function(c){if(!a._isTarget(c)){return}var b=a._tabs.getIndex(a._tabs._activeTab);if(b<a.getNumberTabs()-1){a._tabs._blur();a.setActiveTab(b+1)}a._domObj.focus()});YK.Event.addPublicListener(this,"leftarrowkeypressed",function(c){if(!a._isTarget(c)){return}var b=a._tabs.getIndex(a._tabs._activeTab);if(b>0){a._tabs._blur();a.setActiveTab(b-1)}a._domObj.focus()})};YK.NoteBook.prototype.setBorderVisible=function(a){if(a){this._contents.showBorder()}else{this._contents.hideBorder()}};YK.NoteBook.prototype.updatePage=function(a){var b=this._tabs.getIndex(a.tab);this._contents.updateContent(a.content,b);this._contents.activate(b);this.resizeWidth(this._width);this.resizeHeight(this._height);return{tab:a.tab,content:a.content,isBlanked:a.content["type"]===YK.BLANK_WIDGET?true:false}};YK.NoteBook.prototype.appendPage=function(a,b){b.content=b.content||new YK.Blank();var c=new UUID();a.id=c;b.id=c;this._contents.addChild(b);this._tabs.addTab(a);this._tabs.activateDefault();this._contents.activateDefault();this.resizeWidth(this._width);this.resizeHeight(this._height);return{tab:a.tab,content:b.content,isBlanked:b.content["type"]===YK.BLANK_WIDGET?true:false}};YK.NoteBook.prototype.insertAt=function(a,c,b){c.content=c.content||new YK.Blank();var d=new UUID();a.id=d;c.id=d;this._contents.insertAt(c,b);this._tabs.insertAt(a,b);this.resizeWidth(this._width);this.resizeHeight(this._height);return{tab:a.tab,content:c.content,isBlanked:c.content["type"]===YK.BLANK_WIDGET?true:false}};YK.NoteBook.prototype.removeTab=function(b){var a=this._tabs.getChildren().length;if(a==1){YK.Util.debug("The tab can not be removed")}if(b<0||b>=a){YK.Util.debug("The index out of range")}this._tabs.removeTab(b);this._contents.removeChild(b);if(b===0){this._activatePreviousTab(b+1)}if(this._tabs.getActiveTab()===this._tabs.getChildren()[b]){this._activatePreviousTab(b)}else{this._activateActiveTab()}};YK.NoteBook.prototype.setTabindex=function(a){this._tabs.getNode().tabIndex=a};YK.NoteBook.prototype.setTitle=function(){};YK.NoteBook.prototype.getNumberTabs=function(){return this._tabs._tabs.length};YK.NoteBook.prototype.showLoading=function(a){this._tabs.showLoading(a.tab)};YK.NoteBook.prototype.hideLoading=function(a){this._tabs.hideLoading(a.tab)};YK.NoteBook.prototype._isTarget=function(b){if(b===this){return true}var a=b.getParent();while(a){if(a===this._contents){return true}a=a.getParent()}return false};YK.NoteBook.prototype._activateActiveTab=function(){this._tabs.activateByObject(this._tabs.getActiveTab());this._contents.activateByObject(this._contents.getActiveContent())};YK.NoteBook.prototype._activatePreviousTab=function(a){this._tabs.activate(a-1);this._contents.activate(a-1)};YK.NoteBook.prototype.setActiveTabByTab=function(b){var a=this._tabs.getIndex(b);this.setActiveTab(a)};YK.NoteBook.prototype.setActiveTab=function(a){this._tabs.activate(a);this._contents.activate(a);this.emit("tabchanged",this.getActiveTab())};YK.NoteBook.prototype.setFocusTab=function(a){this._tabs.focus(a)};YK.NoteBook.prototype.getTabs=function(){var c=[];for(var b=0,a=this._tabs.getChildren().length;b<a;b++){c.push({tab:this._tabs.getChildren()[b]["tab"],content:this._contents.getChildren()[b]["content"],isBlanked:this._contents.getChildren()[b]["content"].type===YK.BLANK_WIDGET?true:false})}return c};YK.NoteBook.prototype.getActiveTab=function(){return{tab:this._tabs.getActiveTab(),content:this._contents.getActiveContent(),isBlanked:this._contents.getActiveContent().type===YK.BLANK_WIDGET?true:false}};YK.NoteBook.prototype._appendChild=function(b,a,c){this._domObj.appendChild(a._domObj);this._domObj.appendChild(c);this._domObj.appendChild(b._domObj)};YK.NoteBook.prototype._resizeHeight=function(a){this._domObj.style.height=a-this._border+"px";this._height=a};YK.NoteBook.prototype._resizeWidth=function(a){this._domObj.style.width=a-this._border+"px";this._width=a};YK.NoteBook.prototype._getLoadingImgWidths=function(){var c=this._tabs.getChildren();var d=0;for(var b=0,a=c.length;b<a;b++){pageObj=c[b];d+=pageObj.padding>this._loadingImgWidth?pageObj.padding:this._loadingImgWidth}return d};YK.NoteBook.prototype.getMinWidth=function(){var b=this._minWidth;var a=this._tabs.getMinWidth();var c=this._contents.getMinWidth();if(a>b){b=a}if(c>b){b=c}return b+this._extraWidthRight+this._getLoadingImgWidths()};YK.NoteBook.prototype.getMinHeight=function(){var a=this._minHeight-this._tabs.getHeight();var b=this._contents.getMinHeight();if(b>a){a=b}return a+this._tabs.getHeight()};YK.NoteBook.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this._contents.resizeHeight(b-this._tabs.getHeight()-this._border);this._resizeHeight(b)};YK.NoteBook.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._tabs.resizeWidth(a-1);this._contents.resizeWidth(a-this._border);this._resizeWidth(a)};gobject.signalNew("tabchanged",YK.NoteBook,[],null,null);YK.Tabs=function(c,a,b){YK.Widget.apply(this);this._children=[];this._width=c;this._height=a;this._vspaceWidth=b;this._activeTabDom=null;this._activeTab="";this._border=2;this._loadingImgWidth=16;this._tabs=[];this._activeTabId=null;this._tabId=0;this.TABS_ACTIVE="";this._render=function(){this._domObj.className+=" yk_tabs";this._domObj.style.width=this._width+"px";this._domObj.style.height=this._height+"px"};this._render()};YK.Tabs.prototype=new YK.Widget();YK.Tabs.prototype.constructor=YK.Tabs;YK.Tabs.prototype.showLoading=function(d){var b=this._getPage(d);var f=d.getNode().parentNode.parentNode;var h=f.lastChild;var a=f.firstChild;if(YK.domBuilder.isShowed(h)){return}var g=this._loadingImgWidth>b.padding/2?this._loadingImgWidth:0;var c=parseInt(f.style.width);f.style.width=c+g+"px";a.style.width=c+g+"px";h.style.left=b.padding/2+d.getMinWidth()+"px";YK.domBuilder.showElement(h)};YK.Tabs.prototype.hideLoading=function(d){var b=this._getPage(d);var f=d.getNode().parentNode.parentNode;var h=f.lastChild;var a=f.firstChild;if(!YK.domBuilder.isShowed(h)){return}var g=this._loadingImgWidth>b.padding/2?this._loadingImgWidth:0;var c=parseInt(f.style.width);f.style.width=c-g+"px";a.style.width=c-g+"px";YK.domBuilder.hideElement(h)};YK.Tabs.prototype.activateDefault=function(){this.activate(0)};YK.Tabs.prototype._deactivateTab=function(){this._blur();this._activeTabDom.className="yk_page";var a=parseInt(this._activeTabDom.style.width);this._activeTabDom.firstChild.firstChild.style.width=a+"px";YK.domBuilder.applyAttributes(this._activeTabDom.firstChild,{borderBottom:"1px solid #D5D5D5"})};YK.Tabs.prototype._activeateTab=function(a){this._activeTabDom=this._children[a]["tab"].getNode().parentNode.parentNode;this._activeTabDom.className="tab_active";var b=parseInt(this._activeTabDom.style.width);this._activeTabDom.firstChild.firstChild.style.width=b+"px";this._activeTab=this._children[a]["tab"];this._activeTabId=this._children[a]["id"];YK.domBuilder.applyAttributes(this._activeTabDom.firstChild,{borderBottom:"0px"})};YK.Tabs.prototype.activate=function(a){if(this._activeTabDom){this._deactivateTab()}this._activeateTab(a)};YK.Tabs.prototype.activateByObject=function(b){for(var c=0,a=this._children.length;c<a;c++){if(this._children[c]["tab"]===b){break}}this.activate(c)};YK.Tabs.prototype.getIndex=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["tab"]===c){return b}}};YK.Tabs.prototype.addTab=function(a){a.padding=a.padding||0;this._children.push(a);this._domObj.appendChild(this._createPage(a));this._domObj.appendChild(this._createVerticalSpace())};YK.Tabs.prototype.insertAt=function(b,c){this._children.splice(c,0,b);var d=this._domObj.childNodes[c*2];var a=this._createVerticalSpace();this._domObj.insertBefore(a,d);this._domObj.insertBefore(this._createPage(b),a)};YK.Tabs.prototype.removeTab=function(b){YK.Util.removeArrayElements(this._children,b);var a=b*2;this._domObj.removeChild(this._domObj.childNodes[a]);this._domObj.removeChild(this._domObj.childNodes[a])};YK.Tabs.prototype._resizePage=function(b,d,g){var a=b.tab;var f=a.getSize();d.style.width=f[0]+this._border+b.padding+5+"px";d.style.height=f[1]+12+"px";YK.Util.detect.init();if(YK.Util.detect.OS==="Windows"){d.style.top=6+"px"}else{d.style.top=5+"px"}g.style.width=f[0]+this._border+b.padding+5+"px";g.style.height=f[1]+11+"px";var c=a.getNode();c.firstChild.firstChild.firstChild.style.textAlign="center";c.style.width=f[0]+this._border+b.padding+ +5+"px"};YK.Tabs.prototype._createPage=function(a){var b=YK.domBuilder.create({tag:"div","class":"yk_page",id:"yk_page_"+this._tabId+"_"+this._id});this._tabId+=1;this._tabs.push(b);var c=YK.domBuilder.create({append:b,tag:"div","class":"yk_tabs_wrapper"});c.appendChild(a.tab.getNode());var d=YK.domBuilder.create({append:b,tag:"div","class":"yk_page_loading_img"});YK.domBuilder.hideElement(d);this._resizePage(a,b,c);this._initPageEvents(b,a);return b};YK.Tabs.prototype._initPageEvents=function(c,a){var b=this;YK.Event.addDomListener(c,"mousedown",function(d){if(b._activeTabDom===c){return}if(b._activeTabDom){b._deactivateTab()}b._activeateTab(b.getIndex(a.tab));b.emit("active",a.id)})};YK.Tabs.prototype._focus=function(){this._activeTab.setAttribute({border:"1px dotted black"});var a=parseInt(this._activeTabDom.style.width);this._activeTabDom.firstChild.firstChild.style.width=a+"px"};YK.Tabs.prototype._blur=function(){this._activeTab.setAttribute({border:""});var a=parseInt(this._activeTabDom.style.width);this._activeTabDom.firstChild.firstChild.style.width=a+"px"};YK.Tabs.prototype._createVerticalSpace=function(){var a=YK.domBuilder.create({tag:"div","class":"yk_vspace"});a.style.width=this._vspaceWidth+"px";a.style.height="100%";return a};YK.Tabs.prototype.getActiveTab=function(){return this._activeTab};YK.Tabs.prototype.getActiveTabId=function(){return this._activeTabId};YK.Tabs.prototype.getChildren=function(){return this._children};YK.Tabs.prototype._getPage=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["tab"]===c){return this._children[b]}}};YK.Tabs.prototype.getMinWidth=function(){var b=this._children;if(b.length>0){var c=0;for(var a=b.length;a--;){c+=b[a]["tab"].getMinWidth()+this._border+b[a]["padding"]}var d=this._children.length*(this._border+this._vspaceWidth);this._minWidth=c+d;return this._minWidth}};YK.Tabs.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._resizeWidth(a)};gobject.signalNew("active",YK.Tabs,[],null,null);YK.Contents=function(b,a){YK.Widget.apply(this);this._width=b;this._height=a;this._children=[];this._activeContent=null;this._render=function(){this._domObj.className+=" yk_contents";this._domObj.style.width=this._width+"px";this._domObj.style.height=this._height+"px"};this._render()};YK.Contents.prototype=new YK.Widget();YK.Contents.prototype.constructor=YK.Contents;YK.Contents.prototype.hideBorder=function(){this._domObj.style.border="0px"};YK.Contents.prototype.showBorder=function(){var a=this._domObj.style;a.borderBottom="1px solid #EFC169";a.borderLeft="1px solid #EFC169";a.borderRight="1px solid #EFC169"};YK.Contents.prototype.activateDefault=function(){this._activeContent=this._children[0]["content"];this._domObj.appendChild(this._activeContent.getNode())};YK.Contents.prototype._triggerDeactivateEvent=function(){YK.Event.triggerPublicListener("deactivated")};YK.Contents.prototype.activate=function(a){var b=this._children[a]["content"];this._domObj.innerHTML="";this._domObj.appendChild(b.getNode());this._activeContent=b;this._triggerDeactivateEvent();return b};YK.Contents.prototype.activateByObject=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["content"]===c){break}}this.activate(b);this._triggerDeactivateEvent()};YK.Contents.prototype.activateContent=function(c){var b;for(var a=this._children.length;a--;){b=this._children[a]["content"];if(c===this._children[a]["id"]){break}}this._domObj.innerHTML="";this._domObj.appendChild(b._domObj);this._activeContent=b;this._triggerDeactivateEvent();return b};YK.Contents.prototype.getActiveContent=function(){return this._activeContent};YK.Contents.prototype.updateContent=function(b,a){this._children[a]["content"]=b;b.setParent(this)};YK.Contents.prototype.addChild=function(a){a.padding=a.padding===undefined||a.padding===null?1:a.padding;a.content.setParent(this);this._children.push(a)};YK.Contents.prototype.insertAt=function(b,a){this._children.splice(a,0,b)};YK.Contents.prototype.removeChild=function(a){YK.Util.removeArrayElements(this._children,a);this._domObj.removeChild(this._domObj.childNodes[0])};YK.Contents.prototype.getChildren=function(){return this._children};YK.Contents.prototype._resizeChildrenHeight=function(c){for(var f=0,b=this._children.length;f<b;f++){var d=this._children[f]["content"];var g=this._children[f]["padding"];var a=c-g*2;d.resizeHeight(a);d.getNode().style.top=g+"px"}};YK.Contents.prototype._resizeChildrenWidth=function(d){for(var c=this._children.length;c--;){var b=this._children[c]["content"];var f=this._children[c]["padding"];var a=d-f*2;b.resizeWidth(a);b.getNode().style.left=f+"px"}};YK.Contents.prototype.getMinWidth=function(){var b=this._children;var d=this._minWidth;for(var a=b.length;a--;){var c=b[a]["content"].getMinWidth()+b[a]["padding"]*2;if(c>d&c!=undefined){d=c}}this._minWidth=d;return this._minWidth};YK.Contents.prototype.getMinHeight=function(){var c=this._children;var d=this._minHeight;for(var b=c.length;b--;){var a=c[b]["content"].getMinHeight()+c[b]["padding"]*2;if(a>d&a!=undefined){d=a}}this._minHeight=d;return this._minHeight};YK.Contents.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._resizeWidth(a);this._resizeChildrenWidth(a)};YK.Contents.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this._resizeHeight(b);this._resizeChildrenHeight(b)};YK.ComboBoxMediator=function(a){YK.DropDownMediator.apply(this,[a])};YK.ComboBoxMediator.prototype=new YK.DropDownMediator();YK.ComboBoxMediator.prototype.constructor=YK.ComboBoxMediator;YK.ComboBoxMediator.prototype.dropDownDeHilightSelectedRow=function(){this._dropDownRendere.deHilightSelectedRow()};YK.ComboBox=function(){YK.Widget.apply(this);this.COMBOBOX_CLICKED="clicked";this.COMBOBOX_CHANGED="changed";this._minWidth=this._width=150;this._minHeight=this._height=30;this._isToogled=false;this._vBarWidth=25;this._isDropDownCreated=false;this._selectedItem;this._scrolledHost=YK.NullScrollerHostObj;this._className=this._domObj.className+" yk_combobox";this._render=function(){this._domObj.className=this._className;this._domObj.tabIndex="0";this._domObj.setAttribute("id","yk_combobox_"+this._id);if(YK.Util.detect.version<3.6){this._gradient=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_combobox_gradient"})}this._entryHolder=YK.domBuilder.create({tag:"div",append:this._domObj,className:"yk_combobox_input_holder"});this._entry=YK.domBuilder.create({tag:"input",append:this._entryHolder,className:"yk_combobox_input"});this._activeLayer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_combobox_active_layer"});this._labelContainer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_combobox_label_container"});var b=YK.domBuilder.create({append:this._labelContainer,tag:"table"});var c=YK.domBuilder.create({append:b,tag:"tr"});var d=YK.domBuilder.create({append:c,tag:"td"});this._labelDom=YK.domBuilder.create({append:d,text:"- Please Select -",tag:"div","class":"yk_combobox_label"});var a=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_combobox_image_container"});a.style.width=this._vBarWidth+"px";var b=YK.domBuilder.create({append:a,tag:"table"});var c=YK.domBuilder.create({append:b,tag:"tr"});var d=YK.domBuilder.create({append:c,tag:"td"});YK.domBuilder.create({append:d,tag:"div","class":"yk_combobox_image"})};this._render();YK.ComboBoxEvent.initEvent(this);this._comboBoxMediator=new YK.ComboBoxMediator(this);this._controller=new YK.ComboBoxController(this)};YK.ComboBox.prototype=new YK.Widget();YK.ComboBox.prototype.constructor=YK.ComboBox;YK.ComboBox.prototype.setModel=function(a){this._controller.setModel(a)};YK.ComboBox.prototype.enable=function(){this._domObj.className=this._className;this._addHandlers()};YK.ComboBox.prototype.disable=function(){this._domObj.className+=" yk_combobox_disabled";this._removeHandlers()};YK.ComboBox.prototype.setSelectedItemBy=function(b,a){if(a){this.emit("_valueMembersearched",b,a)}};YK.ComboBox.prototype.getSelectedItem=function(){return this._selectedItem};YK.ComboBox.prototype._addEventMouseWheel=function(b){var a=this;YK.Event.addDomListener(b,"scroll",function(c){a._deactivate()},false)};YK.ComboBox.prototype.showError=function(a){this._showError=(typeof a!=="undefined"&&typeof a==="boolean")?a:true;if(this._showError){this._domObj.className+=" yk_combobox_on_error"}else{this._domObj.className="yk_widget yk_combobox"}};YK.ComboBox.prototype.getActiveText=function(){return this._labelDom.innerHTML};YK.ComboBox.prototype.setDefaultText=function(){this._labelDom.innerHTML="- Please Select -";this._selectedItem=null};YK.ComboBox.prototype.refresh=function(){this._isDropDownCreated=false;this._deactivate();this._clearDropDown();this._labelDom.innerHTML="- Please Select -"};YK.ComboBox.prototype._setSelectedItem=function(a){this._labelDom.innerHTML=a.display;if(this._selectedItem===a){return}this._selectedItem=a;this.emit("changed",a)};YK.ComboBox.prototype._renderDropDown=function(b,a){this._hideLoading();var c=this._comboBoxMediator.dropDownConstruct(b,a);this._isDropDownCreated=true};YK.ComboBox.prototype.renderDropDownSubRowNodes=function(b,a){this.emit("_rendersubnodes",b,a)};YK.ComboBox.prototype._clearDropDown=function(){this._comboBoxMediator.dropDownClear()};YK.ComboBox.prototype.handleRowNodeSelection=function(){var a=this._comboBoxMediator.dropDownGetSelectedRow();this.emit("_itemselected",a.modelId);this._deactivate()};YK.ComboBox.prototype._handleStartTextSearch=function(b){var a=b[b.length-1];this.emit("_search",a);this._entry.value=a};YK.ComboBox.prototype._handleFullTextSearch=function(a){this.emit("_search",a)};YK.ComboBox.prototype._handleButtonClicked=function(){if(this._isToogled){this._deactivate()}else{this._activate()}if(!this._isDropDownCreated){this.emit("clicked");this._showLoading()}};YK.ComboBox.prototype._compareText=function(d,c){var b=new RegExp("^"+c.toLowerCase());var a=d.toLowerCase().match(b);return a};YK.ComboBox.prototype._hilightRow=function(a){this._comboBoxMediator.dropDownHilightRowById(a)};YK.ComboBox.prototype.setFocus=function(){this._comboBoxMediator.dropDownDeHilightSelectedRow();this._entry.focus()};YK.ComboBox.prototype.lostFocus=function(){this._entry.blur()};YK.ComboBox.prototype._showLoading=function(){this._comboBoxMediator.dropDownShowLoading()};YK.ComboBox.prototype._hideLoading=function(){this._comboBoxMediator.dropDownHideLoading()};YK.ComboBox.prototype._setPosition=function(){var d=YK.Util.pageY(this._domObj);var c=YK.Util.pageX(this._domObj);var g=parseInt(this._domObj.style.height);var b=this._getNearestScrollerY();var a=c+1,f=d+g+3-b;this._comboBoxMediator.dropDownPosition(a,f)};YK.ComboBox.prototype._getNearestScrollerY=function(){var b=0;var a=this._domObj.parentNode;if(a!==null){while(a.parentNode!==null){if(this._scrolledHost.getNode()===a){b=a.scrollTop;break}a=a.parentNode}}return b};YK.ComboBox.prototype._activate=function(){this.setFocus();this._comboBoxMediator.dropDownShow();YK.domBuilder.showElement(this._activeLayer);this._setPosition();this._isToogled=true};YK.ComboBox.prototype._deactivate=function(){this.lostFocus();this._comboBoxMediator.dropDownHide();YK.domBuilder.hideElement(this._activeLayer);this._isToogled=false};YK.ComboBox.prototype.resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._labelContainer.style.width=a-this._vBarWidth-9+"px";this._comboBoxMediator.dropDownResizeWidth(a)};YK.ComboBox.prototype.resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px"};gobject.signalNew("_rendersubnodes",YK.ComboBox,null,null,[]);gobject.signalNew("_setselectedvalues",YK.ComboBox,null,null,[]);gobject.signalNew("_search",YK.ComboBox,null,null,[]);gobject.signalNew("_itemselected",YK.ComboBox,null,null,[]);gobject.signalNew("_valueMembersearched",YK.ComboBox,null,null,[]);gobject.signalNew("changed",YK.ComboBox,null,null,[]);gobject.signalNew("clicked",YK.ComboBox,null,null,[]);YK.NullScrollerHostObj=YK.NullObjectBuilder.build(new YK.Widget());YK.NullScrollerHostObj.getNode=function(){return YK.domBuilder.create({tag:"div"})};YK.ComboBoxEvent={initEvent:function(a){var c=false;var b=YK.Event;b.addPublicListener(a,"scrolled",function(d){a._scrolledHost=d});b.addPublicListener(a,"deactivated",function(){a._deactivate()});b.removeListener(a._mousdownedHandler);b.addPublicListener(a,"mousedowned",function(){a._deactivate()});a._handlers.push(b.addDomListener(a._domObj,"click",function(d){a._handleButtonClicked();b.stopBubble(d);b.stopDefault(d)}));a._handlers.push(b.addDomListener(a._domObj,"keyup",function(d){if(d.keyCode===YK.ENTER_KEY){a._handleButtonClicked()}}));a._handlers.push(b.addDomListener(a._domObj,"mousedown",function(){this.style.border="";c=true}));a._handlers.push(b.addDomListener(a._domObj,"mouseup",function(){this.style.border="";c=false}));a._handlers.push(b.addDomListener(a._domObj,"focus",function(d){if(!c){this.style.border="1px dashed gray"}}));a._handlers.push(b.addDomListener(a._domObj,"blur",function(d){this.style.border=""}));this.bindInputEvent(a)},bindInputEvent:function(a){var b=YK.Event;var c;b.addDomListener(a._entry,"keydown",function(d){switch(d.keyCode){case YK.DOWN_ARROW_KEY:a._comboBoxMediator.keyControllFireDownArrowKey();return;case YK.UP_ARROW_KEY:a._comboBoxMediator.keyControllFireUpArrowKey();return;case YK.ENTER_KEY:a._comboBoxMediator.keyControllFireEnterKey();return;case YK.TAB_KEY:a._comboBoxMediator.keyControllFireEnterKey();YK.Event.stopDefault(d);return}if(a._entry.value){clearTimeout(c);c=setTimeout(function(){var h=a._entry.value;a._handleFullTextSearch(h);var f=a._comboBoxMediator.dropDownGetSelectedRow();if(f){var g=a._compareText(f.innerHTML,h);if(!g){a._handleStartTextSearch(h)}}else{a._handleStartTextSearch(h)}},5)}})}};YK.ComboBoxController=function(a){this._model=null;var b=this;this._render=function(d,c){var f=this.__mashupModel(d.getChildren());a._renderDropDown(f,c)};a.connect("_rendersubnodes",function(d,c){var f=b._model.getChildByPath(d);b._render(f,c)});a.connect("_search",function(d){var c=b._model.search(d);var f=c?c.getPath():"";a._hilightRow(f)});a.connect("_itemselected",function(c){var d=b._model.getChildByPath(c);a._setSelectedItem(d.getValue())});a.connect("_valueMembersearched",function(f,c){var d=b._model._searchByValueMember(f,c);if(d===undefined){return}a._setSelectedItem(d.getValue())})};YK.ComboBoxController.prototype.setModel=function(a){this._model=a;this._render(this._model,null)};YK.ComboBoxController.prototype.__mashupModel=function(b){var g=[],d,f;for(var c=0,a=b.length;c<a;c++){d=b[c];f=d.getChildren().length>0;g.push({display:d.getValue()["display"],hasChildNodes:f,path:d.getPath(),valueObject:d.getValue()})}return g};YK.TextView=function(){YK.Widget.apply(this);this.TEXTVIEW_FOCUSED="focused";this.TEXTVIEW_BLURRED="blurred";this.TEXTVIEW_ENTERKEYPRESSED="enterkeypressed";this._editable=true;this._justification="left";this._showError=false;this._minWidth=this._width=100;this._minHeight=this._height=50;this._render=function(){var a=this._domObj.className;this._domObj=YK.domBuilder.create({tag:"textarea"});this._domObj.className=a+" yk_text_view";this._domObj.id="yk_text_view_"+this._id};this._render();this._initEvent()};YK.TextView.prototype=new YK.Widget();YK.TextView.prototype.constructor=YK.TextView;YK.TextView.prototype._initEvent=function(){var a=this;var b=YK.Event;b.addDomListener(this._domObj,"focus",function(){a.emit("focused")});b.addDomListener(this._domObj,"blur",function(){a.emit("blurred")});b.addDomListener(this._domObj,"keyup",function(){a.emit("changed")})};YK.TextView.prototype.setEditable=function(a){this._editable=a;a?this._domObj.removeAttribute("readonly"):this._domObj.setAttribute("readonly","readonly")};YK.TextView.prototype.showError=function(a){this._showError=(typeof a!=="undefined"&&typeof a==="boolean")?a:true;if(this._showError){this._domObj.className+=" yk_text_view_onerror"}else{this._domObj.className="yk_widget yk_container yk_text_view"}};YK.TextView.prototype.getEditable=function(){return this._editable};YK.TextView.prototype.setJustification=function(a){this._justification=a;this._domObj.style.textAlign=a};YK.TextView.prototype.getJustification=function(){return this._justification};YK.TextView.prototype.getValue=function(){return YK.Util.trim(this._domObj.value)};YK.TextView.prototype.setValue=function(a){this._domObj.value=a};YK.TextView.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.TextView.prototype.allowEnterKey=function(){var a=this;YK.Event.addDomListener(this._domObj,"keyup",function(b){if(b.keyCode==YK.ENTER_KEY){a.emit("enterkeypressed",a._domObj.value);YK.Event.stopDefault(b)}a.emit("keypressed",a._domObj.value)})};YK.TextView.prototype.setFocus=function(){this._domObj.focus()};YK.TextView.prototype.focus=function(){this._domObj.focus()};YK.TextView.prototype._resizeWidth=function(a){this._domObj.style.width=a+"px";this._width=a};YK.TextView.prototype._resizeHeight=function(a){this._domObj.style.height=a-4+"px";this._height=a};YK.TextView.prototype.resizeWidth=function(a){this.setWidth(a);this.resize(this._width,this._height)};YK.TextView.prototype.resizeHeight=function(a){this.setHeight(a);this.resize(this._width,this._height)};gobject.signalNew("focused",YK.TextView,null,null,[]);gobject.signalNew("blurred",YK.TextView,null,null,[]);gobject.signalNew("changed",YK.TextView,null,null,[]);gobject.signalNew("enterkeypressed",YK.TextView,null,null,[]);gobject.signalNew("keypressed",YK.TextView,null,null,[]);YK.TableFactory=function(d,a,b,c,f){return b?new YK.TableHomogenoues(d,a,c,f):new YK.TableNoneHomogenoues(d,a,c,f)};YK.TableBase=function(c,a,b,d){YK.Widget.apply(this);this._resizeable=b===undefined?false:b;this._rows=c||0;this._columns=a||0;this._spacing=d||0;this._width=this._minWidth=10;this._height=this._minHeight=10;this._maxChildWidth=this._width/this._columns;this._maxChildHeight=this._height/this._rows;this._widths=new Array(this._columns);this._heights=new Array(this._rows);this._render=function(){var f=this._domObj;f.className+=" yk_table";f.style.width=this._width+"px";f.style.height=this._height+"px";f.style.position="relative"};this._render();this._initEvent()};YK.TableBase.prototype=new YK.Widget();YK.TableBase.prototype.constructor=YK.TableBase;YK.TableBase.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"click",function(b){a.emit("clicked")},false)};YK.TableBase.prototype.getChildren=function(){return this._children};YK.TableBase.prototype._initWidthsHeights=function(){for(var b=0,a=this._widths.length;b<a;b++){this._widths[b]={width:this._maxChildWidth+this._spacing,resizeable:true}}for(var b=0,a=this._heights.length;b<a;b++){this._heights[b]={height:this._maxChildHeight+this._spacing,resizeable:true}}};YK.TableBase.prototype._resetWidths=function(k,h,f,b){var g=0;for(var d=h;d<f;d++){g+=this._widths[d]["width"]}var a=k.getMinWidth()+this._spacing;var c=(g<a?a:g);offsetWidth=(c-g)/(f-h);for(var d=h;d<f;d++){this._widths[d]["width"]+=offsetWidth;this._widths[d]["resizeable"]=b.resizeable===undefined?true:b.resizeable}};YK.TableBase.prototype._resetHeights=function(k,h,d,c){var b=0;for(var g=h;g<d;g++){b+=this._heights[g]["height"]}var a=k.getMinHeight()+this._spacing;var f=(b<a?a:b);offsetHeight=(f-b)/(d-h);for(var g=h;g<d;g++){this._heights[g]["height"]+=offsetHeight;this._heights[g]["resizeable"]=c.resizeable===undefined?true:c.resizeable}};YK.TableBase.prototype._initChildren=function(h,f){var d=new Array(f);for(var c=0,a=this._columns;c<a;c++){d[c]=new Array(h)}for(var c=0,a=this._columns;c<a;c++){for(var b=0,g=this._rows;b<g;b++){d[c][b]={widget:null,minWidth:null,minHeight:null,width:null,height:null,xoptions:null,yoptions:null,xpadding:null,ypadding:null,xcells:null,ycells:null,left:null,right:null,top:null,bottom:null}}}return d};YK.TableBase.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.TableBase.prototype._getWidths=function(){var b=0;for(var a=0;a<this._columns;a++){b+=this._widths[a]["width"]}return b};YK.TableBase.prototype._getHeights=function(){var a=0;for(var b=0;b<this._rows;b++){a+=this._heights[b]["height"]}return a};YK.TableBase.prototype._getResizeableColumns=function(){var b=0;for(var a=this._widths.length;a--;){if(this._widths[a]["resizeable"]){b+=1}}return b};YK.TableBase.prototype._getResizeableRows=function(){var b=0;for(var a=this._heights.length;a--;){if(this._heights[a]["resizeable"]){b+=1}}return b};gobject.signalNew("clicked",YK.TableBase,null,null,[]);YK.TableHomogenoues=function(c,a,b,d){YK.TableBase.call(this,c,a,b,d);this._render=function(){var f=this._domObj;f.className+=" yk_table_homogenouse";this._children=this._initChildren(this._rows,this._columns);this._initWidthsHeights()};this._render()};YK.TableHomogenoues.prototype=new YK.TableBase();YK.TableHomogenoues.prototype.constructor=YK.TableHomogenoues;YK.TableHomogenoues.prototype.attach=function(c,f,p,n,b,g,d,k,q){var m=1;for(var l=f+1;l<p;l++){this._children[l][n].minWidth=c.getMinWidth();this._children[l][n].minHeight=c.getMinHeight();m+=1}if(f+1<p){for(var l=f;l<p;l++){var a=1;for(var h=n+1;h<b;h++){this._children[l][h].minWidth=c.getMinWidth();this._children[l][h].minHeight=c.getMinHeight();a+=1}}}else{var a=1;for(var l=n+1;l<b;l++){this._children[f][l].minWidth=c.getMinWidth();this._children[f][l].minHeight=c.getMinHeight();a+=1}}var o=this._children[f][n];o.widget=c;o.xoptions=g;o.yoptions=d;o.xpadding=k;o.ypadding=q;o.xcells=m;o.ycells=a;o.left=f;o.right=p;o.top=n;o.bottom=b;o.minWidth=c.getMinWidth();o.minHeight=c.getMinHeight();this._setMaxChildWidthHeightHomo(o);this._placeChildrenHomo(this._maxChildWidth,this._maxChildHeight);this.resize(this._maxChildWidth*this._columns,this._maxChildHeight*this._rows)};YK.TableHomogenoues.prototype._placeChildrenHomo=function(m,d){var c=this._children;this._domObj.innerHTML="";var k=document.createDocumentFragment();for(var h=0;h<this._columns;h++){for(var g=0;g<this._rows;g++){var b=c[h][g];if(b.widget){var f=YK.domBuilder.create({append:k,tag:"div",style:"position: absolute;"});f.style.width=m*b.xcells+"px";f.style.height=d*b.ycells+"px";f.style.top=b.top*d+"px";f.style.left=b.left*m+"px";f.appendChild(b.widget.getNode());var a=this._positionWidgetByXoptionsHomo(b,m);var l=this._positionWidgetByYoptionsHomo(b,d);b.widget.resizeWidth(a-2);b.widget.resizeHeight(l-2)}}}this._domObj.appendChild(k)};YK.TableHomogenoues.prototype._positionWidgetByYoptionsHomo=function(f,b){var a;var d=f.bottom===this._rows?0:this._spacing;if(f.yoptions.fill){f.widget.getNode().style.top=f.ypadding+"px";a=b*f.ycells-f.ypadding*2-d}else{var c;a=f.widget.getMinHeight();switch(f.yoptions.align){case YK.JUSTIFY_TOP:f.widget.getNode().style.top=f.ypadding+"px";break;case YK.JUSTIFY_BOTTOM:c=(b*f.ycells)-(a+f.ypadding);f.widget.getNode().style.top=c+"px";break;case YK.JUSTIFY_CENTER:c=((b*f.ycells)/2)-(a/2);f.widget.getNode().style.top=c+"px";break}}return a};YK.TableHomogenoues.prototype._positionWidgetByXoptionsHomo=function(f,a){var b;var d=f.right===this._columns?0:this._spacing;if(f.xoptions.fill){f.widget.getNode().style.left=f.xpadding+"px";b=a*f.xcells-f.xpadding*2-d}else{var c;b=f.widget.getMinWidth();switch(f.xoptions.align){case YK.JUSTIFY_LEFT:f.widget.getNode().style.left=f.xpadding+"px";break;case YK.JUSTIFY_RIGHT:c=(a*f.xcells)-(b+f.xpadding);f.widget.getNode().style.left=c+"px";break;case YK.JUSTIFY_CENTER:c=((a*f.xcells)/2)-(b/2);f.widget.getNode().style.left=c+"px";break}}return b};YK.TableHomogenoues.prototype._setMaxChildWidthHeightHomo=function(c){var b=c.minWidth+2*c.xpadding;var a=c.minHeight+2*c.ypadding;this._maxChildWidth=this._maxChildWidth*c.xcells>b?this._maxChildWidth:b/c.xcells;this._maxChildHeight=this._maxChildHeight*c.ycells>a?this._maxChildHeight:a/c.ycells};YK.TableHomogenoues.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.TableHomogenoues.prototype._getWidths=function(){var b=0;for(var a=0;a<this._columns;a++){b+=this._widths[a]["width"]}return b};YK.TableHomogenoues.prototype._getHeights=function(){var a=0;for(var b=0;b<this._rows;b++){a+=this._heights[b]["height"]}return a};YK.TableHomogenoues.prototype._getResizeableColumns=function(){var b=0;for(var a=this._widths.length;a--;){if(this._widths[a]["resizeable"]){b+=1}}return b};YK.TableHomogenoues.prototype.getMinWidth=function(){return this._maxChildWidth*this._columns};YK.TableHomogenoues.prototype.getMinHeight=function(){return this._maxChildHeight*this._rows};YK.TableHomogenoues.prototype.resizeWidth=function(c){var b=this.getMinWidth();c=c>b?c:b;var a=(c/this._columns)+this._spacing;var d=this._height/this._rows;if(this._resizeable){this._placeChildrenHomo(a,d)}this.resize(a*this._columns,d*this._rows)};YK.TableHomogenoues.prototype.resizeHeight=function(a){var c=this.getMinHeight();a=a>c?a:c;var d=a/this._rows+this._spacing;var b=this._width/this._columns;if(this._resizeable){this._placeChildrenHomo(b,d)}this.resize(b*this._columns,d*this._rows)};YK.TableNoneHomogenoues=function(c,a,b,d){YK.TableBase.call(this,c,a,b,d);this._render=function(){var f=this._domObj;f.className+=" yk_table_none_homogenouse";this._children=this._initChildren(this._rows,this._columns);this._initWidthsHeights()};this._render()};YK.TableNoneHomogenoues.prototype=new YK.TableBase();YK.TableNoneHomogenoues.prototype.constructor=YK.TableNoneHomogenoues;YK.TableNoneHomogenoues.prototype.attach=function(c,f,r,n,b,g,d,k,s){var m=1;for(var l=f+1;l<r;l++){this._children[l][n].minWidth=c.getMinWidth();this._children[l][n].minHeight=c.getMinHeight();m+=1}if(f+1<r){for(var l=f;l<r;l++){var a=1;for(var h=n+1;h<b;h++){this._children[l][h].minWidth=c.getMinWidth();this._children[l][h].minHeight=c.getMinHeight();a+=1}}}else{var a=1;for(var l=n+1;l<b;l++){this._children[f][l].minWidth=c.getMinWidth();this._children[f][l].minHeight=c.getMinHeight();a+=1}}var o=this._children[f][n];o.widget=c;o.xoptions=g;o.yoptions=d;o.xpadding=k;o.ypadding=s;o.xcells=m;o.ycells=a;o.left=f;o.right=r;o.top=n;o.bottom=b;o.minWidth=c.getMinWidth();o.minHeight=c.getMinHeight();this._resetWidths(c,f,r,g);this._resetHeights(c,n,b,d);this._placeChildrenNoneHomo();var q=this._getWidths();var p=this._getHeights();this.resize(q,p);this._minWidth=q;this._minHeight=p};YK.TableNoneHomogenoues.prototype._placeChildrenNoneHomo=function(){var b;this._domObj.innerHTML="";var l=document.createDocumentFragment();for(var h=0;h<this._rows;h++){for(var g=0;g<this._columns;g++){b=this._children[g][h];var a=0;var n=0;if(b.widget){var c=YK.domBuilder.create({append:l,tag:"div",style:"position: absolute;"});for(var f=b.left;f<b.right;f++){a+=this._widths[f]["width"]}var d=0;for(var f=0;f<b.left;f++){d+=this._widths[f]["width"]}for(var f=b.top;f<b.bottom;f++){n+=this._heights[f]["height"]}var m=0;for(var f=0;f<b.top;f++){m+=this._heights[f]["height"]}c.style.width=a+"px";c.style.height=n+"px";c.style.left=d+"px";c.style.top=m+"px";c.appendChild(b.widget.getNode());this._positionWidgetByXoptionsNoneHomo(b,a);this._positionWidgetByYoptionsNoneHomo(b,n)}}}this._domObj.appendChild(l)};YK.TableNoneHomogenoues.prototype._positionWidgetByXoptionsNoneHomo=function(f,a){var c=f.xpadding;var d=f.right===this._columns?0:this._spacing;if(f.xoptions.fill){f.widget.getNode().style.left=c+"px";f.widget.resizeWidth(a-c*2-d)}else{var b;switch(f.xoptions.align){case YK.JUSTIFY_LEFT:f.widget.getNode().style.left=f.xpadding+"px";break;case YK.JUSTIFY_RIGHT:b=a-(f.minWidth+f.xpadding)-d;f.widget.getNode().style.left=b+"px";break;case YK.JUSTIFY_CENTER:b=((a-d)/2)-(f.minWidth/2);f.widget.getNode().style.left=b+"px";break}f.widget.resizeWidth(f.minWidth)}};YK.TableNoneHomogenoues.prototype._positionWidgetByYoptionsNoneHomo=function(f,a){var b=f.ypadding;var d=f.bottom===this._rows?0:this._spacing;if(f.yoptions.fill){f.widget.getNode().style.top=b+"px";f.widget.resizeHeight(a-b*2-d)}else{var c;switch(f.yoptions.align){case YK.JUSTIFY_TOP:f.widget.getNode().style.top=f.ypadding+"px";break;case YK.JUSTIFY_BOTTOM:c=a-(f.minHeight+f.ypadding)-d;f.widget.getNode().style.top=c+"px";break;case YK.JUSTIFY_CENTER:c=((a-d)/2)-(f.minHeight/2);f.widget.getNode().style.top=c+"px";break}f.widget.resizeHeight(f.minHeight)}};YK.TableNoneHomogenoues.prototype.getMinWidth=function(){return this._minWidth};YK.TableNoneHomogenoues.prototype.getMinHeight=function(){return this._minHeight};YK.TableNoneHomogenoues.prototype.resizeWidth=function(f){var d=this.getMinWidth();f=f>d?f:d;var b=this._getResizeableColumns();var c=(f-this._getWidths())/b;for(var a=0;a<this._columns;a++){if(this._widths[a]["resizeable"]){this._widths[a]["width"]+=c}}if(this._resizeable){this._placeChildrenNoneHomo()}this.resize(f,this._height)};YK.TableNoneHomogenoues.prototype.resizeHeight=function(a){var f=this.getMinHeight();a=a>f?a:f;var d=this._getResizeableRows();var b=(a-this._getHeights())/d;for(var c=0;c<this._rows;c++){if(this._heights[c]["resizeable"]){this._heights[c]["height"]+=b}}if(this._resizeable){this._placeChildrenNoneHomo()}this.resize(this._width,a)};YK.Slider=function(a,b){YK.Widget.apply(this);this._width=this._minWidth=300;this._height=this._minHeight=200;this._visibleColumns=a||1;this._spacing=b||1;this._marginLeft=50;this._slideWidth=this._getSlideWidth(this._width);this._slides=[];this._currentLeft=0;this._arrowWidth=27;this._arrowHeight=37;this._slideWidths;this._isMoving=false;this._isRightArrowEnabled=false;this._isLeftArrowEnabled=false;this._render=function(){this._domObj.className+=" yk_slider";this._domObj.tabIndex="0";this._viewport=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_slides_viewport",style:"position: relative;"});this._viewport.style.left=this._marginLeft+"px";this._viewport.style.overflowY="hidden";this._slidesContainer=YK.domBuilder.create({append:this._viewport,tag:"div","class":"yk_slides_container"});this._slidesContainer.style.height=this._height+"px";this._leftArrow=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_slider_leftarrow",id:"yk_slider_leftarrow_"+this._id});this._leftArrowDisabled=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_slider_leftarrow_disabled"});this._rightArrow=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_slider_rightarrow",id:"yk_slider_rightarrow_"+this._id});this._rightArrowDisabled=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_slider_rightarrow_disabled"});this.resize(this._width,this._height)};this._render();this._initEvent();this._disableArrow()};YK.Slider.prototype=new YK.Widget();YK.Slider.prototype.constructor=YK.Slider;YK.Slider.prototype._initEvent=function(){var a=this,b=false;YK.Event.addDomListener(this._domObj,"focus",function(){if(!b){YK.domBuilder.applyAttributes(a._domObj,{border:"1px dashed gray"})}});YK.Event.addDomListener(this._domObj,"blur",function(){YK.domBuilder.applyAttributes(a._domObj,{border:""})});YK.Event.addDomListener(this._domObj,"mousedown",function(){YK.domBuilder.applyAttributes(a._domObj,{border:""});b=true});YK.Event.addDomListener(this._domObj,"mouseup",function(){YK.domBuilder.applyAttributes(a._domObj,{border:""});b=false});YK.Event.addDomListener(this._domObj,"keyup",function(c){if(c.which===YK.RIGHT_ARROW_KEY&&c.ctrlKey&&a._isLeftMovable()&&a._isRightArrowEnabled){a._moveLeft()}if(c.which===YK.LEFT_ARROW_KEY&&c.ctrlKey&&a._isRightMovable()&&a._isLeftArrowEnabled){a._moveRight()}});YK.Event.addDomListener(this._leftArrow,"click",function(c){if(a._isRightMovable()){a._moveRight()}YK.Event.stopBubble(c)});YK.Event.addDomListener(this._rightArrow,"click",function(c){if(a._isLeftMovable()){a._moveLeft()}YK.Event.stopBubble(c)})};YK.Slider.prototype.appendChild=function(f,c){var g=c===undefined||c===null?false:c;var b=this._getScroller(f);var a=this._constructSlide(b);var d=this._constructSpace();this._slides.push({slide:a,space:d,widget:b});if(this._slides.length<=this._visibleColumns){this._disableRightArrow()}else{this._enableRightArrow()}this._handleSlideEvent(a,g,d);this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.Slider.prototype._handleSlideEvent=function(a,f,d){var c=this;YK.Event.addDomListener(a,"mouseover",function(g){if(f){YK.domBuilder.showElement(this.lastChild)}YK.Event.stopBubble(g)});YK.Event.addDomListener(a,"mouseout",function(g){YK.domBuilder.hideElement(this.lastChild);YK.Event.stopBubble(g)});var b=a.lastChild;YK.Event.addDomListener(b,"mousedown",function(g){c._removeSlide(a,d);if(c._slides.length<=c._visibleColumns){c._disableArrow()}YK.Event.stopBubble(g)})};YK.Slider.prototype.resetMinWidth=function(a){this._isMinWidthChanged=a?true:false;this._minWidth=a;this._width=a;this.resizeWidth(this._width)};YK.Slider.prototype.resetMinHeight=function(a){this._isMinHeightChanged=a?true:false;this._minHeight=a;this._height=a;this.resizeHeight(this._height)};YK.Slider.prototype.clearSlides=function(){this._slides=[];this._slidesContainer.innerHTML="";this._disableArrow();this._viewport.scrollLeft=0};YK.Slider.prototype._isLeftMovable=function(){var a=this._slides.length>=this._visibleColumns?this._visibleColumns:1;var b=this._slideWidth*(this._slides.length-a);return((b+this._currentLeft)>=0)&&!this._isMoving};YK.Slider.prototype._isRightMovable=function(){return !this._isMoving&&this._currentLeft!==0};YK.Slider.prototype._disableArrow=function(){this._disableLeftArrow();this._disableRightArrow()};YK.Slider.prototype._removeSlide=function(a,g){var b=this;for(var c=this._slides.length;c--;){if(this._slides[c].slide===a){this._slides.splice(c,1);break}}var f=parseInt(a.style.width);var d=window.setInterval(function(){f-=20;a.style.width=f+"px";if(f<=0){var l=b._slideWidth+b._spacing+2;b._setSlideWidths(l*(b._slides.length));b._slidesContainer.style.width=b._slideWidths+"px";var k=b._currentLeft-l;var h=a.parentNode;if(h.lastChild===g){b._viewport.scrollLeft-=5}if(k>0){b._currentLeft=k}h.removeChild(g);h.removeChild(a);clearInterval(d)}},5)};YK.Slider.prototype._setSlideWidths=function(a){this._slideWidths=a};YK.Slider.prototype._resizeSlides=function(f,c){var b;this._slideWidth=this._getSlideWidth(f);var g=this._slideWidth+this._spacing+2;this._setSlideWidths(g*(this._slides.length));for(var d=0,a=this._slides.length;d<a;d++){b=this._slides[d];this._resizeElement(b.slide,this._slideWidth,c-13);this._resizeElement(b.space,this._spacing,c);b.widget.resizeWidth(this._slideWidth);b.widget.resizeHeight(c-13)}this.resize(f,c);this._positionArrow()};YK.Slider.prototype._getSlideWidth=function(a){a=((a-this._marginLeft*2)-((this._visibleColumns-1)*this._spacing)-this._visibleColumns*2)/this._visibleColumns;return a};YK.Slider.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Slider.prototype._resizeElement=function(b,c,a){b.style.width=c+"px";b.style.height=a+"px"};YK.Slider.prototype._constructSpace=function(){var a=YK.domBuilder.create({append:this._slidesContainer,tag:"div",style:"float: left;"});return a};YK.Slider.prototype._constructSlide=function(c){var a=YK.domBuilder.create({append:this._slidesContainer,tag:"div","class":"yk_slider_slide",style:"float: left;"});a.appendChild(c._domObj);var b=YK.domBuilder.create({append:a,tag:"div","class":"yk_slider_close_button"});YK.domBuilder.hideElement(b);return a};YK.Slider.prototype._getScroller=function(b){var a=new YK.Scroller();a.show();a.appendChild(b,true);a.disableHScrolled();return a};YK.Slider.prototype._moveRight=function(){var a=this;var c=this._currentLeft-(this._slideWidth+this._spacing+2);var b=window.setInterval(function(){a._currentLeft-=20;a._isMoving=true;a._viewport.scrollLeft=a._currentLeft;if(a._currentLeft<=c){a._viewport.scrollLeft=c;a._currentLeft=c;clearInterval(b);a._enableRightArrow();if(a._viewport.scrollLeft===0){a._disableLeftArrow()}a._isMoving=false}},10)};YK.Slider.prototype._moveLeft=function(){var a=this;var c=this._currentLeft+this._slideWidth+this._spacing+2;var b=window.setInterval(function(){a._currentLeft+=20;a._viewport.scrollLeft=a._currentLeft;a._isMoving=true;if(a._currentLeft>=c){a._viewport.scrollLeft=c;a._currentLeft=c;a._enableLeftArrow();var f=a._slideWidth+a._spacing+2;var d=Math.floor(a._slideWidths-a._viewport.scrollLeft);if(d<=f*a._visibleColumns){a._disableRightArrow()}clearInterval(b);a._isMoving=false}},10)};YK.Slider.prototype._positionArrow=function(){this._positionArrowLeft(this._leftArrow);this._positionArrowLeft(this._leftArrowDisabled);this._positionArrowRight(this._rightArrow);this._positionArrowRight(this._rightArrowDisabled)};YK.Slider.prototype._positionArrowLeft=function(b){var a=b.style;a.width=this._arrowWidth+"px";a.height=this._arrowHeight+"px";a.top=this._height/2-this._arrowHeight/2+"px";a.left="16px"};YK.Slider.prototype._positionArrowRight=function(b){var a=b.style;a.width=this._arrowWidth+"px";a.height=this._arrowHeight+"px";a.top=this._height/2-this._arrowHeight/2+"px";a.right="8px"};YK.Slider.prototype._enableRightArrow=function(){var a=YK.domBuilder;a.hideElement(this._rightArrowDisabled);a.showElement(this._rightArrow);this._isRightArrowEnabled=true};YK.Slider.prototype._disableRightArrow=function(){var a=YK.domBuilder;a.showElement(this._rightArrowDisabled);a.hideElement(this._rightArrow);this._isRightArrowEnabled=false};YK.Slider.prototype._enableLeftArrow=function(){var a=YK.domBuilder;a.hideElement(this._leftArrowDisabled);a.showElement(this._leftArrow);this._isLeftArrowEnabled=true};YK.Slider.prototype._disableLeftArrow=function(){var a=YK.domBuilder;a.showElement(this._leftArrowDisabled);a.hideElement(this._leftArrow);this._isLeftArrowEnabled=false};YK.Slider.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=this._width+"px";this._viewport.style.width=this._width-this._marginLeft*2+6+"px";this._slidesContainer.style.width=this._slideWidths+"px"};YK.Slider.prototype._resizeHeight=function(a){this._height=a;this._viewport.style.height=this._height+25+"px";this._domObj.style.height=this._height+"px";this._slidesContainer.style.height=this._height+"px"};YK.Slider.prototype.getMinHeight=function(){return this._minHeight};YK.Slider.prototype.getMinWidth=function(){return this._minWidth};YK.Slider.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this._resizeSlides(a,this._height)};YK.Slider.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this._resizeSlides(this._width,b)};YK.Menu=function(a){YK.Widget.apply(this);this._menuHeight=24;this._padding=40;this._contextMenu=a;this._numberOfSeperator=0;this._hilightedItem=null;this._render=function(){this._domObj.className+=" yk_submenu";this._domObj.style.position="fixed";this._domObj.tabIndex="0";this._domObj.style.zIndex=YK.MENU_ZINDEX;this._domObj.style.display="none"};this._render();this._keyControl();this._receivePublicEvent()};YK.Menu.prototype=new YK.Widget();YK.Menu.prototype.constructor=YK.Menu;YK.Menu.prototype._keyControl=function(){var a=this;YK.Event.addDomListener(this._domObj,"keyup",function(d){switch(d.keyCode){case YK.DOWN_ARROW_KEY:var b=a._getNextItem();a._hilightItem(b);break;case YK.UP_ARROW_KEY:var c=a._getPreviousItem();a._hilightItem(c);break;case YK.LEFT_ARROW_KEY:a._transferArrowKeyControllToParentMenu();break;case YK.RIGHT_ARROW_KEY:a._transferArrowKeyControllToSubMenu();break;case YK.ENTER_KEY:a._handleSelectedItem();break;case YK.ESC_KEY:a._handleECSKey();default:}})};YK.Menu.prototype._receivePublicEvent=function(){var a=this;YK.Event.addPublicListener(this,"menurightarrowkeypressed",function(b){if(b===a._domObj.firstChild.getAttribute("name")){a._focus()}});YK.Event.addPublicListener(this,"menuleftarrowkeypressed",function(b){if(a._hilightedItem===null){return}if(b===a._hilightedItem.getAttribute("name")){a._focus()}})};YK.Menu.prototype._handleECSKey=function(){YK.Event.triggerPublicListener("ecs_keypressed")};YK.Menu.prototype._handleSelectedItem=function(){this._contextMenu.selectItem(this._hilightedItem.getAttribute("name"));YK.Event.triggerPublicListener("itemselected",this._hilightedItem.getAttribute("name"))};YK.Menu.prototype._transferArrowKeyControllToSubMenu=function(){var a=this._hilightedItem.getAttribute("name")+"0:";YK.Event.triggerPublicListener("menurightarrowkeypressed",a)};YK.Menu.prototype._transferArrowKeyControllToParentMenu=function(){var a=this._hilightedItem.getAttribute("name");var b=a.substr(0,a.length-2);YK.Event.triggerPublicListener("menuleftarrowkeypressed",b)};YK.Menu.prototype._focus=function(){var a=this._hilightedItem||this._domObj.firstChild;this._hilightItem(a);this._domObj.focus()};YK.Menu.prototype._getPreviousItem=function(){var a=this._hilightedItem?this._hilightedItem.previousSibling:this._domObj.lastChild;a=a||this._domObj.lastChild;return a};YK.Menu.prototype._getNextItem=function(){var a=this._hilightedItem?this._hilightedItem.nextSibling:this._domObj.firstChild;a=a||this._domObj.firstChild;return a};YK.Menu.prototype.renderMenu=function(c,a){var b=this._createMenuItems(c);this._appendMenu(b);this._resize();if(a){this.anchorNextToParentNode(a)}};YK.Menu.prototype._createMenuItems=function(d){var h=document.createDocumentFragment();for(var f=0,g=d.length;f<g;f++){var l=d[f]["valueObject"]["display"];var b=d[f].path;var c=d[f].imageClassName===undefined?null:d[f].imageClassName;var m=this._creatItem(l,b,c);h.appendChild(m);var k=d[f]["hasChildNodes"];if(k){this._showExpandableNode(m)}var a=d[f]["valueObject"]["isUnderlined"];if(a){this._showSeparator(m)}this._handleEvent(m)}return h};YK.Menu.prototype._creatItem=function(d,f,a){var c=YK.domBuilder.create({tag:"div","class":"yk_menu",id:"menu_"+this._id+"_"+f,name:"menu_"+f});YK.domBuilder.create({append:c,tag:"div","class":"yk_menu_span",text:d});if(a){var b=YK.domBuilder.create({append:c,tag:"div","class":"yk_menu_image"});b.className+=" "+a}return c};YK.Menu.prototype._appendMenu=function(a){this._domObj.appendChild(a);document.body.appendChild(this._domObj)};YK.Menu.prototype._showExpandableNode=function(a){a.expandable=true;YK.domBuilder.create({append:a,tag:"div","class":"yk_menu_show_sub_menu"})};YK.Menu.prototype._showSeparator=function(a){a.className+=" yk_menu_underline";this._numberOfSeperator+=1};YK.Menu.prototype._resize=function(){this._resizeWidth(this._getMaxWidth()+this._padding);this._resizeHeight(this._getMaxHeight())};YK.Menu.prototype._getMaxWidth=function(){var b=this._domObj.childNodes,d=0;for(var a=b.length;a--;){var f=this._domObj.childNodes[a].childNodes[0].innerHTML;var c=YK.Util.calculateTextWidth(f);d=d<c?c:d}return d};YK.Menu.prototype._getMaxHeight=function(){return this._domObj.childNodes.length*this._menuHeight+this._numberOfSeperator};YK.Menu.prototype._handleEvent=function(b){var a=this;YK.Event.addDomListener(b,"mouseover",function(){a._domObj.focus();a._hilightItem(b)});YK.Event.addDomListener(b,"mousedown",function(c){a._handleSelectedItem();YK.Event.stopBubble(c)})};YK.Menu.prototype._hilightItem=function(a){if(this._hilightedItem){YK.domBuilder.applyAttributes(this._hilightedItem,{backgroundColor:""})}this._hilightedItem=a;YK.domBuilder.applyAttributes(this._hilightedItem,{backgroundColor:"#FFFF66"});this._expandSubMenu()};YK.Menu.prototype._expandSubMenu=function(){var a=this._hilightedItem;var b=$name(a.getAttribute("name")+"0:").length;var c=a.expandable;if(c&!b){YK.Event.triggerPublicListener("expandableelementhovered",a.getAttribute("name"),a);this._hideSiblingsMenu(a)}};YK.Menu.prototype.showMenu=function(a){this.show();this._positionFromTop(a.clientY-1);this._positionFromLeft(a.clientX-1)};YK.Menu.prototype.hideMenu=function(b){if(!b){return}document.body.removeChild(b.parentNode);var c=b.parentNode.childNodes;for(var a=c.length;a--;){b=$name(c[a].getAttribute("name")+"0:")[0];this.hideMenu(b)}};YK.Menu.prototype._hideSiblingsMenu=function(c){var d=c.parentNode.childNodes;for(var b=d.length;b--;){if(d[b]!==c){var a=$name(d[b].getAttribute("name")+"0:")[0];this.hideMenu(a)}}};YK.Menu.prototype.anchorNextToParentNode=function(a){var c=YK.Util.pageX(a)+parseInt(a.offsetWidth);var b=YK.Util.pageY(a);this.show();this._positionFromTop(b);this._positionFromLeft(c)};YK.Menu.prototype._positionFromTop=function(b){var a=window.innerHeight-b;if(a>this._height){this._domObj.style.top=b+"px"}else{this._domObj.style.top=b-this._height+"px"}};YK.Menu.prototype._positionFromLeft=function(a){var b=window.innerWidth-a;if(b>this._width){this._domObj.style.left=a+"px"}else{this._domObj.style.left=a-this._width+"px"}};YK.ContextMenu=function(a){YK.Widget.apply(this);this._selectedValue=null;this._Menu=YK.NullMenuObj;this._model=a;this._controller=new YK.ContextMenuController(this);this._receivePublicEvent()};YK.ContextMenu.prototype=new YK.Widget();YK.ContextMenu.prototype.constructor=YK.ContextMenu;YK.ContextMenu.prototype._receivePublicEvent=function(){var a=this;YK.Event.addPublicListener(this,"treemenu_docked",function(){a.hide()});YK.Event.addPublicListener(this,"mousedowned",function(){a.hide()});YK.Event.addPublicListener(this,"ecs_keypressed",function(){a.hide()});YK.Event.addPublicListener(this,"itemselected",function(){a.hide();YK.Event.triggerPublicListener("menu_closed",a)})};YK.ContextMenu.prototype.selectItem=function(a){this.emit("_itemselected",a)};YK.ContextMenu.prototype.renderSubMenu=function(b,a){this._Menu=new YK.Menu(this);this._Menu.renderMenu(b,a)};YK.ContextMenu.prototype.show=function(a){this.hide();this._controller.setModel(this._model);this._Menu.showMenu(a)};YK.ContextMenu.prototype.anchorTo=function(a){this.hide();this._controller.setModel(this._model);this._Menu.anchorNextToParentNode(a)};YK.ContextMenu.prototype.hide=function(){var a=$name("menu_0:")[0];this._Menu.hideMenu(a)};YK.ContextMenu.prototype.setSelectedItem=function(a){this._selectedValue=a};YK.ContextMenu.prototype.getSelectedItem=function(a){return this._selectedValue};gobject.signalNew("itemselected",YK.ContextMenu,null,null,[]);gobject.signalNew("_itemselected",YK.ContextMenu,null,null,[]);YK.NullMenuObj=YK.NullObjectBuilder.build(new YK.Menu());YK.ContextMenuController=function(a){this._model=null;var b=this;this._render=function(d,c){var f=this.__mashupModel(d.getChildren());a.renderSubMenu(f,c)};YK.Event.addPublicListener(this,"expandableelementhovered",function(d,c){var f=b._model.getChildByPath(d.split("menu_")[1]);b._render(f,c)});a.connect("_itemselected",function(d){var c=b._model.getChildByPath(d.split("menu_")[1]).getValue();a.setSelectedItem(c);a.emit("itemselected",c)})};YK.ContextMenuController.prototype.setModel=function(a){this._model=a;this._render(this._model,null)};YK.ContextMenuController.prototype.__mashupModel=function(b){var h=[],f,g,c;for(var d=0,a=b.length;d<a;d++){f=b[d];c=f.getValue();g=f.getChildren().length>0;h.push({display:c.display,imageClassName:c.imageClassName,hasChildNodes:g,path:f.getPath(),valueObject:c})}return h};YK.ListStore=function(a){YK.Object.apply(this);this._modelType=YK.ListStore;this.children=new Array();this._headers=a||[]};YK.ListStore.prototype=new YK.Object();YK.ListStore.prototype.constructor=YK.ListStore;YK.ListStore.prototype.append=function(c){var b=this;c.value=this._filterRow(c.value);var a=new YK.TreeIter(this.children.length.toString()+":");a.setRow(c);this.add(a);a.connect("valueupdated",function(f,d){b.emit("rowupdated",f,d)});return a};YK.ListStore.prototype.appendToHeader=function(a){this._headers.push(a)};YK.ListStore.prototype.appendRows=function(d){if(d.length>0){var c=[];for(var b=0,a=d.length;b<a;b++){c.push(this.append(d[b]))}this.emit("rowsupdated",c)}return c};YK.ListStore.prototype.getChildByPath=function(b){for(var a=this.children.length;a--;){var c=this.children[a];if(c.getPath()===b){return c}}};YK.ListStore.prototype.getModelType=function(){return this._modelType};YK.ListStore.prototype.getColumnsWidth=function(){var c=[];for(var b=0,a=this._headers.length;b<a;b++){c.push(this._headers[b].width)}return c};YK.ListStore.prototype.getWidths=function(){var b=0;for(var a=this._headers.length;a--;){b+=this._headers[a].width}return b};YK.ListStore.prototype._filterRow=function(d){var c=[];for(var b=0,a=this._headers.length;b<a;b++){if(d[b]===null||d[b]===""||d[b]===" "||d[b]===undefined){c.push("N/A");continue}c.push(d[b])}return c};YK.ListStore.prototype.getChildren=function(){return this.children};YK.ListStore.prototype.getHeaders=function(){return this._headers};YK.ListStore.prototype.add=function(a){this.children.push(a)};YK.ListStore.prototype.remove=function(b){for(var a=this.children.length;a--;){if(this.children[a]===b){this.children.splice(a,1);break}}};YK.ListStore.prototype.getChild=function(a){return this.children[a]||null};YK.ListStore.prototype._getColumn=function(c){for(var b=0,a=this._headers.length;b<a;b++){if(this._headers[b]["title"]===c){return b}}return 0};YK.ListStore.prototype.search=function(k,h){var g=this._getColumn(k);var f=new RegExp("^"+h.toString().toLowerCase());var d=this.children;var b="";for(var c=0,a=d.length;c<a;c++){b=d[c].getValue().value[g].toString().toLowerCase().match(f);if(b){return d[c]}}return d[0]};YK.ListStore.prototype.filter=function(h,b){var d=this._getColumn(b);var a=[];var k=new RegExp("^"+h.toString().toLowerCase());var c=this.children;var l="";for(var f=0,g=c.length;f<g;f++){l=c[f].getValue().value[d].toString().toLowerCase().match(k);if(l){a.push(c[f])}}return a};gobject.signalNew("rowsupdated",YK.ListStore,[],null,null);gobject.signalNew("rowupdated",YK.ListStore,[],null,null);YK.ListView=function(a){YK.Widget.apply(this);this.LISTVIEW_ROWSELECTED="rowselected";this.LISTVIEW_ROWCLICKED="rowclicked";this.LISTVIEW_ROWOVER="rowover";this.LISTVIEW_ROWOUT="rowout";this.LISTVIEW_ROWDOUBLECLICKED="rowdoubleclicked";this._width=this._minWidth=400;this._height=this._minHeight=100;this._titleHeight=19;this._cellHeight=18;this._bodyHeight=this._height-this._cellHeight;this._columnsWidth=[];this._headerVisible=true;this._leftPadding=4;this._model=a||null;this._selectedRow=null;this._emptyRows=[];this._rowIndex=-1;this._border=2;this._selectedRowPath="";this._hilightedRowNode=null;this._selectedRowNode=null;this._parentWidth=this._width;this._valueMember="";this._selectedRowIndex=null;this._render=function(){this._domObj.className+=" yk_listview";this._domObj.tabIndex="0";this._tableDom=YK.domBuilder.create({append:this._domObj,tag:"TABLE",BORDER:"0",CELLPADDING:"6","class":"yk_listview_table"});this._headerDom=YK.domBuilder.create({append:this._tableDom,tag:"THEAD","class":"yk_listview_table_head"});this._bodyDom=YK.domBuilder.create({append:this._tableDom,tag:"TBODY","class":"yk_listview_table_body"});this._footerDom=YK.domBuilder.create({append:this._tableDom,tag:"TFOOT","class":"yk_listview_table_footer"});this._vGhost=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_listview_vghost"});YK.domBuilder.hideElement(this._vGhost);this._headerDomGhost=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_listview_table_head_ghost"});YK.domBuilder.hideElement(this._headerDomGhost);this._grayOutBackground=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_gray_out"});this._loadingImgContainer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_loading_bar_container_listview"});this._loadingImg=YK.domBuilder.create({append:this._loadingImgContainer,tag:"div","class":"yk_loading_bar_listview"});YK.domBuilder.hideElement(this._grayOutBackground);YK.domBuilder.hideElement(this._loadingImgContainer)};this._render();this._model=a;new YK.ListViewController(this,this._model);this._enableSortable();this._keyControllEvent()};YK.ListView.prototype=new YK.Widget();YK.ListView.prototype.constructor=YK.ListView;YK.ListView.prototype.activateArrowKey=function(){this._domObj.focus()};YK.ListView.prototype.showLoading=function(){YK.domBuilder.showElement(this._grayOutBackground);YK.domBuilder.showElement(this._loadingImgContainer)};YK.ListView.prototype.hideLoading=function(){YK.domBuilder.hideElement(this._grayOutBackground);YK.domBuilder.hideElement(this._loadingImgContainer)};YK.ListView.prototype.getNumberOfActiveRow=function(){var f=this._bodyDom.childNodes,d=0;for(var c=0,a=f.length;c<a;c++){var b=new RegExp("^empty_");if(!f[c].modelId.match(b)){d++}}return d};YK.ListView.prototype.setNextSelectedRow=function(){var a=this._selectedRowNode?this._selectedRowNode.nextSibling:this._bodyDom.firstChild;this._rowIndex=this._getIndex(a);this._hilightSelectedRow(this._rowIndex);this._emitSelectedRowSignalToController(a.modelId)};YK.ListView.prototype.setSelectedRowByIndex=function(b){var a=this._model.children.length;this._rowIndex=b>a?a-1:b;this._hilightSelectedRow(this._rowIndex);var c=this._bodyDom.childNodes[this._rowIndex].modelId;this._emitSelectedRowSignalToController(c);this.emit("rowclicked",this.getSelectedRow())};YK.ListView.prototype.setSelectedRowByValue=function(b,a){this.emit("searchcontenttocontroller",b,a);this.emit("rowclicked",this.getSelectedRow())};YK.ListView.prototype.filterRowsByValue=function(b,a){this.emit("filterrowstocontroller",b,a)};YK.ListView.prototype.hilightSelectedRow=function(a){this._rowIndex=this._getRowIndexById(a);this._hilightSelectedRow(this._rowIndex);this._scrollTableBodyByIndex(this._rowIndex)};YK.ListView.prototype.setModel=function(a){this._model=a;this._refreshView();this.emit("refreshmodel",a);this.resizeHeight(this._height+2);this.resizeWidth(this._parentWidth)};YK.ListView.prototype._getRowById=function(d){var c=this._bodyDom.childNodes;for(var b=0,a=c.length;b<a;b++){if(c[b].modelId===d){return c[b]}}return c[0]};YK.ListView.prototype._getRowIndexById=function(d){var c=this._bodyDom.childNodes;for(var b=0,a=c.length;b<a;b++){if(c[b].modelId===d){return b}}return 0};YK.ListView.prototype.getCellHeight=function(){return this._cellHeight};YK.ListView.prototype._scrollTableBodyByIndex=function(d){var c=this._height-this._cellHeight;var b=d*this._cellHeight;var a=b-c;this._bodyDom.scrollTop+=a+36};YK.ListView.prototype._refreshView=function(){this._headerDom.innerHTML="";this._bodyDom.innerHTML="";this._hilightedRowNode=null;this._selectedRowNode=null};YK.ListView.prototype._emitSelectedRowSignalToController=function(b){var a=new RegExp("^empty_");if(!b.match(a)&&this._selectedRowPath!==b){this.emit("_rowselectedtocontroller",b);this._selectedRowPath=b}};YK.ListView.prototype._enableSortable=function(){YK.LibAdapter.SortTable(this._tableDom)};YK.ListView.prototype.updateRowValue=function(d,c){var f=this._getRowById(d).childNodes;for(var b=0,a=f.length;b<a;b++){f[b].firstChild.innerHTML=c[b]}};YK.ListView.prototype._constructRowColumns=function(f,d,g){for(var c=0,b=d;c<b;c++){var h=YK.domBuilder.create({append:f,tag:"TD","class":"yk_listview_table_body_td"});var a=YK.domBuilder.create({append:h,tag:"DIV","class":"yk_listview_table_body_td_cell"});if(g[c]){a.innerHTML=g[c]}a.style.height=this._cellHeight+"px";if(c===b-1){YK.domBuilder.hideElement(a)}}};YK.ListView.prototype._constructBodyRow=function(a,f,b,d){var c=YK.domBuilder.create({tag:"TR","class":"yk_listview_table_body_tr"});c.modelId=f;if(a%2===0){c.className+=" yk_listview_table_body_tr_even"}else{c.className+=" yk_listview_table_body_tr_odd"}this._constructRowColumns(c,b,d);return c};YK.ListView.prototype._storeEmptyRows=function(b,c){var a=new RegExp("^empty_");if(c.match(a)){this._emptyRows.push(b)}};YK.ListView.prototype._resetSelectedRowPath=function(){this._selectedRowPath=""};YK.ListView.prototype.renderEmptyRows=function(b,a){this.constructBody(b,a)};YK.ListView.prototype.renderRows=function(b,a){this.constructBody(b,a)};YK.ListView.prototype.constructBody=function(d,c){this._resetSelectedRowPath();var h=document.createDocumentFragment();for(var b=0,a=d.length;b<a;b++){var g=d[b]["path"];var f=this._constructBodyRow(b,g,c,d[b]["rows"]);h.appendChild(f);this._handleRowEvent(f,g);this._storeEmptyRows(f,g)}this._resetRowsId();this._bodyDom.appendChild(h);this._enableSortable()};YK.ListView.prototype.refreshRows=function(){this._bodyDom.innerHTML="";this._hilightedRowNode=null;this._selectedRowNode=null};YK.ListView.prototype.clearEmptyRows=function(){for(var b=0,a=this._emptyRows.length;b<a;b++){if(this._emptyRows[b].parentNode){this._bodyDom.removeChild(this._emptyRows[b])}}this._emptyRows=[]};YK.ListView.prototype.constructHeader=function(b){var h=YK.domBuilder.create({append:this._headerDom,tag:"TR","class":"yk_listview_table_head_tr"});var g=document.createDocumentFragment();for(var d=0,f=b.length;d<f;d++){var c=YK.domBuilder.create({append:g,tag:"TD",width:b[d].width,height:this._titleHeight,"class":"yk_listview_table_head_td"});var a=YK.domBuilder.create({append:c,tag:"div",width:b[d].width,"class":"yk_listview_table_head_td_div"});var m=YK.domBuilder.create({append:a,tag:"span",text:b[d].title,style:"float: left;","class":"yk_listview_table_head_td_div_span"});var k=YK.domBuilder.create({append:a,tag:"div",style:"float: left;","class":"yk_listview_table_head_td_div_sortarrow arrowdown"});YK.domBuilder.hideElement(k);var l=YK.domBuilder.create({append:a,tag:"div","class":"yk_listview_table_head_td_div_vbar"});l.style.left=b[d].width-this._leftPadding+"px";this._handleColumnResizeEvent(d,l);this._handleCellEvent(d,a,k);if(d===f-1){YK.domBuilder.hideElement(l);a.removeChild(k)}}h.appendChild(g)};YK.ListView.prototype._resetRowsId=function(){var b=this._bodyDom.childNodes;for(var a=b.length;a--;){b[a].id="yk_listview_table_body_tr_"+a+"_"+this._id}};YK.ListView.prototype._getIndex=function(d){var c=this._bodyDom.childNodes;for(var b=0,a=c.length;b<a;b++){if(c[b]===d){return b}}};YK.ListView.prototype._increaseColumnWidth=function(b){var c=this._model.getColumnsWidth()[this._columnsWidth.length-2];var a=this._columnsWidth[this._columnsWidth.length-2]-b;a=a<c?c:a;if(a>c){this._columnsWidth[this._columnsWidth.length-2]=a;this._resizeWidth(this._width)}else{this._resizeWidth(this._width+b)}};YK.ListView.prototype._decreaseColumnWidth=function(a){this._columnsWidth[this._columnsWidth.length-2]-=a;this._resizeWidth(this._width)};YK.ListView.prototype._isSecondLastColumn=function(a){return a===this._columnsWidth.length-2};YK.ListView.prototype._updateColumWidth=function(a,b){this._columnsWidth[a]+=b;if(this._isSecondLastColumn()){this._resizeWidth(this._width+b);return}if(b>0){this._increaseColumnWidth(b)}else{this._decreaseColumnWidth(b)}};YK.ListView.prototype._getGhostPosition=function(a){var c=0;for(var b=0;b<=a;b++){c+=this._columnsWidth[b]}return c};YK.ListView.prototype.getModel=function(){return this._model};YK.ListView.prototype.resetMinHeight=function(a){this._minHeight=a;this._resizeHeight(a)};YK.ListView.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.ListView.prototype.setMinColumnsWidth=function(d,c){this._columnsWidth=[];for(var b=0,a=d.length;b<a;b++){this._columnsWidth.push(d[b])}this._minWidth=c;this._width=this._minWidth};YK.ListView.prototype.getMinWidth=function(){return this._minWidth};YK.ListView.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=this._height+"px";this._vGhost.style.height=this._height+"px";this._tableDom.style.height=this._height+"px";this._bodyHeight=this._height-this._cellHeight;this._bodyDom.style.height=this._bodyHeight+"px"};YK.ListView.prototype._resizeHeaderWidth=function(){var b=this._headerDom.firstChild.childNodes;for(var c=0,a=this._columnsWidth.length;c<a;c++){b[c].width=this._columnsWidth[c];b[c].firstChild.style.width=this._columnsWidth[c]+"px";b[c].firstChild.lastChild.style.left=this._columnsWidth[c]-this._leftPadding+"px"}};YK.ListView.prototype._resizeWidth=function(a){this._width=a>this._width?a:this._width;this._domObj.style.width=this._width-2+"px";this._resizeHeaderWidth()};YK.ListView.prototype.setSelectedRow=function(a){this._selectedRow=a};YK.ListView.prototype.getSelectedRow=function(a){return this._selectedRow};YK.ListView.prototype.setParentWidth=function(a){this._parentWidth=a};YK.ListView.prototype.resizeHeight=function(a){if(a>=this._minHeight){this._resizeHeight(a-2);this.emit("_renderemptyrows",a-this._cellHeight,this._cellHeight)}};YK.ListView.prototype.resizeWidth=function(c){if(c>=this._minWidth){var b=Math.ceil((c-this._width)/(this._columnsWidth.length-1));for(var a=this._columnsWidth.length-1;a--;){this._columnsWidth[a]+=b}this._width=c;this._resizeWidth(c)}};YK.ListView.prototype._handleRowEvent=function(d,c){var a=this;var b=YK.Event;b.addDomListener(d,"click",function(f){a._emitSelectedRowSignalToController(c);a.hideTooltip();a._rowIndex=a._getIndex(this);a._selectedRowIndex=a._rowIndex;if(!a._isEmptyRowClicked(a._rowIndex)){a.emit("rowclicked",a.getSelectedRow());a._hilightSelectedRow(a._rowIndex)}b.stopBubble(f)});b.addDomListener(d,"mouseover",function(g){a._rowIndex=a._getIndex(d);a._hilightRow(a._rowIndex);var f=g.target.parentNode.parentNode;a.emit("rowover",g,f);b.stopBubble(g)});b.addDomListener(d,"mouseout",function(f){a.emit("rowout");b.stopBubble(f)});b.addDomListener(d,"dblclick",function(f){a._selectedRowIndex=a._rowIndex;a.hideTooltip();if(!a._isEmptyRowClicked(a._rowIndex)){a.emit("rowdoubleclicked",a.getSelectedRow())}b.stopBubble(f)})};YK.ListView.prototype._isEmptyRowClicked=function(a){var b=false;if(this._model!==null){var c=this._model.children.length-1;if(c<a){b=true}}return b};YK.ListView.prototype._showVGhost=function(a){var b=this._getGhostPosition(a);this._vGhost.style.left=b-4+"px";YK.domBuilder.showElement(this._vGhost)};YK.ListView.prototype._handleColumnResizeEvent=function(d,f){var c=d;var a=this;var b=YK.domBuilder;YK.Event.addDomListener(f,"mouseover",function(){a._showVGhost(c);var g=a._getGhostPosition(c-1)+a._model.getColumnsWidth()[c];YK.LibAdapter.hDragInit(a._vGhost,g,null);var h;a._vGhost.onDragStart=function(k){a._vGhost.className="yk_listview_vghost_visible";h=k;a._headerDomGhost.style.cursor="col-resize";b.showElement(a._headerDomGhost)};a._vGhost.onDragEnd=function(k,m){a._vGhost.className="yk_listview_vghost";var l=k-h;a._updateColumWidth(c,l);h=k;b.hideElement(a._vGhost);b.hideElement(a._headerDomGhost)}})};YK.ListView.prototype._tabRow=function(){YK.domBuilder.applyAttributes(this._bodyDom.childNodes[0],{border:"1px dotted black"})};YK.ListView.prototype._unTabRow=function(){YK.domBuilder.applyAttributes(this._bodyDom.childNodes[0],{border:""})};YK.ListView.prototype._hilightSelectedRow=function(a){if(this._selectedRowNode){YK.domBuilder.applyAttributes(this._selectedRowNode,{backgroundColor:""})}this._selectedRowNode=this._bodyDom.childNodes[a];YK.domBuilder.applyAttributes(this._selectedRowNode,{backgroundColor:"#FFFF66"})};YK.ListView.prototype._hilightRow=function(a){if(this._hilightedRowNode){YK.domBuilder.applyAttributes(this._hilightedRowNode,{backgroundColor:""})}this._hilightedRowNode=this._bodyDom.childNodes[a];YK.domBuilder.applyAttributes(this._hilightedRowNode,{backgroundColor:"#FFFFCC"});if(this._selectedRowIndex!==null){this._hilightSelectedRow(this._selectedRowIndex)}this._unTabRow()};YK.ListView.prototype._handleCellEvent=function(g,a,c){var f=g;var h=YK.Event;var d=YK.domBuilder;h.addDomListener(a,"mouseover",function(k){d.showElement(c);h.stopBubble(k)});h.addDomListener(a,"mouseout",function(k){d.hideElement(c);h.stopBubble(k)});var b=true;h.addDomListener(a,"click",function(k){if(b){c.id="yk_listview_table_head_td_div_sortarrow_arrowup";b=false}else{c.id="yk_listview_table_head_td_div_sortarrow_arrowdown";b=true}})};YK.ListView.prototype._keyControllEvent=function(){var a=this,c=false;var b=YK.Event;b.addDomListener(this._domObj,"mousedown",function(){a._unTabRow();c=true});b.addDomListener(this._domObj,"mouseup",function(){a._unTabRow();c=false});b.addDomListener(this._domObj,"focus",function(){if(!c){a._tabRow()}});b.addDomListener(this._domObj,"blur",function(){a._unTabRow()});b.addDomListener(this._domObj,"keyup",function(g){var d=a._model.children.length;if(g.keyCode===13){var f=a._bodyDom.childNodes[a._rowIndex].modelId;a._emitSelectedRowSignalToController(f);a._hilightSelectedRow(a._rowIndex);a._selectedRowIndex=a._rowIndex;if(!a._isEmptyRowClicked(a._rowIndex)){a.emit("rowclicked",a.getSelectedRow())}}if(g.keyCode===40){if(a._rowIndex===d-1){a._rowIndex=-1}a._rowIndex++;if(!a._isEmptyRowClicked(a._rowIndex)){a._hilightRow(a._rowIndex)}}if(g.keyCode===38){if(a._rowIndex<=0){a._rowIndex=d}a._rowIndex--;if(!a._isEmptyRowClicked(a._rowIndex)){a._hilightRow(a._rowIndex)}}a._scrollTableBodyByIndex(a._rowIndex);b.stopBubble(g)})};gobject.signalNew("refreshmodel",YK.ListView,[],null,null);gobject.signalNew("_rowselectedtocontroller",YK.ListView,[],null,null);gobject.signalNew("_renderemptyrows",YK.ListView,[],null,null);gobject.signalNew("searchcontenttocontroller",YK.ListView,[],null,null);gobject.signalNew("filterrowstocontroller",YK.ListView,[],null,null);gobject.signalNew("rowselected",YK.ListView,[],null,null);gobject.signalNew("rowclicked",YK.ListView,[],null,null);gobject.signalNew("rowover",YK.ListView,[],null,null);gobject.signalNew("rowout",YK.ListView,[],null,null);gobject.signalNew("rowdoubleclicked",YK.ListView,[],null,null);YK.ListViewController=function(a,c){this._view=a;this._model=c;this._emptyRows=[];var b=this;this._render=function(g){this._model=g;this._model.appendToHeader({title:"",width:15});var k=this._model.getHeaders();var d=this._model.getChildren();this._headerMashup=this._constructHeaderData(k);var h=this._mashUpData(d);this._view.constructHeader(this._headerMashup);this._view.renderRows(h,this._headerMashup.length);var f=this._model.getWidths();this._view.setMinColumnsWidth(this._model.getColumnsWidth(),f);this._view.resize(f,this._view.getHeight());this._view.connect("_renderemptyrows",function(m,l){b._view.clearEmptyRows();b._emptyRows=b._constructEmptyRowsData(b._model.getChildren().length,m,l);b._view.renderEmptyRows(b._emptyRows,b._headerMashup.length)});this._model.connect("rowsupdated",function(l){var m=b._mashUpData(l);b._view.renderRows(m,b._headerMashup.length);if(m.length>=b._emptyRows.length){b._view.clearEmptyRows();b._emptyRows=[]}else{b._view.clearEmptyRows();b._emptyRows.splice(0,m.length);b._view.renderEmptyRows(b._emptyRows,b._headerMashup)}})};this._render(this._model);this._view.connect("refreshmodel",function(d){b._render(d)});this._view.connect("_rowselectedtocontroller",function(f){var d=b._model.getChildByPath(f);b._view.setSelectedRow(d);b._view.emit("rowselected",d)});this._view.connect("searchcontenttocontroller",function(f,d){b._setHilightRowToView(f,d)});this._view.connect("filterrowstocontroller",function(h,g){var f=b._model.filter(g,h);var d=b._mashUpData(f);b._view.refreshRows();b._view.renderRows(d,b._headerMashup.length);b._emptyRows=b._constructEmptyRowsData(f.length+1,b._view.getHeight(),b._view.getCellHeight());b._view.renderEmptyRows(b._emptyRows,b._headerMashup.length);b._setHilightRowToView(h,g)});this._model.connect("rowupdated",function(f,d){b._view.updateRowValue(f,d)})};YK.ListViewController.prototype._setHilightRowToView=function(c,b){var a=this._model.search(c,b);this._view.setSelectedRow(a);this._view.hilightSelectedRow(a.getPath())};YK.ListViewController.prototype._constructHeaderData=function(d){var b=[];for(var c=0,a=d.length;c<a;c++){b.push({title:d[c]["title"],width:d[c]["width"]})}return b};YK.ListViewController.prototype._mashUpData=function(c){var d=[];for(var b=0,a=c.length;b<a;b++){d.push({rows:c[b].getValue()["value"],path:c[b].getPath()})}return d};YK.ListViewController.prototype._constructEmptyRowsData=function(d,b,a){var g=d*a;var f=[];if(g<b){rows=Math.ceil((b-g)/a)-1;for(var c=0;c<rows;c++){f.push({rows:" ",path:"empty_"+YK.LibAdapter.getGUID()})}}return f};YK.Scroller=function(){YK.Widget.apply(this);this.SCROLLER_SCROLLED="scrolled";this._width=this._minWidth=100;this._height=this._minHeight=50;this._childResizable=false;this._isScrolledX=true;this._isScrolledY=true;this._vScrolledBar=null;this._child=null;this._scrollYDefault=0;this._attribute=null;this._padding=0;this._render=function(){this._domObj.className+=" yk_scroller_base";this._domObj.id="yk_scroller_base_"+this._id;this._domObj.style.width=this._width+"px";this._domObj.style.height=this._height+"px"};this._render();this._initEvent()};YK.Scroller.prototype=new YK.Widget();YK.Scroller.prototype.constructor=YK.Scroller;YK.Scroller.prototype.appendChild=function(b,a,c){this._childResizable=a===undefined||a===null?false:a;this._padding=(typeof c!=="undefined")?c:0;if(this._child){this._flushChild()}this._child=b;this._child.setParent(this);this._domObj.appendChild(b.getNode());this.refresh()};YK.Scroller.prototype._flushChild=function(){this._domObj.removeChild(this._child.getNode());this._child=null};YK.Scroller.prototype.scrollToTop=function(){this.scrollTo(null,0)};YK.Scroller.prototype.scrollToBottom=function(){var a=this._child.getMinHeight();this.scrollTo(null,this._height>a?this._height:a)};YK.Scroller.prototype.scrollToLeft=function(){this.scrollTo(0)};YK.Scroller.prototype.scrollToRight=function(){this.scrollTo(this._width)};YK.Scroller.prototype.scrollTo=function(a,b){this._domObj.scrollTop=b;this._domObj.scrollLeft=a};YK.Scroller.prototype.getChildren=function(){return this._child};YK.Scroller.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"scroll",function(f){var d=a._domObj.scrollTop;var c=a._domObj.scrollHeight;var b=c-(c-a._domObj.scrollTop);if(d>0&&b>=15){a.emit("scrolled");a._triggerDeactivateEvent();a._triggerResetScrollPosition()}})};YK.Scroller.prototype._triggerDeactivateEvent=function(){YK.Event.triggerPublicListener("deactivated")};YK.Scroller.prototype._triggerResetScrollPosition=function(){YK.Event.triggerPublicListener("scrolled",this)};YK.Scroller.prototype.refresh=function(){this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.Scroller.prototype.showLoading=function(){if(this._isScrolledY){this._domObj.style.overflowY="hidden"}if(this._isScrolledX){this._domObj.style.overflowX="hidden"}if(!this._loadingImgContainer){this._loadingImgContainer=this._constructLoading();this._appendLoading()}else{this._loadingImgContainer.style.display="table"}};YK.Scroller.prototype.hideLoading=function(){if(this._isScrolledY){this._domObj.style.overflowY="auto"}if(this._isScrolledX){this._domObj.style.overflowX="auto"}YK.domBuilder.hideElement(this._loadingImgContainer)};YK.Scroller.prototype.removeScrolledEvent=function(){YK.Event.removeListener(this._onScroll)};YK.Scroller.prototype.getScrolledDom=function(){return this._domObj};YK.Scroller.prototype.setAttribute=function(a){this._attribute=a;this._applyAttribute();this.resizeWidth(this._minWidth);this.resizeHeight(this._minHeight)};YK.Scroller.prototype._applyAttribute=function(){for(var a in this._attribute){if(a=="padding"){this._padding=parseInt(this._attribute[a])}this._domObj.style[a]=this._attribute[a]}};YK.Scroller.prototype.disableHScrolled=function(){this._domObj.style.overflowX="hidden";this._isScrolledX=false};YK.Scroller.prototype.disableVScrolled=function(){this._domObj.style.overflowY="hidden";this._isScrolledY=false};YK.Scroller.prototype.enableHScrolled=function(){this._domObj.style.overflowX="auto";this._isScrolledX=true};YK.Scroller.prototype.enableVScrolled=function(){this._domObj.style.overflowY="auto";this._isScrolledY=true;this._width=this._width-200;this.resize(this._width,this._height)};YK.Scroller.prototype.getScrollHeight=function(){return this._child.getHeight()};YK.Scroller.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a)};YK.Scroller.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px"};YK.Scroller.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";if(!this._isScrolledY&&this._child!==null){this._child._domObj.style.height=this._height-2+"px"}};YK.Scroller.prototype.getMinHeight=function(){return this._minHeight};YK.Scroller.prototype.getMinWidth=function(){return this._minWidth};YK.Scroller.prototype.resizeWidth=function(c){var a=c-this._padding*2;var b=this.getMinWidth();var b=a>b?a:b;this._resizeWidth(b);if(this._childResizable){var d=this._child.getMinWidth();if(b>d){this._child.resizeWidth(b)}else{this._child.resizeWidth(d)}}if(this._child instanceof YK.ListView){this._child.setParentWidth(b)}};YK.Scroller.prototype.resizeHeight=function(a){var b=a-this._padding*2;var d=this.getMinHeight();var d=b>d?b:d;this._resizeHeight(d);if(this._childResizable){var c=this._child.getMinHeight();if(d>c){this._child.resizeHeight(d)}else{this._child.resizeHeight(c)}}};gobject.signalNew("scrolled",YK.Scroller,null,null,[]);YK.VScroller=function(){YK.Scroller.apply(this);this._scollerWidth=18;this.disableHScrolled()};YK.VScroller.prototype=new YK.Scroller();YK.VScroller.prototype.constructor=YK.VScroller;YK.VScroller.prototype.getMinWidth=function(){var a=this._child.getMinWidth();return this._minWidth>a?this._minWidth:a};YK.VScroller.prototype.resizeWidth=function(c){var a=c-this._padding*2;var b=this.getMinWidth();b=a>b?a:b;this._resizeWidth(b);this._child.resizeWidth(b-this._scollerWidth);if(this._child instanceof YK.ListView){this._child.setParentWidth(b)}};YK.SmartEntryFactory=function(a){var b;switch(a){case YK.SMART_ENTRY_DROPDOWN_FIXED_MODEL:b=new YK.SmartEntryDropDownFacade(new YK.SmartEntryDropDownFixedModel());break;case YK.SMART_ENTRY_DROPDOWN_DYNAMIC_MODEL:b=new YK.SmartEntryDropDownFacade(new YK.SmartEntryDropDownDynamicModel());break;case YK.SMART_ENTRY:b=new YK.SmartEntryDropDownFacade(new YK.SmartEntry());break}return b};YK.SmartEntryDropDownFacade=function(b){YK.Object.apply(this);var a=new YK.VScroller();a.getNode().style.border="1px solid #D5D5D5";a.appendChild(b,true);a.setModel=function(c){b.setModel(c)};a.showError=function(c){b.showError(c)};a.getValues=function(){return b.getValues()};a.getItems=function(){return b.getItems()};a.getEntryValue=function(){return b.getEntryValue()};a.createFixedTag=function(c){b.createFixedTag(c)};a.createTag=function(c){b.createTag(c)};a.setLabel=function(c){b.setLabel(c)};a.setFocus=function(){b.setFocus()};a.removeItem=function(c){b.removeItem(c)};a.removeLastItem=function(){b.removeLastItem()};a.removeFirstItem=function(){b.removeFirstItem()};a.removeAllItems=function(){b.removeAllItems()};a.setConfig=function(c){b.setConfig(c)};a.setTooltip=function(c){b.setTooltip(c)};a.showTooltip=function(c){b.showTooltip(c)};a.hideTooltip=function(){b.hideTooltip()};a.disable=function(){b.disable()};a.enable=function(){b.enable()};b.connect("smartentrychanged",function(c){a.emit("smartentrychanged",c)});b.connect("valueremoved",function(c){a.emit("valueremoved",c)});b.connect("valueselected",function(c){a.emit("valueselected",c)});b.connect("valueexisted",function(c){a.emit("valueexisted",c)});b.connect("changed",function(c){a.emit("changed",c)});b.connect("blurred",function(){a.emit("blurred")});return a};gobject.signalNew("smartentrychanged",YK.Scroller,null,null,[]);gobject.signalNew("valueremoved",YK.Scroller,null,null,[]);gobject.signalNew("valueselected",YK.Scroller,null,null,[]);gobject.signalNew("valueexisted",YK.Scroller,null,null,[]);gobject.signalNew("changed",YK.Scroller,null,null,[]);gobject.signalNew("blurred",YK.Scroller,null,null,[]);YK.SmartEntryMediator=function(a){YK.DropDownMediator.apply(this,[a]);this._keyControll=new YK.SmartEntryKeyControll(this);this._tagRendere=new YK.SmartEntryTagRendere(this)};YK.SmartEntryMediator.prototype=new YK.DropDownMediator();YK.SmartEntryMediator.prototype.constructor=YK.SmartEntryMediator;YK.SmartEntryMediator.prototype.tagRendereCreateFixedTag=function(a){return this._tagRendere.createFixedTag(a)};YK.SmartEntryMediator.prototype.tagRendereCreateTag=function(a){return this._tagRendere.createTag(a)};YK.SmartEntryMediator.prototype.tagRendereBindValueObj=function(a,b){this._tagRendere.bindValueObj(a,b)};YK.SmartEntryMediator.prototype.tagRendereRemoveTag=function(a){this._tagRendere.removeTag(a)};YK.SmartEntryMediator.prototype.tagRendereSelectTag=function(a){this._tagRendere.selectTag(a);this._mainView.__hideEntry()};YK.SmartEntryMediator.prototype.smartEntryemitValueRemovedSigna=function(a){this._mainView.emit("valueremoved",a)};YK.SmartEntryMediator.prototype.tagRendereUnSelectTags=function(){this._tagRendere.unSelectTags()};YK.SmartEntryMediator.prototype.tagRendereIsTagExisted=function(){return this._tagRendere.isTagExisted()};YK.SmartEntryMediator.prototype.tagRendereIsPreviousTagExisted=function(){return this._tagRendere.isPreviousTagExisted()};YK.SmartEntryMediator.prototype.tagRendereIsNextTagExisted=function(){return this._tagRendere.isNextTagExisted()};YK.SmartEntryMediator.prototype.tagRendereIsFixedTag=function(a){return this._tagRendere.isFixedTag(a)};YK.SmartEntryMediator.prototype.tagRendereGetSelectedTag=function(){return this._tagRendere.getSelectedTag()};YK.SmartEntryMediator.prototype.tagRenderRemoveTagByIndex=function(a){this._tagRendere.removeTagByIndex(a)};YK.SmartEntryMediator.prototype.tagRendereRemoveLastItem=function(){this._tagRendere.removeLastTag()};YK.SmartEntryMediator.prototype.tagRendereRemoveFirstTag=function(){this._tagRendere.removeFirstTag()};YK.SmartEntryMediator.prototype.tagRendereRemoveAllTags=function(){this._tagRendere.removeAllTags()};YK.SmartEntryKeyControll=function(a){YK.KeyControll.apply(this);this._host=a};YK.SmartEntryKeyControll.prototype=new YK.KeyControll();YK.SmartEntryKeyControll.prototype.constructor=YK.SmartEntryKeyControll;YK.SmartEntryKeyControll.prototype.isCtrlAKeyPressed=function(a){return(a.which==YK.A_KEY||a.which==YK.CAP_A_KEY)&&a.ctrlKey};YK.SmartEntryKeyControll.prototype.fireLeftArrowKey=function(){var d=this._host.tagRendereIsTagExisted();if(!d){return}var b=this._host.tagRendereIsPreviousTagExisted();if(!b){return}var c=this._host.tagRendereIsFixedTag(b);if(c){return}var a=b||this._host.tagRendereGetSelectedTag();this._host.tagRendereSelectTag(a)};YK.SmartEntryKeyControll.prototype.fireRightArrowKey=function(){var a=!this._host.tagRendereIsTagExisted()||!this._host.tagRendereGetSelectedTag();if(a){return}var b=this._host.tagRendereIsNextTagExisted();if(!b){this._host.mainViewShowEntry();return}this._selectTag(b)};YK.SmartEntryKeyControll.prototype._selectTag=function(a){a=a||this._host.tagRendereGetSelectedTag();this._host.tagRendereSelectTag(a)};YK.SmartEntryKeyControll.prototype.fireBackSpace=function(){var d=this._host.mainViewGetEntryValue();var c=this._host.mainViewGetTags();var a=c.length;if(a<1){return}var f=c[a-1];var b=a>0&&d==""&&f.childNodes[0].className!="yk_smart_entry_drop_down_fixed_tag";if(!b){return}if(f.selected){this._host.tagRendereRemoveTag(f)}else{this._host.tagRendereSelectTag(f)}};YK.SmartEntryKeyControll.prototype.fireDeleteKey=function(){this.fireBackSpace()};YK.SmartEntryTagRendere=function(a){this._host=a;this._tags=this._host.mainViewGetTags();this._selectedTag=null};YK.SmartEntryTagRendere.prototype.getSelectedTag=function(){return this._selectedTag};YK.SmartEntryTagRendere.prototype.setSelectedTag=function(a){this._selectedTag=a};YK.SmartEntryTagRendere.prototype.bindValueObj=function(a,b){a.valueObj=b};YK.SmartEntryTagRendere.prototype.createFixedTag=function(c){var b=YK.domBuilder.create({tag:"div",className:"yk_smart_entry_drop_down_tag_holder"});var a=YK.domBuilder.create({tag:"span",append:b,text:c,className:"yk_smart_entry_drop_down_fixed_tag"});return b};YK.SmartEntryTagRendere.prototype.createTag=function(f){var a=YK.domBuilder.create({tag:"div",className:"yk_smart_entry_drop_down_tag_holder"});var d=YK.domBuilder.create({tag:"span",append:a,text:f});var c=YK.domBuilder.create({tag:"div",append:a,className:"yk_smart_entry_drop_down_close"});var b=this;YK.Event.addDomListener(c,"click",function(g){b.removeTag(a)},false);a.selected=false;return a};YK.SmartEntryTagRendere.prototype.unSelectTags=function(){var a=this._tags;for(var b=a.length;b--;){if(a[b].selected==true){a[b].selected=false;a[b].className="yk_smart_entry_drop_down_tag_holder"}}this._selectedTag=null};YK.SmartEntryTagRendere.prototype.unSelectTag=function(){if(this._selectedTag){this._selectedTag.selected=false;this._selectedTag.className="yk_smart_entry_drop_down_tag_holder";this._selectedTag=null}};YK.SmartEntryTagRendere.prototype.selectTag=function(a){this.unSelectTag();this._selectedTag=a;this._selectedTag.selected=true;this._selectedTag.className="yk_smart_entry_drop_down_tag_selected"};YK.SmartEntryTagRendere.prototype.selectTags=function(){var b=this._tags;for(var c=b.length;c--;){var a=b[c];if(a.firstChild.className=="yk_smart_entry_drop_down_fixed_tag"){continue}a.selected=true;a.className+=" yk_smart_entry_drop_down_tag_selected"}};YK.SmartEntryTagRendere.prototype.isTagExisted=function(){var a=this._tags;return a.length==0?false:true};YK.SmartEntryTagRendere.prototype.isNextTagExisted=function(){return this._selectedTag.nextSibling};YK.SmartEntryTagRendere.prototype.isPreviousTagExisted=function(){var b=this._tags;var a=this._selectedTag?this._selectedTag.previousSibling:b[b.length-1];return a};YK.SmartEntryTagRendere.prototype.isFixedTag=function(a){return YK.Util.isMatched("yk_smart_entry_drop_down_fixed_tag",a.firstChild.className)};YK.SmartEntryTagRendere.prototype.removeTag=function(a){this._host.smartEntryemitValueRemovedSigna(a.textContent);a.parentNode.removeChild(a);this._host.mainViewShowEntry();this.unSelectTags()};YK.SmartEntryTagRendere.prototype.removeTagByIndex=function(b){var d=this._tags.length;var a=this._tags[b];var c=d<=0||b>d||b<=0||a===undefined;if(c){return}this.removeTag(a)};YK.SmartEntryTagRendere.prototype.removeLastTag=function(){var c=this._tags.length;var b=c===0;if(b){return}var a=this._tags[c-1];this.removeTag(a)};YK.SmartEntryTagRendere.prototype.removeFirstTag=function(){var c=this._tags.length;var b=c===0;if(b){return}var a=this._tags[0];this.removeTag(a)};YK.SmartEntryTagRendere.prototype.removeAllTags=function(){var a=this._tags.length;for(var b=a;b--;){var c=this._tags[b];this.removeTag(c)}};YK.SmartEntryBase=function(){YK.Widget.apply(this);this.SMARTENTRYDROPDOWN_SMARTENTRYCHANGED="smartentrychanged";this.SMARTENTRYDROPDOWN_VALUESELECTED="valueselected";this.SMARTENTRYDROPDOWN_VALUEREMOVED="valueremoved";this.SMARTENTRYDROPDOWN_VALUEEXISTED="valueexisted";this.SMARTENTRYDROPDOWN_CHANGED="changed";this.SMARTENTRYDROPDOWN_BLURRED="blurred";this._minWidth=this._width=150;this._minHeight=this._height=10;this._entryWidth=100;this._textBoxError=false;this._ismouseMoved=false;this._isParentSignalHandled=false;this._isTagRedundantAllowed=false;this._render=function(){this._domObj.className+=" yk_smart_entry_base";this._domObj.tabIndex="0";this._domObj.id="yk_smart_entry_base_"+this._id;this._holder=YK.domBuilder.create({tag:"div",append:this._domObj,className:"yk_smart_entry_tag_entry_holder"});this._tagHolder=YK.domBuilder.create({tag:"div",append:this._holder,className:"yk_smart_entry_tag_holder"});this._entryHolder=YK.domBuilder.create({tag:"div",append:this._holder,className:"yk_smart_entry_entry_holder"});this._labelEntry=YK.domBuilder.create({tag:"span",append:this._entryHolder,className:"yk_smart_entry_entry_holder_label"});this._entry=YK.domBuilder.create({tag:"input",append:this._entryHolder,className:"yk_smart_entry_entry_holder_entry"});this._entry.id="yk_smart_entry_entry_holder_entry_"+this._id};this._render();this._smartEntryMediator=new YK.SmartEntryMediator(this)};YK.SmartEntryBase.prototype=new YK.Widget();YK.SmartEntryBase.prototype.constructor=YK.SmartEntryBase;YK.SmartEntryBase.prototype.showError=function(a){this._textBoxError=(typeof a!=="undefined"&&typeof a==="boolean")?a:this._textBoxError;if(this._textBoxError){this._domObj.className+=" yk_smart_entry_onerror"}else{this._domObj.className="yk_widget yk_smart_entry_base"}};YK.SmartEntryBase.prototype.disable=function(){var a=this._tagHolder.childNodes;for(var b=a.length;b--;){a[b].className+=" yk_smart_entry_drop_down_tag_holder_disabled"}this._removeHandlers()};YK.SmartEntryBase.prototype.enable=function(){var a=this._tagHolder.childNodes;for(var b=a.length;b--;){a[b].className="yk_smart_entry_drop_down_tag_holder"}this._addHandlers()};YK.SmartEntryBase.prototype._resetEntry=function(){this._entry.focus();this._entry.value="";this._entry.style.width=this._entryWidth+5+"px"};YK.SmartEntryBase.prototype._createTooltip=function(a){var b=new YK.Tooltip(this._entry,a,YK.POSITION_RIGHT_TOP);return b};YK.SmartEntryBase.prototype.handleEntrySelection=function(){if(!this._isTagRedundantAllowed){this._handleSelected();return}var a=this._entry.value;if(!this._isTagValueExisted(a)){this._handleSelected()}else{this._showErrowTag()}};YK.SmartEntryBase.prototype._handleSelected=function(){this._renderTag();this._resetEntry();this.__showLabel();var b=this.getItems().length;var a=this.getItems()[b-1];this.emit("valueselected",a);this.showTooltip(false);this._resetNoTagValueHighlight();this.__showEntry();this._entry.focus()};YK.SmartEntryBase.prototype._getNearestScrollerY=function(){return this._domObj.parentNode.scrollTop||0};YK.SmartEntryBase.prototype._isTagValueExisted=function(a){var d=this.getValues();for(var c=0;c<d.length;c++){var b=YK.Util.trim(a).toLowerCase();var f=YK.Util.trim(d[c]).toLowerCase();if(f==b){return true}}return false};YK.SmartEntryBase.prototype._getExistedNode=function(b){var f=this._holder.childNodes[0].childNodes;var a=f.length;for(var d=0;d<a;d++){var c=YK.Util.trim(b).toLowerCase();var g=YK.Util.trim(f[d].textContent).toLowerCase();if(g===c){return f[d]}}};YK.SmartEntryBase.prototype.setFocus=function(){this.__showEntry();this._entry.value="";this._entry.focus();this.__showLabel()};YK.SmartEntryBase.prototype.__showEntry=function(){this._entryHolder.style.display="inline-block";this._entry.parentNode.style.visibility="visible"};YK.SmartEntryBase.prototype.__hideEntry=function(){this._entry.parentNode.style.visibility="hidden"};YK.SmartEntryBase.prototype.__hideLabel=function(){this._labelEntry.style.visibility="hidden"};YK.SmartEntryBase.prototype.__showLabel=function(){this._labelEntry.style.visibility=""};YK.SmartEntryBase.prototype.getValues=function(){var d=this._holder.childNodes[0].childNodes;var a=d.length;var b=[];for(var c=0;c<a;c++){b.push(d[c].childNodes[0].innerHTML)}return b};YK.SmartEntryBase.prototype._resetNoTagValueHighlight=function(){var c=this._holder.childNodes[0].childNodes;var a=c.length;for(var b=0;b<a;b++){if(/yk_smart_entry_drop_down_tag_error/.test(c[b].className)){c[b].className="yk_smart_entry_drop_down_tag_holder"}}};YK.SmartEntryBase.prototype.setConfig=function(a){this._objectConfigValue=a;for(var b in a){if(b==="NoTagRedundant"){this._isTagRedundantAllowed=a[b]}}};YK.SmartEntryBase.prototype.removeItem=function(a){this._smartEntryMediator.tagRenderRemoveTagByIndex(a)};YK.SmartEntryBase.prototype.removeLastItem=function(){this._smartEntryMediator.tagRendereRemoveLastItem()};YK.SmartEntryBase.prototype.removeFirstItem=function(){this._smartEntryMediator.tagRendereRemoveFirstTag()};YK.SmartEntryBase.prototype.removeAllItems=function(){this._smartEntryMediator.tagRendereRemoveAllTags()};YK.SmartEntryBase.prototype.getItems=function(){var d=this._tagHolder.childNodes;var a=d.length;var b=[];for(var c=0;c<a;c++){b.push(d[c]["valueObj"])}if(YK.Util.trim(this._entry.value)){b.push({display:this._entry.value})}return b};YK.SmartEntryBase.prototype.getEntryValue=function(){var a=YK.Util.trim(this._entry.value);if(a.length>0){return a}return null};YK.SmartEntryBase.prototype.createFixedTag=function(b){var a=this._smartEntryMediator.tagRendereCreateFixedTag(b.display);this._tagHolder.appendChild(a);this._smartEntryMediator.tagRendereBindValueObj(a,b)};YK.SmartEntryBase.prototype.createTag=function(b){var a=this._smartEntryMediator.tagRendereCreateTag(b.display);this._tagHolder.appendChild(a);this._smartEntryMediator.tagRendereBindValueObj(a,b)};YK.SmartEntryBase.prototype.setLabel=function(a){this._labelEntry.innerHTML="";this._labelEntry.appendChild(document.createTextNode(a));this.__updateEntryWidth()};YK.SmartEntryBase.prototype.__updateEntryWidth=function(){var b=this._labelEntry.cloneNode(true);var a=YK.Util.fullWidth(b);if(a<100){a=100}this._entryWidth=a;this._entry.style.width=a+10+"px";this._entry.parentNode.style.width=a+10+"px"};YK.SmartEntryBase.prototype.resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px"};YK.SmartEntryBase.prototype.resizeHeight=function(a){this._height=a;this._domObj.style.height=a-5+"px"};gobject.signalNew("_rendersubnodes",YK.SmartEntryBase,null,null,[]);gobject.signalNew("_setselectedvalues",YK.SmartEntryBase,null,null,[]);gobject.signalNew("_search",YK.SmartEntryBase,null,null,[]);gobject.signalNew("smartentrychanged",YK.SmartEntryBase,null,null,[]);gobject.signalNew("valueremoved",YK.SmartEntryBase,null,null,[]);gobject.signalNew("valueselected",YK.SmartEntryBase,null,null,[]);gobject.signalNew("valueexisted",YK.SmartEntryBase,null,null,[]);gobject.signalNew("changed",YK.SmartEntryBase,null,null,[]);gobject.signalNew("blurred",YK.SmartEntryBase,null,null,[]);YK.SmartEntryDropDown=function(){YK.SmartEntryBase.apply(this);this._minWidth=this._width=150;this._minHeight=this._height=10;this._entryWidth=100;this._textBoxError=false;this._ismouseMoved=false;this._isParentSignalHandled=false};YK.SmartEntryDropDown.prototype=new YK.SmartEntryBase();YK.SmartEntryDropDown.prototype.constructor=YK.SmartEntryDropDown;YK.SmartEntryDropDown.prototype.setModel=function(a){this._controller.setModel(a)};YK.SmartEntryDropDown.prototype._renderDropDown=function(b,a){this.__hideLoading();var c=this._smartEntryMediator.dropDownConstruct(b,a)};YK.SmartEntryDropDown.prototype.renderDropDownSubRowNodes=function(b,a){this.emit("_rendersubnodes",b,a)};YK.SmartEntryDropDown.prototype.handleRowNodeSelection=function(a){if(!this._isTagRedundantAllowed){this._handleRowNodeSelected();return}if(!this._isTagValueExisted(a.innerHTML)){this._handleRowNodeSelected()}else{this._showErrowTag()}};YK.SmartEntryDropDown.prototype._handleSelected=function(){this._renderTag();this.__hideDropDown();this._resetEntry();this.__showLabel();var b=this.getItems().length;var a=this.getItems()[b-1];this.emit("valueselected",a);this.showTooltip(false);this._resetNoTagValueHighlight();this.__showEntry();this._entry.focus()};YK.SmartEntryDropDown.prototype._renderTag=function(){var c=YK.Util.trim(this._entry.value);var a=this._smartEntryMediator.tagRendereCreateTag(c);var b=this._smartEntryMediator.dropDownGetSelectedRow();var d=b!==null?b.valueObj:{display:c};this._smartEntryMediator.tagRendereBindValueObj(a,d);this._tagHolder.appendChild(a)};YK.SmartEntryDropDown.prototype._showErrowTag=function(){var b=this._smartEntryMediator.dropDownGetSelectedRow();var c=b?b.innerHTML:this._entry.value;this.emit("valueexisted",c);var a=this._getExistedNode(c);a.className+=" yk_smart_entry_drop_down_tag_error"};YK.SmartEntryDropDown.prototype._clearDropDown=function(){this._smartEntryMediator.dropDownClear()};YK.SmartEntryDropDown.prototype._handleRowNodeSelected=function(){var a=this._smartEntryMediator.dropDownGetSelectedRow();this.emit("_dropdown_item_selected",a.modelId);this._entry.value=a.firstChild.nodeValue;this._handleSelected()};YK.SmartEntryDropDown.prototype.setSelectedRowNodeValueObj=function(a){this._smartEntryMediator.dropDownSetSelectedRowNodeValueObj(a)};YK.SmartEntryDropDown.prototype._resetDropDownPosition=function(){var d=YK.Util.pageY(this._domObj);var c=YK.Util.pageX(this._domObj);var g=parseInt(this._holder.offsetHeight);var b=this._getNearestScrollerY();var a=c+1,f=d+g+5-b;this._smartEntryMediator.dropDownPosition(a,f)};YK.SmartEntryDropDown.prototype._initEvent=function(){var a=this;var b=YK.Event;this._handlers.push(b.addDomListener(this._domObj,"focus",function(){a.setFocus()}));this._handlers.push(b.addDomListener(this._domObj,"click",function(c){a.setFocus();b.stopBubble(c)}));this.__bindInputEvent();b.addDomListener(document.body,"click",function(c){a.__hideDropDown()});b.addDomListener(this._entry,"keydown",function(){a.emit("changed",a._entry.value);a._resetNoTagValueHighlight();a.showTooltip(false)});b.addDomListener(this._entry,"blur",function(){a.emit("blurred");a.showTooltip(false);a._resetNoTagValueHighlight()});b.addPublicListener(this,"deactivated",function(){a.__hideDropDown()})};YK.SmartEntryDropDown.prototype._hilightRow=function(a){this._smartEntryMediator.dropDownHilightRowById(a)};YK.SmartEntryDropDown.prototype._hideEntryAndDropDown=function(){this.__hideEntry();this.__hideDropDown()};YK.SmartEntryDropDown.prototype.__hideEntry=function(){this._entry.parentNode.style.visibility="hidden"};YK.SmartEntryDropDown.prototype._appendDropDown=function(a){this.__hideLoading()};YK.SmartEntryDropDown.prototype.__showLoading=function(){this._smartEntryMediator.dropDownShowLoading()};YK.SmartEntryDropDown.prototype.__hideLoading=function(){this._smartEntryMediator.dropDownHideLoading()};YK.SmartEntryDropDown.prototype.__showDropDown=function(){this._smartEntryMediator.dropDownShow()};YK.SmartEntryDropDown.prototype.__hideDropDown=function(){this._smartEntryMediator.dropDownHide()};YK.SmartEntryDropDown.prototype.resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._smartEntryMediator.dropDownResizeWidth(a-2)};YK.SmartEntryDropDown.prototype.resizeHeight=function(a){this._height=a;this._domObj.style.height=a-5+"px"};gobject.signalNew("_dropdown_item_selected",YK.SmartEntryDropDown,null,null,[]);YK.SmartEntryDropDownFixedModel=function(){YK.SmartEntryDropDown.apply(this);this._initEvent();this._controller=new YK.SmartEntryDropDownFixedModelController(this)};YK.SmartEntryDropDownFixedModel.prototype=new YK.SmartEntryDropDown();YK.SmartEntryDropDownFixedModel.prototype.constructor=YK.SmartEntryDropDownFixedModel;YK.SmartEntryDropDownFixedModel.prototype.__bindInputEvent=function(){var c=YK.Event,a=this;var b="";c.addDomListener(this._entry,"keypress",function(d){b=a._entry.value});c.addDomListener(this._entry,"keyup",function(f){if(a._smartEntryMediator.keyControllIsCtrlAKeyPressed(f)){if(b){return}a._selectAllTags();return}switch(f.keyCode){case YK.DOWN_ARROW_KEY:a._smartEntryMediator.keyControllFireDownArrowKey();return;case YK.UP_ARROW_KEY:a._smartEntryMediator.keyControllFireUpArrowKey();return;case YK.LEFT_ARROW_KEY:a._smartEntryMediator.keyControllFireLeftArrowKey();return;case YK.RIGHT_ARROW_KEY:a._smartEntryMediator.keyControllFireRightArrowKey();return;case YK.ENTER_KEY:a._smartEntryMediator.keyControllFireEnterKey();return;case YK.DELETE_KEY:a._smartEntryMediator.keyControllFireDeleteKey();return;default:}if(((f.which==YK.A_KEY||f.which==YK.CAP_A_KEY)&&f.ctrlKey)||f.ctrlKey){a.__hideDropDown();return}if(f.keyCode==YK.BACKSPACE_KEY&&a._entry.value==""){a.__hideDropDown();return}if(a._entry.value){var d=a._tagHolder.lastChild&&a._tagHolder.lastChild.selected;if(d){a._smartEntryMediator.tagRendereUnSelectTags()}a.__hideLabel();a.__showDropDown();a._resetDropDownPosition();a.emit("_search",a._entry.value)}})};YK.SmartEntryDropDownFixedModelController=function(a){this._model=null;var b=this;this._render=function(d,c){var f=this.__mashupModel(d.getChildren());a._renderDropDown(f,c)};a.connect("_rendersubnodes",function(d,c){var f=b._model.getChildByPath(d);b._render(f,c)});a.connect("_search",function(d){var c=b._model.search(d);var f=c?c.getPath():"";a._hilightRow(f)});a.connect("_dropdown_item_selected",function(c){var d=b._model.getChildByPath(c);a.setSelectedRowNodeValueObj(d.getValue())})};YK.SmartEntryDropDownFixedModelController.prototype.setModel=function(a){this._model=a;this._render(this._model,null)};YK.SmartEntryDropDownFixedModelController.prototype.__mashupModel=function(b){var g=[],d,f;for(var c=0,a=b.length;c<a;c++){d=b[c];f=d.getChildren().length>0;g.push({display:d.getValue()["display"],hasChildNodes:f,path:d.getPath(),valueObject:d.getValue()})}return g};YK.SmartEntryDropDownDynamicModel=function(a){YK.SmartEntryDropDown.apply(this);this._initEvent();this._controller=new YK.SmartEntryDropDownDynamicController(this)};YK.SmartEntryDropDownDynamicModel.prototype=new YK.SmartEntryDropDown();YK.SmartEntryDropDownDynamicModel.prototype.constructor=YK.SmartEntryDropDownDynamicModel;YK.SmartEntryDropDownDynamicModel.prototype.__bindInputEvent=function(){var c=YK.Event,a=this;var b="";this.__inputKeypressId=c.addDomListener(this._entry,"keypress",function(d){b=a._entry.value});this.__inputKeyupId=c.addDomListener(this._entry,"keyup",function(f){if(a._smartEntryMediator.keyControllIsCtrlAKeyPressed(f)){if(b){return}a._selectAllTags();return}switch(f.keyCode){case YK.DOWN_ARROW_KEY:a._smartEntryMediator.keyControllFireDownArrowKey();return;case YK.UP_ARROW_KEY:a._smartEntryMediator.keyControllFireUpArrowKey();return;case YK.LEFT_ARROW_KEY:a._smartEntryMediator.keyControllFireLeftArrowKey();return;case YK.RIGHT_ARROW_KEY:a._smartEntryMediator.keyControllFireRightArrowKey();return;case YK.ENTER_KEY:a._smartEntryMediator.keyControllFireEnterKey();return;case YK.DELETE_KEY:a._smartEntryMediator.keyControllFireDeleteKey();return;default:}if(((f.which==YK.A_KEY||f.which==YK.CAP_A_KEY)&&f.ctrlKey)||f.ctrlKey){a.__hideDropDown();return}if(f.keyCode==YK.BACKSPACE_KEY&&a._entry.value==""){a.__hideDropDown();return}if(a._entry.value){var d=a._tagHolder.lastChild&&a._tagHolder.lastChild.selected;if(d){a._smartEntryMediator.tagRendereUnSelectTags()}a.__hideLabel();a.__showDropDown();a._resetDropDownPosition();a._clearDropDown();clearTimeout(a.__intervalId);a.__showLoading();a.__intervalId=setTimeout(function(){a.emit("smartentrychanged",a._entry.value)},500)}})};YK.SmartEntryDropDownDynamicController=function(a){var b=this;this._view=a;this._model=null;this._render=function(d,c){var f=this.__mashupModel(d.getChildren());a._renderDropDown(f,c)};this._view.connect("_rendersubnodes",function(d,c){var f=b._model.getChildByPath(d);b._render(f,c)});this._view.connect("_search",function(d){var c=b._model.search(d);var f=c?c.getPath():"";a._hilightRow(f)});this._view.connect("_dropdown_item_selected",function(c){var d=b._model.getChildByPath(c);b._view.setSelectedRowNodeValueObj(d.getValue())})};YK.SmartEntryDropDownDynamicController.prototype.setModel=function(a){this._model=a;var b=this.__mashupModel(this._model.getChildren());this._view._renderDropDown(b,null)};YK.SmartEntryDropDownDynamicController.prototype.__mashupModel=function(b){var g=[],d,f;for(var c=0,a=b.length;c<a;c++){d=b[c];f=d.getChildren().length>0;g.push({display:d.getValue()["display"],hasChildNodes:f,path:d.getPath(),valueObject:d.getValue()})}return g};YK.SmartEntry=function(){YK.SmartEntryBase.apply(this);this._render();this._initEvent()};YK.SmartEntry.prototype=new YK.SmartEntryBase();YK.SmartEntry.prototype.constructor=YK.SmartEntry;YK.SmartEntry.prototype._showErrowTag=function(){var b=this._entry.value;this.emit("valueexisted",b);var a=this._getExistedNode(b);a.className+=" yk_smart_entry_drop_down_tag_error"};YK.SmartEntry.prototype._renderTag=function(){var b=YK.Util.trim(this._entry.value);var a=this._smartEntryMediator.tagRendereCreateTag(b);a.valueObj={display:b};this._tagHolder.appendChild(a)};YK.SmartEntry.prototype.__bindInputEvent=function(){var c=YK.Event,a=this;var b="";c.addDomListener(this._entry,"keypress",function(d){b=a._entry.value});c.addDomListener(this._entry,"keyup",function(f){if(a._smartEntryMediator.keyControllIsCtrlAKeyPressed(f)){if(b){return}a._selectAllTags();return}switch(f.keyCode){case YK.LEFT_ARROW_KEY:a._smartEntryMediator.keyControllFireLeftArrowKey();return;case YK.RIGHT_ARROW_KEY:a._smartEntryMediator.keyControllFireRightArrowKey();return;case YK.ENTER_KEY:a._smartEntryMediator.keyControllFireEnterKey();return;case YK.DELETE_KEY:a._smartEntryMediator.keyControllFireDeleteKey();return;default:}if(a._entry.value){var d=a._tagHolder.lastChild&&a._tagHolder.lastChild.selected;if(d){a._smartEntryMediator.tagRendereUnSelectTags()}a.__hideLabel()}})};YK.SmartEntry.prototype._initEvent=function(){var a=this;var b=YK.Event;this._handlers.push(b.addDomListener(this._domObj,"focus",function(){a.setFocus()}));this._handlers.push(b.addDomListener(this._domObj,"click",function(c){a.setFocus();b.stopBubble(c)}));this.__bindInputEvent();b.addDomListener(this._entry,"keydown",function(){a.emit("changed",a._entry.value);a._resetNoTagValueHighlight();a.showTooltip(false)});b.addDomListener(this._entry,"blur",function(){a.emit("blurred");a.showTooltip(false);a._resetNoTagValueHighlight()})};YK.UploadButton=function(b){YK.Button.apply(this,[b]);var a=this;this._imageShapeDom=null;this.UPLOADBUTTON_FILECHANGED="";this.UPLOADBUTTON_MOUSEOVER="";this.UPLOADBUTTON_MOUSEOUT="";this._render=function(){this._domObj.className+=" yk_upload_button";this._domObj.style.display="";this._domImage=YK.domBuilder.create({tag:"div",append:this._domObj,className:"yk_uploadbutton_image"});this._className=this._domObj.className;this._inputFile=YK.domBuilder.create({tag:"input",type:"file",append:this._domObj,className:"yk_upload_button_input_file"});this._inputFile.style.width=this._width+"px";this._inputFile.style.height=this._height+"px";this._inputFile.id="yk_upload_button_input_file_"+this._id};this._render();YK.Event.addDomListener(this._inputFile,"change",function(){a.emit("filechanged",a._inputFile.value)});YK.Event.addDomListener(this._domObj,"mouseover",function(){a.emit("mouseover")});YK.Event.addDomListener(this._domObj,"mouseout",function(){a.emit("mouseout")})};YK.UploadButton.prototype=new YK.Button();YK.UploadButton.prototype.constructor=YK.UploadButton;YK.UploadButton.prototype.setName=function(a){this._inputFile.setAttribute("name",a)};YK.UploadButton.prototype.getName=function(){return this._inputFile.name};YK.UploadButton.prototype.setText=function(a){if(a!=null||typeof a!=="undefined"){this.setTextLabel(a);this._inputFile.style.width=this._width-2+"px"}};YK.UploadButton.prototype.getChildNode=function(){return this._inputFile};YK.UploadButton.prototype.showLoading=function(){this._labelDom.style.display="none";this._inputFile.style.display="none";this._domImage.style.display="none";this._loading=YK.domBuilder.create({tag:"div",className:"yk_button_loading",append:this._domObj})};YK.UploadButton.prototype.hideLoading=function(){this._labelDom.style.display="";this._imageDom.style.display="";this._inputFile.style.display="";this._domImage.style.display="block";if(this._loading){this._loading.style.display="none";this._domObj.removeChild(this._loading);this._loading=null}};YK.UploadButton.prototype.setAsImage=function(a){if(this._imageShapeDom!==null){this._domImage.innerHTML="";this._imageShapeDom=null}this._imageShapeDom=a;this._domObj.className+=" yk_upload_button_with_image_shape";this.setTextLabel("");this._domImage.appendChild(a.getNode());a.resetSize(a._width,a._height);this._width=this._minWidth=a._width;this._height=this._minHeight=a._height;this.resizeWidth(a._width);this.resizeHeight(a._height);this.hideLoading()};YK.UploadButton.prototype._getActualImageSize=function(b){var c=b.getChildNode();var a=new Image();a.src=c.src;return[a.width,a.height]};YK.UploadButton.prototype._getPaddingAndBorderWidth=function(){var d=this._attribute;var a=0;var b=0;for(var c in d){if(c=="padding"){a=parseInt(d[c])*2}if(c=="border"){b=parseInt(d[c])*2}}return[a,b]};YK.UploadButton.prototype.setAttribute=function(d){this._attribute=d;var a=0;var b=0;for(var c in d){this._domObj.style[c]=d[c];if(c=="padding"){a=parseInt(d[c])}if(c=="border"){b=parseInt(d[c])}}this._domImage.style.top=a+"px";this._domImage.style.left=a+"px";this.resizeWidth(this._width);this.resizeHeight(this._height)};YK.UploadButton.prototype.disable=function(){this._inputFile.disabled=true;if(this._domImage.childNodes.length>0){this._domObj.className+=" yk_button_disabled yk_upload_button_disabled";this._imageShapeDom.getChildNode().style.opacity=0.5}else{this._domObj.className+=" yk_button_disabled"}this._inputFile.style.display="none";if(this._labelWidget!==null){this._labelWidget.setStyle({cursor:"default"})}};YK.UploadButton.prototype.enable=function(){this._inputFile.disabled=false;var a="yk_widget yk_container yk_button yk_upload_button";if(this._domImage.childNodes.length>0){a="yk_widget yk_container yk_upload_button";this._imageShapeDom.getChildNode().style.opacity=1}this._domObj.className=a;this._inputFile.style.display="";if(this._labelWidget!==null){this._labelWidget.setStyle({cursor:"default"})}};YK.UploadButton.prototype._resizeHeight=function(a){this._domObj.style.height=this._height+"px";this._height=a};YK.UploadButton.prototype._resizeWidth=function(a){this._domObj.style.width=a-this.borderWidth+"px";if(typeof this._domImage!=="undefined"){if(this._domImage.childNodes.length>0){this._domObj.style.width=a+"px"}}this._width=a};YK.UploadButton.prototype.resizeWidth=function(a){this.setWidth(a);this._positionImageLabel(a,this._height);this._inputFile.style.width=a+"px";this._domObj.style.width=a+"px";if(typeof this._domImage!=="undefined"){if(this._domImage.childNodes.length>0){this._imageShapeDom.resetSize(a,this._height);this._domObj.style.top="0px"}}};YK.UploadButton.prototype.resizeHeight=function(a){this.setHeight(a);this._positionImageLabel(this._width,a);var b=this._inputFile.style;b.height=a+"px";b.fontSize=a+"px";this._domObj.style.height=a+"px";if(this._domImage.childNodes.length>0){this._imageShapeDom.resetSize(this._width,a);this._domObj.style.top="0px"}};gobject.signalNew("filechanged",YK.UploadButton,null,null,[]);gobject.signalNew("mouseover",YK.UploadButton,null,null,[]);gobject.signalNew("mouseout",YK.UploadButton,null,null,[]);YK.Form=function(a){YK.Widget.apply(this);this._child=null;this._render=function(){this._domObj.className+=" yk_form";this._form=YK.domBuilder.create({tag:"form",append:this._domObj});var b="FORM-"+YK.LibAdapter.getGUID();this._form.setAttribute("id",b);this.setAttribute(a)};this._render()};YK.Form.prototype=new YK.Widget();YK.Form.prototype.constructor=YK.Form;YK.Form.prototype.setAttribute=function(a){var c=this._form;this._attributes=a;for(var b in a){c.setAttribute(b,a[b])}};YK.Form.prototype.add=function(b){if(!this._child){this._child=b;if(b._domObj){this._form.appendChild(b.getNode())}var a=this._getChildSize(b);this.resize(a[0],a[1])}};YK.Form.prototype.resize=function(b,a){this._resizeWidth(b);this._resizeHeight(a);if(this._child){this._child.resizeWidth(b);this._child.resizeHeight(a)}};YK.Form.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=this._width+"px"};YK.Form.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=this._height-2+"px"};YK.Form.prototype._getChildSize=function(c){var b=c.getWidth();var a=c.getHeight();return[b,a]};YK.Form.prototype.getMinWidth=function(){this._minWidth=this._child?this._child.getMinWidth():this._width;return this._minWidth};YK.Form.prototype.getMinHeight=function(){this._minHeight=this._child?this._child.getMinHeight():this._height;return this._minHeight};YK.Form.prototype.resizeWidth=function(b){var a=this.getMinWidth();var a=b>a?b:a;this.resize(a,this._height)};YK.Form.prototype.resizeHeight=function(a){var b=this.getMinHeight();var b=a>b?a:b;this.resize(this._width,b)};YK.LabelStore=function(){YK.Object.apply(this);this._modelType=YK.LabelStore;this.children=new Array()};YK.LabelStore.prototype=new YK.Object();YK.LabelStore.prototype.constructor=YK.LabelStore;YK.LabelStore.prototype.append=function(b){var a=new YK.TreeIter(this.children.length.toString()+":");a.setRow(b);this.add(a);return a};YK.LabelStore.prototype.getChildByPath=function(b){for(var a=this.children.length;a--;){var c=this.children[a];if(c.getPath()===b){return c}}return null};YK.LabelStore.prototype.getModelType=function(){return this._modelType};YK.LabelStore.prototype.getChildren=function(){return this.children};YK.LabelStore.prototype.add=function(a){this.children.push(a)};YK.JustifiedLabel=function(a){YK.Widget.apply(this);this.JUSTIFIEDLABEL_CLICKED="clicked";this.JUSTIFIEDLABEL_FOCUSED="focused";this.JUSTIFIEDLABEL_MOUSEOVER="mouseover";this.JUSTIFIEDLABEL_BLURRED="blurred";this.JUSTIFIEDLABEL_MOUSEOUT="mouseout";this.JUSTIFIEDLABEL_REFRESHED="refreshed";this.JUSTIFIEDLABEL_CLEARED="cleared";this._labelValues=a;this._width=this._minWidth=16;this._height=this._minHeight=16;this._rowHeight=20;this._seperatorWidth=80;this._applyYellow=false;this._render=function(){this._domObj.className+=" yk_justified_label";this._domObj.setAttribute("id","yk_justified_label"+this._id)};this._render()};YK.JustifiedLabel.prototype=new YK.Widget();YK.JustifiedLabel.prototype.constructor=YK.JustifiedLabelgtk;YK.JustifiedLabel.prototype._clearChild=function(){this._domObj.innerHTML=""};YK.JustifiedLabel.prototype.setSeparatorWidth=function(a){this._seperatorWidth=a};YK.JustifiedLabel.prototype.setModel=function(a){this._clearChild();new YK.JustifiedLabelController(this,a);this._resize();this.emit("refreshed")};YK.JustifiedLabel.prototype.clearModel=function(){this._clearChild();this._width=this._minWidth=0;this._height=this._minHeight=0;this.emit("cleared")};YK.JustifiedLabel.prototype.constructLabelRows=function(f){this._labelValues=f;var a=this._domObj;this._rowNode;for(var g=0,h=f.length;g<h;g++){var l=f[g]["leftLabel"];var d=f[g]["rightLabel"];var b=YK.domBuilder.create({append:a,tag:"div","class":"yk_justified_label_row",tabIndex:"0",id:"yk_justified_label_row_"+g+"_"+this._id});this._rowNode=b;b.style.height=this._rowHeight+"px";this._dotsSeperator=YK.domBuilder.create({append:b,tag:"div","class":"yk_justified_label_row_dot_separator_node"});var k=YK.domBuilder.create({append:b,tag:"div","class":"yk_justified_label_row_left_node"});k.innerHTML=l.getText();var c=YK.domBuilder.create({append:b,tag:"div","class":"yk_justified_label_row_right_node"});c.innerHTML=d.getText();this._handleEvents(b,d.getText())}this._resize()};YK.JustifiedLabel.prototype._handleEvents=function(b,d){var a=this;var c=YK.Event;c.addDomListener(b,"mouseover",function(g){a.emit("mouseover",d);a._setYellowBorderLeft(b);c.stopBubble(g)});c.addDomListener(b,"mouseout",function(){a.emit("mouseout",d);a._resetYellowBorderLeft(b)});c.addDomListener(b,"click",function(g){a.emit("clicked",d);c.stopBubble(g)});var a=this,f=false;YK.Event.addDomListener(b,"keyup",function(g){if(g.keyCode==YK.ENTER_KEY){a.emit("clicked",d)}},false);YK.Event.addDomListener(b,"mousedown",function(){this.style.border="";f=true},false);YK.Event.addDomListener(b,"mouseup",function(){this.style.border="";f=false},false);YK.Event.addDomListener(b,"focus",function(g){if(!f){this.style.border="1px dotted black"}a.emit("focused",d);a._setYellowBorderLeft(b);c.stopBubble(g)},false);YK.Event.addDomListener(b,"blur",function(g){this.style.border="";a._resetYellowBorderLeft(b);a.emit("blurred",d)},false)};YK.JustifiedLabel.prototype._getMaxRowWidth=function(){var b=this._labelValues;var f=b[0]["leftLabel"].getMinWidth()+this._seperatorWidth+b[0]["rightLabel"].getMinWidth();for(var c=1,a=this._labelValues.length;c<a;c++){var d=b[c]["leftLabel"].getMinWidth()+this._seperatorWidth+b[c]["rightLabel"].getMinWidth();f=d>f?d:f}return f};YK.JustifiedLabel.prototype._resizeWidth=function(a){this._minWidth=this._width=a;this._domObj.style.width=a+"px"};YK.JustifiedLabel.prototype._setYellowBorderLeft=function(a){a.style.borderLeft="4px solid #FFCC00";a.childNodes[0].style.marginLeft="8px";a.childNodes[1].style.marginLeft="8px"};YK.JustifiedLabel.prototype._resetYellowBorderLeft=function(a){a.style.borderLeft="0";a.childNodes[0].style.marginLeft="0";a.childNodes[1].style.marginLeft="0"};YK.JustifiedLabel.prototype._resizeHeight=function(a){this._minHeight=this._height=a;this._domObj.style.height=a+"px"};YK.JustifiedLabel.prototype._resize=function(){var b=this._getMaxRowWidth();this._resizeWidth(b);var a=this._labelValues.length*this._rowHeight;this._resizeHeight(a)};YK.JustifiedLabel.prototype.getMinWidth=function(){return this._minWidth};YK.JustifiedLabel.prototype.getMinHeight=function(){return this._minHeight};YK.JustifiedLabel.prototype.setAttribute=function(a){this._attribute=a;this._applyAttribute()};YK.JustifiedLabel.prototype._applyAttribute=function(){var b=this._domObj.childNodes.length;for(el in this._attribute){if(el=="backgroundColor"){for(var a=0;a<b;a++){this._domObj.style[el]=this._attribute[el];this._domObj.childNodes[a].childNodes[1].style[el]=this._attribute[el];this._domObj.childNodes[a].childNodes[2].style[el]=this._attribute[el]}}else{this._domObj.style[el]=this._attribute[el]}}};YK.JustifiedLabel.prototype.setWidth=function(a){this._width=this._minWidth=a;this._resizeWidth(a)};YK.JustifiedLabel.prototype.resizeWidth=function(a){this._width=a;this._resizeWidth(a)};YK.JustifiedLabel.prototype.resetMinWidth=function(a){this._width=this._minWidth=a;this._resizeWidth(a)};YK.JustifiedLabel.prototype.resetMinHeight=function(a){this._height=this._minHeight=a;this._resizeHeight(a)};YK.JustifiedLabel.prototype.resizeHeight=function(a){this._height=a;this._resizeHeight(a)};gobject.signalNew("clicked",YK.JustifiedLabel,[],null,null);gobject.signalNew("focused",YK.JustifiedLabel,[],null,null);gobject.signalNew("mouseover",YK.JustifiedLabel,[],null,null);gobject.signalNew("blurred",YK.JustifiedLabel,[],null,null);gobject.signalNew("mouseout",YK.JustifiedLabel,[],null,null);gobject.signalNew("refreshed",YK.JustifiedLabel,[],null,null);gobject.signalNew("cleared",YK.JustifiedLabel,[],null,null);YK.JustifiedLabelController=function(a,c){this._view=a;this._model=c;var b=this._mashUpData(this._model);this._view.constructLabelRows(b)};YK.JustifiedLabelController.prototype._mashUpData=function(f){var d=f.getChildren(),b=[];for(var c=0,a=d.length;c<a;c++){b.push(d[c].getValue())}return b};YK.PopupWindow=function(c,b,a){switch(a){case YK.WINDOW_CONFIRM:return new YK.PopupWindowConfirm(c,b);break;case YK.WINDOW_WARNING:return new YK.PopupWindowWarning(c,b);break;case YK.WINDOW_INFO:return new YK.PopupWindowInfo(c,b);break;case YK.WINDOW_ERROR:return new YK.PopupWindowError(c,b);break;default:return new YK.PopupWindowDefault(c,b)}};YK.PopupWindowDefault=function(b,a){YK.Widget.apply(this);this._offsetX;this._offsetY;this._title=b;this._text=a;this._maxBodyWidth=678;this._maxBodyHeight=600;this._width=this._minWidth=380;this._height=this._minHeight=130;this._headerHeight=23;this._footerHeight=50;this._padding=10;this._bodyHeight=this._height-this._headerHeight-this._footerHeight;this._okBtnHandler=null;this._closeBtnHandler;this._isFocused=false;this.POPUPWINDOWDEFAULT_OK="";this.POPUPWINDOWDEFAULT_CLOSED="";this._render=function(){this._domObj.className+=" yk_popup_window";this._domObj.style.position="absolute";this._domObj.style.zIndex=YK.POPUP_WINDOW_ZINDEX;this._header=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_popup_window_header"});this._titleDiv=YK.domBuilder.create({tag:"div",className:"yk_popup_window_title",append:this._header});this._titleDiv.innerHTML=this._title;this._closeButton=YK.domBuilder.create({tag:"div",className:"yk_popup_window_button_close",append:this._header,id:"yk_popup_window_button_close_"+this._id});this._body=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_popup_window_body"});this._bodyTable=YK.domBuilder.create({tag:"table",className:"yk_popup_window_table",append:this._body});var c=YK.domBuilder.create({tag:"tr",append:this._bodyTable});var d=YK.domBuilder.create({tag:"td",className:"yk_popup_window_body_td",append:c});this._bodyText=YK.domBuilder.create({append:d,tag:"span","class":"body_text"});this._bodyText.innerHTML=this._text;this._footer=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_popup_window_footer"});this._footerButtonOk=YK.domBuilder.create({tag:"div",className:"yk_popup_window_footer_buttonOk",append:this._footer});this._titleDiv.style.width=this._width-22+"px"};this._render()};YK.PopupWindowDefault.prototype=new YK.Widget();YK.PopupWindowDefault.prototype.constructor=YK.PopupWindowDefault;YK.PopupWindowDefault.prototype.setTitle=function(a){this._title=a;this._resizePopupWindow()};YK.PopupWindowDefault.prototype.setBody=function(a){this._text=a;this._bodyText.innerHTML=this._text;this._resizePopupWindow()};YK.PopupWindowDefault.prototype.setFocus=function(){this._isFocused=true;this._domObj.focus()};YK.PopupWindowDefault.prototype.draw=function(){this._drawOkButton();this._resizePopupWindow();this._setCenterScreen();this._disableBackground();this._initEvent();document.body.appendChild(this._domObj)};YK.PopupWindowDefault.prototype._drawOkButton=function(){this._footerButtonOk.innerHTML="";var a=new YK.Button("OK");a.resizeWidth(75);a.resizeHeight(22);this._footerButtonOk.appendChild(a.getNode())};YK.PopupWindowDefault.prototype._calculateHeight=function(c){var b=c.cloneNode(true);b.style.display="none";b.style.position="absolute";var a=YK.Util.fullHeight(b);return a};YK.PopupWindowDefault.prototype._initEvent=function(){var a=this;var b=YK.Event;b.addDomListener(this._header,"mouseover",function(c){a._enableDrag();b.stopBubble(c)});b.addDomListener(this._header,"mouseout",function(c){a._disableDrag()});this._closeBtnHandler=b.addDomListener(this._closeButton,"click",function(c){a.emit("closed");a.close()});this._okBtnHandler=b.addDomListener(this._footerButtonOk,"mouseup",function(){a.emit("ok");a.close()})};YK.PopupWindowDefault.prototype._detachOkBtnHandler=function(){YK.Event.removeListener(this._okBtnHandler);this._okBtnHandler=null};YK.PopupWindowDefault.prototype._detachCloseBtnHandler=function(){YK.Event.removeListener(this._closeBtnHandler);this._closeBtnHandler=null};YK.PopupWindowDefault.prototype.close=function(){if(!this._domObj.parentNode){return}this._domObj.parentNode.removeChild(this._domObj);this._disableDiv.parentNode.removeChild(this._disableDiv);this._detachOkBtnHandler();this._detachCloseBtnHandler()};YK.PopupWindowDefault.prototype._resizeWidth=function(a){this._width=a+2*this._padding;this._domObj.style.width=this._width+"px";this._header.style.width=this._width+"px";this._titleDiv.innerHTML=this._title;this._titleDiv.style.width=this._width-32+"px";this._body.style.width=a+"px"};YK.PopupWindowDefault.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";this._body.style.height=this._bodyHeight+"px"};YK.PopupWindowDefault.prototype._getMaxHeight=function(){var b=YK.Util.calculateTextHeight(this._text,this._getMaxWidth())+2*this._padding;this._bodyHeight=b<this._bodyHeight?this._bodyHeight:b;var a=this._bodyHeight+this._headerHeight+this._footerHeight;a=this._minHeight<a?a:this._minHeight;return a};YK.PopupWindowDefault.prototype._getMaxWidth=function(){var a=YK.Util.calculateTextWidthHeight(this._text)[0];if(a>this._maxBodyWidth){a=this._maxBodyWidth}else{if(a<this._minWidth){a=this._minWidth}}return a};YK.PopupWindowDefault.prototype._resizePopupWindow=function(){this._resizeWidth(this._getMaxWidth());this._resizeHeight(this._getMaxHeight())};YK.PopupWindowDefault.prototype._calculateOffsetCenter=function(){var c=YK.Util;var b=c.getWindowWidth();var h=c.getWindowHeight();var d=c.getScrollY();var f=c.getScrollX();var a=(b-this._width)/2+f;var g=(h-this._height)/2+d;return[a,g]};YK.PopupWindowDefault.prototype._setCenterScreen=function(){var b=this._calculateOffsetCenter();var a=this._domObj.style;a.top=b[1]+"px";a.left=b[0]+"px"};YK.PopupWindowDefault.prototype._disableBackground=function(){this._disableDiv=YK.domBuilder.create({tag:"div",className:"yk_disable_body"});this._disableDiv.style.zIndex=YK.POPUP_WINDOW_DISABLED_ZINDEX;var a=YK.Util.getPageSize();var b=this._disableDiv.style;b.width=a[0]+"px";b.height=a[1]+"px";b.opacity=0.3;b.backgroundColor="#ADADAD";document.body.appendChild(this._disableDiv)};YK.PopupWindowDefault.prototype._enableDrag=function(){var a=1,c=YK.Util.getWindowWidth()-this._width-17;var d=0,b=YK.Util.getWindowHeight()-this._height-17;YK.LibAdapter.dragInit(this._domObj,a,c,d,b)};YK.PopupWindowDefault.prototype._disableDrag=function(){var a=maxX=parseInt(this._domObj.style.left);var b=maxY=parseInt(this._domObj.style.top);YK.LibAdapter.dragInit(this._domObj,a,maxX,b,maxY)};gobject.signalNew("ok",YK.PopupWindowDefault,null,null,[]);gobject.signalNew("closed",YK.PopupWindowDefault,null,null,[]);YK.PopupWindowConfirm=function(c,b){YK.PopupWindowDefault.apply(this,[c,b]);var a=this;this._iconWidth=95;this._cancelBtnHandler=null;this.POPUPWINDOWCONFIRM_CANCELLED="";this._render=function(){var d=YK.domBuilder.create({tag:"div",className:"yk_popup_window_confirm_image"});this._body.insertBefore(d,this._bodyTable);this._bodyTable.style.margin="0px 0px 0px 66px";this._footerButtonCancel=YK.domBuilder.create({tag:"div",className:"yk_popup_window_footer_buttonConcel"})};this._render()};YK.PopupWindowConfirm.prototype=new YK.PopupWindowDefault();YK.PopupWindowConfirm.prototype.constructor=YK.PopupWindowConfirm;YK.PopupWindowConfirm.prototype.draw=function(){this._drawOkButton();this._drawCancelButton();this._resizePopupWindow();this._setCenterScreen();this._disableBackground();this._initEvent();this._attachCancelBtnEvent();document.body.appendChild(this._domObj)};YK.PopupWindowConfirm.prototype._attachCancelBtnEvent=function(){var a=this;this._cancelBtnHandler=YK.Event.addDomListener(this._footerButtonCancel,"mouseup",function(){a.emit("cancelled");a.close()})};YK.PopupWindowConfirm.prototype._drawCancelButton=function(){this._footerButtonCancel.innerHTML="";var a=new YK.Button("Cancel");a.resizeWidth(75);a.resizeHeight(22);this._footerButtonCancel.appendChild(a.getNode());this._footer.insertBefore(this._footerButtonCancel,this._footerButtonOk)};YK.PopupWindowConfirm.prototype.close=function(){if(!this._domObj.parentNode){return}this._domObj.parentNode.removeChild(this._domObj);this._disableDiv.parentNode.removeChild(this._disableDiv);this._detachOkBtnHandler();this._detachCancelBtnHandler();this._detachCloseBtnHandler()};YK.PopupWindowConfirm.prototype._detachCancelBtnHandler=function(){YK.Event.removeListener(this._cancelBtnHandler);this._cancelBtnHandler=null};gobject.signalNew("cancelled",YK.PopupWindowConfirm,null,null,[]);YK.PopupWindowWarning=function(b,a){YK.PopupWindowDefault.apply(this,[b,a]);this._iconWidth=95;this._render=function(){var c=YK.domBuilder.create({tag:"div",className:"yk_popup_window_warning_image"});this._body.insertBefore(c,this._bodyTable);this._bodyTable.style.margin="0px 0px 0px 66px"};this._render()};YK.PopupWindowWarning.prototype=new YK.PopupWindowDefault();YK.PopupWindowWarning.prototype.constructor=YK.PopupWindowWarning;YK.PopupWindowError=function(b,a){YK.PopupWindowDefault.apply(this,[b,a]);this._iconWidth=95;this._render=function(){var c=YK.domBuilder.create({tag:"div",className:"yk_popup_window_error_image"});this._body.insertBefore(c,this._bodyTable);this._bodyTable.style.margin="0px 0px 0px 66px"};this._render()};YK.PopupWindowError.prototype=new YK.PopupWindowDefault();YK.PopupWindowError.prototype.constructor=YK.PopupWindowError;YK.PopupWindowInfo=function(b,a){YK.PopupWindowDefault.apply(this,[b,a]);this._iconWidth=95;this._render=function(){var c=YK.domBuilder.create({tag:"div",className:"yk_popup_window_info_image"});this._body.insertBefore(c,this._bodyTable);this._bodyTable.style.margin="0px 0px 0px 66px"};this._render()};YK.PopupWindowInfo.prototype=new YK.PopupWindowDefault();YK.PopupWindowInfo.prototype.constructor=YK.PopupWindowInfo;YK.ProgressBar=function(a){YK.Object.apply(this);this._text="";this._maxLength=a||Number.MAX_VALUE;this._remainingLength=a||Number.MAX_VALUE;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div",className:"yk_text_editor_controlbox"});this._progressbar=YK.domBuilder.create({tag:"div",append:this._domObj,className:"yk_text_editor_progressbar"});this._lengthBox=YK.domBuilder.create({tag:"div",append:this._domObj,className:"yk_text_editor_length_box"})};this._render()};YK.ProgressBar.prototype=new YK.Object();YK.ProgressBar.prototype.constructor=YK.ProgressBar;YK.ProgressBar.prototype.getNode=function(){return this._domObj};YK.ProgressBar.prototype.animateProgress=function(b,a){this._text=b;this._animateProgressBar();this._changeProgressBarBgColor();this._updateLength(a)};YK.ProgressBar.prototype._animateProgressBar=function(){var a=this._text.length;var b=(a*81)/this._maxLength;if(b<=100){this._progressbar.style.width=b+"%"}else{this._progressbar.style.width="100%"}};YK.ProgressBar.prototype._changeProgressBarBgColor=function(){var a=this._text.length;var b=(a*100)/this._maxLength;if(b<=80){this._progressbar.style.backgroundColor="#93E659"}else{if(b<=95){this._progressbar.style.backgroundColor="#FFB04B"}else{this._progressbar.style.backgroundColor="#FF0000"}}};YK.ProgressBar.prototype._updateLength=function(b){var a=this._text.length;this._remainingLength=this._maxLength-a;if(!this._limitLength(a,b)){YK.Event.stopDefault(b);this._lengthBox.innerHTML=0+"/"+this._maxLength+"&nbsp;";return}this._lengthBox.innerHTML=this._remainingLength+"/"+this._maxLength+"&nbsp;"};YK.ProgressBar.prototype._limitLength=function(a,b){return(a<=this._maxLength)||(b.keyCode==YK.BACKSPACE_KEY||b.keyCode==YK.DELETE_KEY||(b.keyCode>=35&&b.keyCode<=40))};YK.Editor=function(a){YK.Widget.apply(this);var b=this;this._width=this._minWidth=100;this._height=this._minHeight=70;this._toolbarWrapperHeight=22;this._footerWrapperHeight=0;this._toolbarObj=null;this._disabledModal=null;this._defaultValue=a||"";this._disabledModal=null;this._progressbar=YK.EditorProgressBarNulObj;this._showError=false;this._render=function(){this._domObj.className+=" yk_text_editor";this._toolbarWrapper=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_text_editor_toolbar_wrapper"});this._bodyWrapper=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_text_editor_body_wrapper"});this._iFrameDom=YK.domBuilder.create({append:this._bodyWrapper,tag:"iframe",className:"yk_text_editor_iframe"})};this._render();YK.Event.addDomListener(this._iFrameDom,"load",function(c){b._iFrameDoc=b._getIFrameDoc();b.setDefaultValue(b._defaultValue);b._initEvent();b._enableEditable();b._setFocus();b._progressbar.animateProgress(b.getPlainText(),c)})};YK.Editor.prototype=new YK.Widget();YK.Editor.prototype.constructor=YK.Editor;YK.Editor.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(a._iFrameDoc,"mouseup",function(b){a._toolbarObj.activate();a.emit("focused");YK.Event.triggerPublicListener("mousedowned",a)});YK.Event.addDomListener(a._iFrameDoc,"keyup",function(b){a._toolbarObj.activate();a._toolbarObj.activateByKeyUp(b)});YK.Event.addDomListener(a._iFrameDoc,"keypress",function(b){a._progressbar.animateProgress(a.getPlainText(),b)});YK.Event.addDomListener(a._iFrameDoc,"keydown",function(b){a._toolbarObj.activateByKey(b)});YK.Event.addDomListener(a._iFrameDoc,"blur",function(b){a.emit("blurred")})};YK.Editor.prototype.setConfig=function(a){for(var b in a){if(!a[b]){this._toolbarObj.removeTool(b)}}};YK.Editor.prototype.appendToolBar=function(a){this._toolbarObj=a;this._toolbarObj.setEditorObj(this);this._toolbarWrapper.appendChild(this._toolbarObj.getNode());this._bindSignal()};YK.Editor.prototype._bindSignal=function(){var a=this;this._toolbarObj.connect("activated",function(b,c){a._execCommand(b,c);a._setFocus()});this._toolbarObj.connect("htmlupdated",function(b){a.setDefaultValue(b)})};YK.Editor.prototype._enableEditable=function(){this._iFrameDoc.designMode="on"};YK.Editor.prototype._disableEditable=function(){this._iFrameDoc.designMode="off"};YK.Editor.prototype._setFocus=function(){this._iFrameDom.contentWindow.focus()};YK.Editor.prototype._getIFrameDoc=(function(){var a=this._iFrameDom.contentDocument||this._iFrameDom.contentWindow;return a.document?a.document:a});YK.Editor.prototype.setMaxLength=function(a){this._footerWrapperHeight=22;this._renderProgressBar(a)};YK.Editor.prototype._renderProgressBar=function(a){this._progressbar=new YK.ProgressBar(a);this._domObj.appendChild(this._progressbar.getNode())};YK.Editor.prototype.getHTMLText=function(){return this._iFrameDoc.body.innerHTML};YK.Editor.prototype.getPlainText=function(){return this._iFrameDoc.lastChild.textContent};YK.Editor.prototype.clear=function(){this._iFrameDoc.body.innerHTML=""};YK.Editor.prototype.setDefaultValue=function(a){this._iFrameDoc.body.innerHTML=a};YK.Editor.prototype.getSelectedText=function(){return this._iFrameDoc.getSelection()};YK.Editor.prototype.getSelectedObj=function(){return this._iFrameDom.contentWindow.getSelection()};YK.Editor.prototype.enable=function(){this._enableEditable();if(this._disabledModal!==null){this._disabledModal.className=""}};YK.Editor.prototype.disable=function(){this._disableEditable();if(this._disabledModal===null){this._disabledModal=YK.domBuilder.create({tag:"div",className:"yk_text_editor_disabled"});this._domObj.appendChild(this._disabledModal)}else{this._disabledModal.className="yk_text_editor_disabled"}};YK.Editor.prototype.showError=function(a){this._showError=(typeof a!=="undefined"&&typeof a==="boolean")?a:true;if(this._showError){this._domObj.className+=" yk_widget_error"}else{this._domObj.className="yk_widget yk_text_editor"}};YK.Editor.prototype._execCommand=function(b,a){this._iFrameDoc.execCommand(b,false,a)};YK.Editor.prototype._getCommandState=function(a){return this._iFrameDoc.queryCommandState(a)};YK.Editor.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a-this._footerWrapperHeight+"px";this._bodyWrapper.style.height=this._height-this._toolbarWrapperHeight-this._footerWrapperHeight+"px"};gobject.signalNew("focused",YK.Editor,null,null,[]);gobject.signalNew("blurred",YK.Editor,null,null,[]);YK.EditorProgressBarNulObj=YK.NullObjectBuilder.build(new YK.ProgressBar());YK.EditorToolbar=function(){YK.Object.apply(this);this._tools=[];this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_toolbar"})};this._render()};YK.EditorToolbar.prototype=new YK.Object();YK.EditorToolbar.prototype.constructor=YK.EditorToolbar;YK.EditorToolbar.prototype.getNode=function(){return this._domObj};YK.EditorToolbar.prototype.setEditorObj=function(a){this._editorObj=a};YK.EditorToolbar.prototype.appendTool=function(b){this._tools.push(b);b.setEditorObj(this._editorObj);this._appendToolDom(b.getNode());var a=this;b.connect("activated",function(c,d){a.emit("activated",c,d)});if(b.hasGroup){b.connect("deactivated_siblings",function(c){a._deactivateTools(c)})}if(b.type=="VIEWSOURCE"){b.connect("htmlupdated",function(c){a.emit("htmlupdated",c)})}};YK.EditorToolbar.prototype.removeTool=function(b){for(var c=this._tools.length;c--;){var a=this._tools[c];if(a.type.toLowerCase()===b.toLowerCase()){this._domObj.removeChild(a.getNode())}}};YK.EditorToolbar.prototype._deactivateTools=function(c){for(var b=this._tools.length;b--;){var a=this._tools[b];if(a.group===c.group){a.deactivate()}}};YK.EditorToolbar.prototype.activateByKey=function(b){for(var a=this._tools.length;a--;){this._tools[a].activateByKey(b)}};YK.EditorToolbar.prototype.activateByKeyUp=function(b){for(var a=this._tools.length;a--;){this._tools[a].activateByKeyUp(b)}};YK.EditorToolbar.prototype.activate=function(){for(var a=this._tools.length;a--;){this._tools[a].activate()}};YK.EditorToolbar.prototype.deactivate=function(c){for(var b=this._tools.length;b--;){var a=this._tools[b];if(a.type===c){a.deactivate()}}};YK.EditorToolbar.prototype._appendToolDom=function(a){this._domObj.appendChild(a)};gobject.signalNew("activated",YK.EditorToolbar,null,null,[]);gobject.signalNew("htmlupdated",YK.EditorToolbar,null,null,[]);YK.ToolButton=function(){YK.Object.apply(this);this._isCtrlKeyActivated=false;this._isShiftKeyActivated=false;this._isTabKeyActivated=false};YK.ToolButton.prototype=new YK.Object();YK.ToolButton.prototype.constructor=YK.ToolButton;YK.ToolButton.prototype.getNode=function(){return this._domObj};YK.ToolButton.prototype.setEditorObj=function(a){this._editorObj=a};YK.ToolButton.prototype.activateByKey=function(a){};YK.ToolButton.prototype.activateByKeyUp=function(a){if(a.which==17){this._isCtrlKeyActivated=false}if(a.which==16){this._isShiftKeyActivated=false}};YK.ToolButton.prototype.deactivate=function(){};YK.ToolButton.prototype.activate=function(){};YK.ToolButton.prototype._hiliteButton=function(){this._domObj.className+=" yk_text_editor_active";this._isActive=true};gobject.signalNew("activated",YK.ToolButton,null,null,[]);YK.ToolDropDown=function(){YK.ToolButton.apply(this);this.hasGroup=true;this.group="DROPDOWN";this._isActive=false};YK.ToolDropDown.prototype=new YK.ToolButton();YK.ToolDropDown.prototype.constructor=YK.ToolDropDown;YK.ToolDropDown.prototype._initEvent=function(){};YK.ToolDropDown.prototype._receivePublicEvents=function(){var a=this;YK.Event.addPublicListener(this,"deactivated",function(){a._hideDropDown()});YK.Event.addPublicListener(this,"mousedowned",function(){a._hideDropDown()})};YK.ToolDropDown.prototype.deactivate=function(){this._hideDropDown()};YK.ToolDropDown.prototype._positionDropDown=function(){var b=YK.Util.pageY(this._domObj)+24;var a=YK.Util.pageX(this._domObj);this._dropDownContainer.style.top=b+"px";this._dropDownContainer.style.left=a+"px"};YK.ToolDropDown.prototype._showDropDown=function(){YK.Effect.setOpacity(this._dropDownContainer,0,100,300,60);YK.domBuilder.showElement(this._dropDownContainer);this._positionDropDown()};YK.ToolDropDown.prototype._hideDropDown=function(){YK.domBuilder.hideElement(this._dropDownContainer)};gobject.signalNew("deactivated_siblings",YK.ToolDropDown,null,null,[]);YK.PopupBuilder=function(a){this._tool=a;this._render=function(){this._popup=this._renderWindow();var b=this._renderContent();this._popup.appendChild(b);this._entry.setFocus()};this._renderWindow=function(){var b=new YK.Window(YK.WINDOW_TOPLEVEL);b.setBoldTitle(true);b.disableMinimizeButton();b.disableMaximizeButton();b.disableResize();b.setPosition(YK.JUSTIFY_CENTER);b.drawModal();$id("yk_window_modal").style.zIndex=90000;return b};this._initEvent=function(){var b=this;this._entry.connect("keypressed",function(c){b._toggleOkButton(c)});this._cancelButton.connect("clicked",function(){b._popup.close()});this._okButton.connect("clicked",function(){b._activate()});this._entry.connect("enterkeypressed",function(){b._activate()})};this._toggleOkButton=function(b){YK.Util.trim(b).length>10?this._okButton.setEnable(true):this._okButton.setEnable(false)}};YK.BoldButton=function(){YK.ToolButton.apply(this);this.type="BOLD";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_bold_button",title:" Bold (Ctrl + B) "})};this._render();this._initEvent()};YK.BoldButton.prototype=new YK.ToolButton();YK.BoldButton.prototype.constructor=YK.BoldButton;YK.BoldButton.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(b){a.emit("activated","Bold");a.activate();YK.Event.stopDefault(b)})};YK.BoldButton.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==66&&this._isCtrlKeyActivated===true){return true}return false};YK.BoldButton.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","Bold");this.activate();YK.Event.stopDefault(a)}};YK.BoldButton.prototype.activate=function(){this._editorObj._getCommandState("Bold")?this._hiliteButton():this._dehiliteButton()};YK.BoldButton.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_bold_button";this._isActive=false};YK.ItalicButton=function(){YK.ToolButton.apply(this);this.type="ITALIC";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_italic_button",title:" Italic (Ctrl + I) "})};this._render();this._initEvent()};YK.ItalicButton.prototype=new YK.ToolButton();YK.ItalicButton.prototype.constructor=YK.ItalicButton;YK.ItalicButton.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","Italic");a.activate()})};YK.ItalicButton.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==73&&this._isCtrlKeyActivated===true){return true}return false};YK.ItalicButton.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","Italic");this.activate();YK.Event.stopDefault(a)}};YK.ItalicButton.prototype.activate=function(){this._editorObj._getCommandState("Italic")?this._hiliteButton():this._dehiliteButton()};YK.ItalicButton.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_italic_button";this._isActive=false};YK.UnderlineButton=function(){YK.ToolButton.apply(this);this.type="UNDERLINE";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_underline_button",title:" Underline (Ctrl + U) "})};this._render();this._initEvent()};YK.UnderlineButton.prototype=new YK.ToolButton();YK.UnderlineButton.prototype.constructor=YK.UnderlineButton;YK.UnderlineButton.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","Underline");a.activate()})};YK.UnderlineButton.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==85&&this._isCtrlKeyActivated===true){return true}return false};YK.UnderlineButton.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","Underline");this.activate();YK.Event.stopDefault(a)}};YK.UnderlineButton.prototype.activate=function(){this._editorObj._getCommandState("Underline")?this._hiliteButton():this._dehiliteButton()};YK.UnderlineButton.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_underline_button";this._isActive=false};YK.StrikeButton=function(){YK.ToolButton.apply(this);this.type="STRIKE";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_strike_button",title:" Strikethrough (Ctrl + Q) "})};this._render();this._initEvent()};YK.StrikeButton.prototype=new YK.ToolButton();YK.StrikeButton.prototype.constructor=YK.StrikeButton;YK.StrikeButton.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","Strikethrough");a.activate()})};YK.StrikeButton.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==81&&this._isCtrlKeyActivated===true){return true}return false};YK.StrikeButton.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","Strikethrough");this.activate();YK.Event.stopDefault(a)}};YK.StrikeButton.prototype.activate=function(){this._editorObj._getCommandState("Strikethrough")?this._hiliteButton():this._dehiliteButton()};YK.StrikeButton.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_strike_button";this._isActive=false};YK.JustifiedLeft=function(){YK.ToolButton.apply(this);this.type="JUSTIFIEDLEFT";this.hasGroup=true;this.group="JUSTIFIEDGROUP";this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_justifiedleft_button",title:" Left Alignment (Ctrl + L) "})};this._render();this._initEvent()};YK.JustifiedLeft.prototype=new YK.ToolButton();YK.JustifiedLeft.prototype.constructor=YK.JustifiedLeft;YK.JustifiedLeft.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","JustifyLeft");a.emit("deactivated_siblings",a);a._hiliteButton()})};YK.JustifiedLeft.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==76&&this._isCtrlKeyActivated===true){return true}return false};YK.JustifiedLeft.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","JustifyLeft");this.emit("deactivated_siblings",this);this._hiliteButton();YK.Event.stopDefault(a)}};YK.JustifiedLeft.prototype.activate=function(){this._editorObj._getCommandState("JustifyLeft")?this._hiliteButton():this._dehiliteButton()};YK.JustifiedLeft.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_justifiedleft_button"};YK.JustifiedLeft.prototype.deactivate=function(){this._dehiliteButton()};gobject.signalNew("deactivated_siblings",YK.JustifiedLeft,null,null,[]);YK.JustifiedRight=function(){YK.ToolButton.apply(this);this.type="JUSTIFIEDRIGHT";this.hasGroup=true;this.group="JUSTIFIEDGROUP";this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_justifiedright_button",title:" Right Alignment (Ctrl + R) "})};this._render();this._initEvent()};YK.JustifiedRight.prototype=new YK.ToolButton();YK.JustifiedRight.prototype.constructor=YK.JustifiedRight;YK.JustifiedRight.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","JustifyRight");a.emit("deactivated_siblings",a);a._hiliteButton();YK.Event.stopDefault(e)})};YK.JustifiedRight.prototype.activate=function(){this._editorObj._getCommandState("JustifyRight")?this._hiliteButton():this._dehiliteButton()};YK.JustifiedRight.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_justifiedright_button"};YK.JustifiedRight.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==82&&this._isCtrlKeyActivated===true){return true}return false};YK.JustifiedRight.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","JustifyRight");this.emit("deactivated_siblings",this);this._hiliteButton()}};YK.JustifiedRight.prototype.deactivate=function(){this._dehiliteButton()};gobject.signalNew("deactivated_siblings",YK.JustifiedRight,null,null,[]);YK.JustifiedCenter=function(){YK.ToolButton.apply(this);this.type="JUSTIFIEDCENTER";this.hasGroup=true;this.group="JUSTIFIEDGROUP";this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_justifiedcenter_button",title:" Center Alignment (Ctrl + E) "})};this._render();this._initEvent()};YK.JustifiedCenter.prototype=new YK.ToolButton();YK.JustifiedCenter.prototype.constructor=YK.JustifiedCenter;YK.JustifiedCenter.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","JustifyCenter");a.emit("deactivated_siblings",a);a._hiliteButton()})};YK.JustifiedCenter.prototype.activate=function(){this._editorObj._getCommandState("JustifyCenter")?this._hiliteButton():this._dehiliteButton()};YK.JustifiedCenter.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_justifiedcenter_button"};YK.JustifiedCenter.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==69&&this._isCtrlKeyActivated===true){return true}return false};YK.JustifiedCenter.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","JustifyCenter");this.emit("deactivated_siblings",this);this._hiliteButton();YK.Event.stopDefault(a)}};YK.JustifiedCenter.prototype.deactivate=function(){this._dehiliteButton()};gobject.signalNew("deactivated_siblings",YK.JustifiedCenter,null,null,[]);YK.JustifiedFull=function(){YK.ToolButton.apply(this);this.hasGroup=true;this.type="JUSTIFIEDFULL";this.group="JUSTIFIEDGROUP";this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_justifiedfull_button",title:" Full Alignment (Ctrl + J) "})};this._render();this._initEvent()};YK.JustifiedFull.prototype=new YK.ToolButton();YK.JustifiedFull.prototype.constructor=YK.JustifiedFull;YK.JustifiedFull.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","JustifyFull");a.emit("deactivated_siblings",a);a._hiliteButton()})};YK.JustifiedFull.prototype._isShortcutKeyActivated=function(a){if(a.which==17){this._isCtrlKeyActivated=true}if(a.which==74&&this._isCtrlKeyActivated===true){return true}return false};YK.JustifiedFull.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","JustifyFull");this.emit("deactivated_siblings",this);this._hiliteButton();YK.Event.stopDefault(a)}};YK.JustifiedFull.prototype.activate=function(){this._editorObj._getCommandState("JustifyFull")?this._hiliteButton():this._dehiliteButton()};YK.JustifiedFull.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_justifiedfull_button"};YK.JustifiedFull.prototype.deactivate=function(){this._dehiliteButton()};gobject.signalNew("deactivated_siblings",YK.JustifiedFull,null,null,[]);YK.TextColor=function(){YK.ToolDropDown.apply(this);this.type="TEXTCOLOR";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_textcolor_button",title:" TextColor "});this._arrayColorCode=[["FFFFFF","E6E6E6","BDBDBD","848484","585858","424242","1C1C1C","151515","0B0B0B","000000"],["F8E0E0","F6CECE","F5A9A9","F78181","FA5858","FE2E2E","FF0000","DF0101","B40404","8A0808"],["F8ECE0","F6E3CE","F5D0A9","F7BE81","FAAC58","FE9A2E","FF8000","DF7401","B45F04","8A4B08"],["F5F6CE","F2F5A9","F3F781","F4FA58","F7FE2E","FFFF00","D7DF01","AEB404","868A08","5E610B"],["E3F6CE","D0F5A9","BEF781","ACFA58","9AFE2E","80FF00","74DF00","5FB404","4B8A08","38610B"],["CEF6CE","A9F5A9","81F781","58FA58","2EFE2E","00FF00","01DF01","04B404","088A08","0B610B"],["CEF6F5","A9F5F2","81F7F3","58FAF4","2EFEF7","00FFFF","01DFD7","04B4AE","088A85","0B615E"],["CECEF6","A9A9F5","8181F7","5858FA","2E2EFE","0000FF","0101DF","0404B4","08088A","0B0B61"],["E3CEF6","D0A9F5","BE81F7","AC58FA","9A2EFE","8000FF","7401DF","5F04B4","4B088A","380B61"],["F6CEF5","F5A9F2","F781F3","FA58F4","FE2EF7","FF00FF","DF01D7","B404AE","8A0886","610B5E"],["F6CEE3","F5A9D0","F781BE","FA58AC","FE2E9A","FF0080","DF0174","B4045F","8A084B","610B38"]];this._dropDownContainer=YK.domBuilder.create({append:document.body,tag:"div",className:"yk_text_editor_colorcontainer"});this._divColorRow=YK.domBuilder.create({tag:"div",className:"yk_text_editor_colorrow"});this._colorBox=YK.domBuilder.create({tag:"span"});this._createColorBox();YK.domBuilder.hideElement(this._dropDownContainer)};this._render();this._initEvent();this._receivePublicEvents()};YK.TextColor.prototype=new YK.ToolDropDown();YK.TextColor.prototype.constructor=YK.TextColor;YK.TextColor.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mousedown",function(b){YK.Event.stopBubble(b)});YK.Event.addDomListener(this._domObj,"mouseup",function(b){if(YK.domBuilder.isShowed(a._dropDownContainer)){a._hideDropDown()}else{a.emit("deactivated_siblings",a);a._showDropDown()}YK.Event.stopBubble(b)});YK.Event.addDomListener(this._dropDownContainer,"click",function(c){var b=a._getColorCode(c.target);a.emit("activated","ForeColor",b);a._hideDropDown()})};YK.TextColor.prototype._getColorCode=function(a){return a.style.backgroundColor};YK.TextColor.prototype._createColorBox=function(){for(i=0;i<11;i++){var c=this._divColorRow.cloneNode(false);var d=0;for(var b=0;b<10;b++){var a=this._colorBox.cloneNode(false);a.title="Color: #"+this._arrayColorCode[i][b];a.style.marginLeft=d+"px";a.style.backgroundColor="#"+this._arrayColorCode[i][b];c.appendChild(a);d+=15}this._dropDownContainer.appendChild(c)}};YK.HiliteColor=function(){YK.ToolDropDown.apply(this);this.type="HILITECOLOR";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_hilite_button",title:" Highlight Color "});this._arrayColorCode=[["FFFFFF","E6E6E6","BDBDBD","848484","585858","424242","1C1C1C","151515","0B0B0B","000000"],["F8E0E0","F6CECE","F5A9A9","F78181","FA5858","FE2E2E","FF0000","DF0101","B40404","8A0808"],["F8ECE0","F6E3CE","F5D0A9","F7BE81","FAAC58","FE9A2E","FF8000","DF7401","B45F04","8A4B08"],["F5F6CE","F2F5A9","F3F781","F4FA58","F7FE2E","FFFF00","D7DF01","AEB404","868A08","5E610B"],["E3F6CE","D0F5A9","BEF781","ACFA58","9AFE2E","80FF00","74DF00","5FB404","4B8A08","38610B"],["CEF6CE","A9F5A9","81F781","58FA58","2EFE2E","00FF00","01DF01","04B404","088A08","0B610B"],["CEF6F5","A9F5F2","81F7F3","58FAF4","2EFEF7","00FFFF","01DFD7","04B4AE","088A85","0B615E"],["CECEF6","A9A9F5","8181F7","5858FA","2E2EFE","0000FF","0101DF","0404B4","08088A","0B0B61"],["E3CEF6","D0A9F5","BE81F7","AC58FA","9A2EFE","8000FF","7401DF","5F04B4","4B088A","380B61"],["F6CEF5","F5A9F2","F781F3","FA58F4","FE2EF7","FF00FF","DF01D7","B404AE","8A0886","610B5E"],["F6CEE3","F5A9D0","F781BE","FA58AC","FE2E9A","FF0080","DF0174","B4045F","8A084B","610B38"]];this._dropDownContainer=YK.domBuilder.create({append:document.body,tag:"div",className:"yk_text_editor_colorcontainer"});this._divColorRow=YK.domBuilder.create({tag:"div",className:"yk_text_editor_colorrow"});this._colorBox=YK.domBuilder.create({tag:"span"});this._createColorBox();YK.domBuilder.hideElement(this._dropDownContainer)};this._render();this._initEvent();this._receivePublicEvents()};YK.HiliteColor.prototype=new YK.ToolDropDown();YK.HiliteColor.prototype.constructor=YK.HiliteColor;YK.HiliteColor.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mousedown",function(b){YK.Event.stopBubble(b)});YK.Event.addDomListener(this._domObj,"mouseup",function(b){if(YK.domBuilder.isShowed(a._dropDownContainer)){a._hideDropDown()}else{a.emit("deactivated_siblings",a);a._showDropDown()}YK.Event.stopBubble(b)});YK.Event.addDomListener(this._dropDownContainer,"click",function(c){var b=a._getColorCode(c.target);a.emit("activated","HiliteColor",b);a._hideDropDown()})};YK.HiliteColor.prototype._getColorCode=function(a){return a.style.backgroundColor};YK.HiliteColor.prototype._createColorBox=function(){for(i=0;i<11;i++){var c=this._divColorRow.cloneNode(false);var d=0;for(var b=0;b<10;b++){var a=this._colorBox.cloneNode(false);a.style.marginLeft=d+"px";a.title="Color: #"+this._arrayColorCode[i][b];a.style.backgroundColor="#"+this._arrayColorCode[i][b];c.appendChild(a);d+=15}this._dropDownContainer.appendChild(c)}};YK.FontType=function(){YK.ToolDropDown.apply(this);this.type="FONTTYPE";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_fonttype_button",title:" Font Type "});this._arrayFontType=["Arial","Comic Sans MS","Courier New","Georgia","Helvetica","Narrow","Sans Serif","Tahoma","Times New Roman","Verdana"];this._dropDownContainer=YK.domBuilder.create({append:document.body,tag:"div",className:"yk_text_editor_fonttypecontainer"});this._createFontType();YK.domBuilder.hideElement(this._dropDownContainer)};this._render();this._initEvent();this._receivePublicEvents()};YK.FontType.prototype=new YK.ToolDropDown();YK.FontType.prototype.constructor=YK.FontType;YK.FontType.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mousedown",function(b){YK.Event.stopBubble(b)});YK.Event.addDomListener(this._domObj,"mouseup",function(b){if(YK.domBuilder.isShowed(a._dropDownContainer)){a._hideDropDown()}else{a.emit("deactivated_siblings",a);a._showDropDown()}YK.Event.stopBubble(b)});YK.Event.addDomListener(this._dropDownContainer,"click",function(c){var b=a._getFontName(c.target);a.emit("activated","FontName",b);a._hideDropDown()})};YK.FontType.prototype._getFontName=function(a){return a.style.fontFamily};YK.FontType.prototype._createFontType=function(){var b=YK.domBuilder.create({tag:"span",className:"yk_text_editor_fontname"});for(var a=0;a<10;a++){var c=b.cloneNode(false);c.innerHTML=this._arrayFontType[a];c.title="Font: "+this._arrayFontType[a];c.style.fontFamily=this._arrayFontType[a];this._dropDownContainer.appendChild(c)}};YK.FontSize=function(){YK.ToolDropDown.apply(this);this.type="FONTSIZE";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_fontsize_button",title:" Font Size "});this._dropDownContainer=YK.domBuilder.create({append:document.body,tag:"div",className:"yk_text_editor_fontsize_container"});this._createFontSize();YK.domBuilder.hideElement(this._dropDownContainer)};this._render();this._initEvent();this._receivePublicEvents()};YK.FontSize.prototype=new YK.ToolDropDown();YK.FontSize.prototype.constructor=YK.FontSize;YK.FontSize.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mousedown",function(b){YK.Event.stopBubble(b)});YK.Event.addDomListener(this._domObj,"mouseup",function(b){if(YK.domBuilder.isShowed(a._dropDownContainer)){a._hideDropDown()}else{a.emit("deactivated_siblings",a);a._showDropDown()}YK.Event.stopBubble(b)});YK.Event.addDomListener(this._dropDownContainer,"click",function(c){var b=a._getFontSize(c.target);a.emit("activated","FontSize",b);a._hideDropDown()})};YK.FontSize.prototype._getFontSize=function(a){return parseInt(a.style.fontSize)-6};YK.FontSize.prototype._createFontSize=function(){var b=YK.domBuilder.create({tag:"span",className:"yk_text_editor_fontsize"});for(var a=1;a<=7;a++){var c=b.cloneNode(false);c.innerHTML="Size "+a;c.style.fontSize=a+6+"pt";c.title="FontSize "+a;this._dropDownContainer.appendChild(c)}};YK.Heading=function(){YK.ToolDropDown.apply(this);this.type="HEADING";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_heading_button",title:" Heading "});this._dropDownContainer=YK.domBuilder.create({append:document.body,tag:"div",className:"yk_text_editor_headingcontainer"});YK.domBuilder.hideElement(this._dropDownContainer);this._createHeadingContainer()};this._render();this._initEvent();this._receivePublicEvents()};YK.Heading.prototype=new YK.ToolDropDown();YK.Heading.prototype.constructor=YK.Heading;YK.Heading.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mousedown",function(b){YK.Event.stopBubble(b)});YK.Event.addDomListener(this._domObj,"mouseup",function(b){if(YK.domBuilder.isShowed(a._dropDownContainer)){a._hideDropDown()}else{a.emit("deactivated_siblings",a);a._showDropDown()}YK.Event.stopBubble(b)});YK.Event.addDomListener(this._dropDownContainer,"click",function(c){var b=a._getHeadingSize(c.target);a.emit("activated","formatblock",b);a._hideDropDown()})};YK.Heading.prototype._getHeadingSize=function(a){return a.id};YK.Heading.prototype._createHeadingContainer=function(){var d=YK.domBuilder.create({tag:"div",className:"yk_text_editor_headingtype"});var c=[26,24,19,16,12,10];for(var b=1;b<=6;b++){var a=d.cloneNode(false);a.title="Heading "+b;a.innerHTML="<span id='<H"+b+">' style='font-size:"+c[b-1]+"px;'>Heading "+b+"</span>";this._dropDownContainer.appendChild(a)}};YK.BulletedList=function(){YK.ToolButton.apply(this);this.type="BULLETEDLIST";this.group="LIST";this.hasGroup=true;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_bulletedlist_button",title:" Bulleted List "})};this._render();this._initEvent()};YK.BulletedList.prototype=new YK.ToolButton();YK.BulletedList.prototype.constructor=YK.BulletedList;YK.BulletedList.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","insertUnorderedList");if(a._isActive){a._dehiliteButton()}else{a.emit("deactivated_siblings",a);a._hiliteButton()}})};YK.BulletedList.prototype.activate=function(){this._editorObj._getCommandState("insertUnorderedList")?this._hiliteButton():this._dehiliteButton()};YK.BulletedList.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_bulletedlist_button";this._isActive=false};YK.BulletedList.prototype.deactivate=function(){this._dehiliteButton()};gobject.signalNew("deactivated_siblings",YK.BulletedList,null,null,[]);YK.OrderedList=function(){YK.ToolButton.apply(this);this.type="NUMBEREDLIST";this.group="LIST";this.hasGroup=true;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_orderedlist_button",title:" Ordered List "})};this._render();this._initEvent()};YK.OrderedList.prototype=new YK.ToolButton();YK.OrderedList.prototype.constructor=YK.OrderedList;YK.OrderedList.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","insertOrderedList");if(a._isActive){a._dehiliteButton()}else{a.emit("deactivated_siblings",a);a._hiliteButton()}})};YK.OrderedList.prototype.activate=function(){this._editorObj._getCommandState("insertOrderedList")?this._hiliteButton():this._dehiliteButton()};YK.OrderedList.prototype._dehiliteButton=function(){this._domObj.className="yk_text_editor_orderedlist_button";this._isActive=false};YK.OrderedList.prototype.deactivate=function(){this._dehiliteButton()};gobject.signalNew("deactivated_siblings",YK.OrderedList,null,null,[]);YK.Indent=function(){YK.ToolButton.apply(this);this.type="INDENT";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_indent_button",title:" Indent Left (Tab Key) "})};this._render();this._initEvent()};YK.Indent.prototype=new YK.ToolButton();YK.Indent.prototype.constructor=YK.Indent;YK.Indent.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","indent")})};YK.Indent.prototype._isShortcutKeyActivated=function(a){if(a.which==9){return true}return false};YK.Indent.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","indent");YK.Event.stopDefault(a)}};YK.Outdent=function(){YK.ToolButton.apply(this);this.type="OUTDENT";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_outdent_button",title:" Outdent Right (Shift + Tab) "})};this._render();this._initEvent()};YK.Outdent.prototype=new YK.ToolButton();YK.Outdent.prototype.constructor=YK.Outdent;YK.Outdent.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","outdent")})};YK.Outdent.prototype._isShortcutKeyActivated=function(a){if(a.which==16){this._isShiftKeyActivated=true}if(a.which==9&&this._isShiftKeyActivated===true){return true}return false};YK.Outdent.prototype.activateByKey=function(a){if(this._isShortcutKeyActivated(a)){this.emit("activated","outdent");YK.Event.stopDefault(a)}};YK.RemoveFormat=function(){YK.ToolButton.apply(this);this.type="REMOVEFORMAT";this.hasGroup=false;this._isActive=false;this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_removeformat_button",title:" Remove Format "})};this._render();this._initEvent()};YK.RemoveFormat.prototype=new YK.ToolButton();YK.RemoveFormat.prototype.constructor=YK.RemoveFormat;YK.RemoveFormat.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"mouseup",function(){a.emit("activated","RemoveFormat")})};YK.InsertImage=function(){YK.ToolButton.apply(this);this.hasGroup=false;this.type="INSERTIMAGE";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_insertimage_button",title:" Insert Image "})};this._render();this._initEvent()};YK.InsertImage.prototype=new YK.ToolButton();YK.InsertImage.prototype.constructor=YK.InsertImage;YK.InsertImage.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"click",function(){a._createInsertImagePopup()})};YK.InsertImage.prototype._createInsertImagePopup=function(){new YK.InsertImagePopupBuilder(this)};YK.InsertImagePopupBuilder=function(a){YK.PopupBuilder.apply(this,[a]);this._renderContent=function(){var b=this;var k=YK.Event;var g=new YK.NoteBook();g.getNode().childNodes[2].style.borderBottom="0px";g.getNode().childNodes[2].style.borderLeft="0px";g.getNode().childNodes[2].style.borderRight="0px";var f=new YK.VBoxFactory(false,10);var h=new YK.TableFactory(2,2,false,false,20);var c=new YK.Label("Image URL: ");this._entry=new YK.Entry();this._entry.resizeEntryByFont(16);this._entry.resizeHeight(26);this._entry.setWidthChars(36);this._entry.setDisplayLabel("Please insert a link here");var d=new YK.HBoxFactory(false,10);this._okButton=new YK.Button("Insert");this._okButton.resetMinSize(82,28);this._okButton.setEnable(false);this._cancelButton=new YK.Button("Cancel");this._cancelButton.resetMinSize(82,28);d.appendChild(this._okButton,{expand:true,fill:true,padding:0});d.appendChild(this._cancelButton,{expand:true,fill:true,padding:0});h.attach(c,0,1,0,1,{align:YK.JUSTIFY_RIGHT,fill:true},{align:YK.JUSTIFY_RIGHT,fill:true},20,24);h.attach(this._entry,1,2,0,1,{align:YK.JUSTIFY_LEFT,fill:false},{align:YK.JUSTIFY_CENTER,fill:true},16,20);h.attach(d,1,2,1,2,{align:YK.JUSTIFY_RIGHT,fill:false},{align:YK.JUSTIFY_RIGHT,fill:true},1,30);f.appendChild(h,{expand:true,fill:true,padding:0});g.appendPage({tab:new YK.Label("Linked Image"),padding:10},{content:f,padding:3});g.resetMinHeight(170);g.resetMinWidth(300);return g};this._activate=function(){var b=YK.Util.trim(this._entry.getText()).length>20;if(b){this._insertImage()}else{this._resetEntry()}this._popup.close()};this._insertImage=function(){this._tool.emit("activated","InsertImage",this._entry.getText())};this._resetEntry=function(){this._entry.setText("");this._entry.setFocus()};this._render();this._initEvent();this._popup.setTitle("Add an image link:")};YK.InsertVideo=function(){YK.ToolButton.apply(this);this.hasGroup=false;this.type="INSERTVIDEO";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_insertvideo_button",title:" Insert Video "})};this._render();this._initEvent()};YK.InsertVideo.prototype=new YK.ToolButton();YK.InsertVideo.prototype.constructor=YK.InsertVideo;YK.InsertVideo.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"click",function(){a._createInsertVideoPopup()})};YK.InsertVideo.prototype._createInsertVideoPopup=function(){new YK.InsertVideoPopupBuilder(this)};YK.InsertVideoPopupBuilder=function(a){YK.PopupBuilder.apply(this,[a]);this._renderContent=function(){var b=this;var k=YK.Event;var g=new YK.NoteBook();g.getNode().childNodes[2].style.borderBottom="0px";g.getNode().childNodes[2].style.borderLeft="0px";g.getNode().childNodes[2].style.borderRight="0px";var f=new YK.VBoxFactory(false,10);var h=new YK.TableFactory(2,2,false,false,20);var c=new YK.Label("Video URL: ");this._entry=new YK.Entry();this._entry.resizeEntryByFont(16);this._entry.resizeHeight(26);this._entry.setWidthChars(36);this._entry.setDisplayLabel("Please insert a link here");var d=new YK.HBoxFactory(false,10);this._okButton=new YK.Button("Insert");this._okButton.resetMinSize(82,28);this._okButton.setEnable(false);this._cancelButton=new YK.Button("Cancel");this._cancelButton.resetMinSize(82,28);d.appendChild(this._okButton,{expand:true,fill:true,padding:0});d.appendChild(this._cancelButton,{expand:true,fill:true,padding:0});h.attach(c,0,1,0,1,{align:YK.JUSTIFY_RIGHT,fill:true},{align:YK.JUSTIFY_RIGHT,fill:true},20,24);h.attach(this._entry,1,2,0,1,{align:YK.JUSTIFY_LEFT,fill:false},{align:YK.JUSTIFY_CENTER,fill:true},16,20);h.attach(d,1,2,1,2,{align:YK.JUSTIFY_RIGHT,fill:false},{align:YK.JUSTIFY_RIGHT,fill:true},1,30);f.appendChild(h,{expand:true,fill:true,padding:0});g.appendPage({tab:new YK.Label("Linked Video"),padding:10},{content:f,padding:3});g.resetMinHeight(170);g.resetMinWidth(300);return g};this._activate=function(){var c=YK.Util.trim(this._entry.getText());var b=c.length>20;if(b){this._constructVideoContainer(c)}else{this._resetEntry()}this._popup.close()};this._constructVideoContainer=function(c){var b="<div class='yk_text_editor_video_border' style='width: 350px; height: 280px; padding: 7px; border: 3px solid #666666; background-color: #DADADA; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 3px 3px 7px #BABABA; -webkit-box-shadow: 3px 3px 7px #BABABA; box-shadow: 3px 3px 7px #BABABA;'><object width='350' height='280' id='yk_text_editor_video' class='yk_text_editor_video' type='application/x-shockwave-flash' ";b+=" data='"+c+"'";b+="<param name='wmode' value='transparent' />";b+="<param name='src' value='"+c+"' /></object></div>";this._tool.emit("activated","inserthtml",b)};this._resetEntry=function(){this._entry.setText("");this._entry.setFocus()};this._render();this._initEvent();this._popup.setTitle("Add a video or an object link:")};YK.InsertLink=function(){YK.ToolButton.apply(this);this.hasGroup=false;this._isActive=false;this.type="LINK";this._selectedText="";this._selectedTextObj={anchorNode:YK.domBuilder.create({tag:"BODY"})};this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_insertlink_button",title:" Insert Link "})};this._render();this._initEvent()};YK.InsertLink.prototype=new YK.ToolButton();YK.InsertLink.prototype.constructor=YK.InsertLink;YK.InsertLink.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"click",function(){if(!a._isAlink()){a._createInsertLinkPopup()}else{a.emit("activated","unlink")}})};YK.InsertLink.prototype._isAlink=function(){var a=this._selectedTextObj.anchorNode;while(a.tagName!="BODY"){if(a.tagName=="A"){return true}else{a=a.parentNode}}return false};YK.InsertLink.prototype._createInsertLinkPopup=function(){new YK.InsertLinkPopupBuilder(this)};YK.InsertLink.prototype.activate=function(){this._selectedText=this._editorObj.getSelectedText();this._selectedTextObj=this._editorObj.getSelectedObj();if(!this._isAlink()){this.deactivate();return}this._domObj.className+=" yk_text_editor_active";this._isActive=true};YK.InsertLink.prototype.deactivate=function(){this._domObj.className="yk_text_editor_insertlink_button";this._isActive=false};YK.InsertLinkPopupBuilder=function(a){YK.PopupBuilder.apply(this,[a]);this._renderContent=function(){var b=this;var g=new YK.VBoxFactory(false,10);var f=new YK.TableFactory(2,2,false,false,30);var c=new YK.Label("Link to: ");this._entry=new YK.Entry();this._entry.resizeEntryByFont(16);this._entry.resizeHeight(28);this._entry.setWidthChars(36);this._entry.setText("http://");var d=new YK.HBoxFactory(false,0);this._okButton=new YK.Button("Ok");this._okButton.resetMinSize(82,26);this._okButton.setEnable(false);this._cancelButton=new YK.Button("Cancel");this._cancelButton.resetMinSize(82,26);d.appendChild(this._okButton,{expand:true,fill:true,padding:0});d.appendChild(this._cancelButton,{expand:true,fill:true,padding:10});f.attach(c,0,1,0,1,{align:YK.JUSTIFY_RIGHT,fill:true},{align:YK.JUSTIFY_CENTER,fill:true},30,24);f.attach(this._entry,1,2,0,1,{align:YK.JUSTIFY_RIGHT,fill:false},{align:YK.JUSTIFY_RIGHT,fill:true},10,20);f.attach(d,1,2,1,2,{align:YK.JUSTIFY_RIGHT,fill:false},{align:YK.JUSTIFY_CENTER,fill:true},1,30);f.resizeHeight(150);g.appendChild(f,{expand:true,fill:true,padding:0});g.resetMinWidth(400);g.resetMinHeight(135);return g};this._activate=function(){var c=YK.Util.trim(this._entry.getText());if(c.length<10){return}var b=this._tool._selectedText.length>0;if(b){this._createLink(c)}else{this._insertLink(c)}this._popup.close()};this._createLink=function(b){this._tool.emit("activated","createLink",b)};this._insertLink=function(b){var c="<a href="+b+">"+b+"</a>";this._tool.emit("activated","inserthtml",c)};this._render();this._initEvent();this._popup.setTitle("Add a link or URL:")};YK.ViewSource=function(){YK.ToolButton.apply(this);this.hasGroup=false;this.type="VIEWSOURCE";this._HTMLText="";this._render=function(){this._domObj=YK.domBuilder.create({tag:"div","class":"yk_text_editor_viewsource_button",title:" View Source Code "})};this._render();this._initEvent()};YK.ViewSource.prototype=new YK.ToolButton();YK.ViewSource.prototype.constructor=YK.ViewSource;YK.ViewSource.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"click",function(){a._createViewSourcePopup()})};YK.ViewSource.prototype._createViewSourcePopup=function(){new YK.ViewSourcePopupBuilder(this)};YK.ViewSource.prototype.activate=function(){this._HTMLText=this._editorObj.getHTMLText()};gobject.signalNew("htmlupdated",YK.ViewSource,null,null,[]);YK.ViewSourcePopupBuilder=function(a){YK.PopupBuilder.apply(this,[a]);this._render=function(){this._popup=this._renderWindow();var b=this._renderContent();this._popup.appendChild(b);this._entry.setValue(this._tool._HTMLText);this._entry.setFocus()};this._renderContent=function(){var c=this;var g=YK.Event;var f=new YK.TableFactory(2,1,false,0);var d=new YK.VBoxFactory(false,0,10);this._entry=new YK.TextView();this._entry.resetMinSize(570,180);this._entry.getNode().style.fontSize="14px";this._entry.getNode().style.fontFamily="Monospace, Courier, Courier New";var b=new YK.HBoxFactory(false,10);b.lockWidth();b.resetMinHeight(40);this._okButton=new YK.Button("Update");this._okButton.resetMinSize(82,28);this._cancelButton=new YK.Button("Close");this._cancelButton.resetMinSize(82,28);b.appendChild(this._okButton,{expand:false,fill:false,padding:0,resizableHeight:false});b.appendChild(this._cancelButton,{expand:false,fill:false,padding:0,resizableHeight:false});d.appendChild(this._entry,{expand:true,fill:false,padding:5});f.attach(d,0,1,0,1,{align:YK.JUSTIFY_CENTER,fill:true},{align:YK.JUSTIFY_CENTER,fill:true},0,0);f.attach(b,0,1,1,2,{align:YK.JUSTIFY_RIGHT,fill:false},{align:YK.JUSTIFY_RIGHT,fill:false},10,20);YK.PopupBuilder.apply(this,[a]);return f};this._activate=function(){var b=this._entry.getValue();this._tool.emit("htmlupdated",b);this._popup.close()};this._render();this._initEvent();this._popup.setTitle("View as HTML Source Code:")};YK.TextEditor=function(b){this._editorObj=new YK.Editor(b);var a=new YK.EditorToolbar();this._editorObj.appendToolBar(a);a.appendTool(new YK.BoldButton());a.appendTool(new YK.ItalicButton());a.appendTool(new YK.UnderlineButton());a.appendTool(new YK.StrikeButton());a.appendTool(new YK.JustifiedLeft());a.appendTool(new YK.JustifiedCenter());a.appendTool(new YK.JustifiedRight());a.appendTool(new YK.JustifiedFull());a.appendTool(new YK.TextColor());a.appendTool(new YK.HiliteColor());a.appendTool(new YK.FontType());a.appendTool(new YK.FontSize());a.appendTool(new YK.Heading());a.appendTool(new YK.BulletedList());a.appendTool(new YK.OrderedList());a.appendTool(new YK.Indent());a.appendTool(new YK.Outdent());a.appendTool(new YK.RemoveFormat());a.appendTool(new YK.InsertImage());a.appendTool(new YK.InsertVideo());a.appendTool(new YK.InsertLink());a.appendTool(new YK.ViewSource());return this._editorObj};YK.LiquidBox=function(b,c,a){YK.Widget.apply(this);this.LIQUIDBOX_REFRESHED="refreshed";this._width=this._minWidth=b;this._height=this._minHeight=10;this._spacing=c||0;this._children=[];this._childrenGrid=null;this._maxChildWidth=0;this._maxChildHeight=0;this._columns=0;this._rows=1;this._draggable=a!==undefined?a:false;this._render=function(){var d=this._domObj;d.className+=" liquidbox"};this._render()};YK.LiquidBox.prototype=new YK.Widget();YK.LiquidBox.prototype.constructor=YK.LiquidBox;YK.LiquidBox.prototype.appendChild=function(c,b){c.setParent(this);var a=this._createChildNodeHolder();a.appendChild(c.getNode());this._children.push({childWidget:c,nodeHolder:a,fill:b.fill||false,padding:b.padding||0});this._resetMaxChildWidth(c,b.padding||0);this._resetMaxChildHeight(c,b.padding||0);this.emit("refreshed");this.resizeWidth(this._width)};YK.LiquidBox.prototype.getChildrenLength=function(){return this._children.length};YK.LiquidBox.prototype.insertBefore=function(b,c,a){this.appendChild(b,a);this._rearrangChildren(b,c);this.refresh()};YK.LiquidBox.prototype.refresh=function(){this._resetMaxChildrenWidthAndMaxChildrenHeight();this.resizeWidth(this._width);this.resizeHeight(this._height);this._removeBorderFromChildNodeHolder()};YK.LiquidBox.prototype._emitRefresh=function(){var a=Math.ceil(this._children.length/this._columns)};YK.LiquidBox.prototype._removeBorderFromChildNodeHolder=function(){var b=this._domObj.childNodes;for(var a=b.length;a--;){b[a].style.border="1px solid #FFF";b[a].style.backgroundColor=""}};YK.LiquidBox.prototype._rearrangChildren=function(f,h){var b=this._children[this._getIndexOfChild(f)];var c=b.nodeHolder;this._domObj.removeChild(c);var g=this._children[this._getIndexOfChild(h)];var d=g.nodeHolder;this._domObj.insertBefore(c,d);this._children.pop();var a=this._getIndexOfChild(h);this._children.splice(a,0,b)};YK.LiquidBox.prototype.removeByIndex=function(a){var b=this._children[a]["nodeHolder"];b.parentNode.removeChild(b);this._children.splice(a,1);this.resizeWidth(this._width);this.emit("refreshed")};YK.LiquidBox.prototype._getIndexOfChild=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["childWidget"]===c){return b}}return -1};YK.LiquidBox.prototype.removeChild=function(b){var a=this._getIndexOfChild(b);if(a===-1){YK.Util.debug("The child does not belong to the parent")}this._children.splice(a,1);this._domObj.removeChild(b.getNode().parentNode);this.resizeWidth(this._width);this.emit("refreshed")};YK.LiquidBox.prototype._resetColumns=function(){this._columns=Math.floor(this._width/this._maxChildWidth)};YK.LiquidBox.prototype._resetRows=function(){var a=Math.ceil(this._children.length/this._columns);this._rows=a};YK.LiquidBox.prototype._resetMaxChildWidth=function(b,c){var a=b.getMinWidth()+c*2+this._spacing;this._maxChildWidth=a>this._maxChildWidth?a:this._maxChildWidth};YK.LiquidBox.prototype._resetMaxChildHeight=function(b,c){var a=b.getMinHeight()+c*2+this._spacing;this._maxChildHeight=a>this._maxChildHeight?a:this._maxChildHeight};YK.LiquidBox.prototype._handleFilledChild=function(a){a.childWidget.resizeWidth(this._maxChildWidth-a.padding*2);a.childWidget.resizeHeight(this._maxChildHeight-a.padding*2);a.childWidget.getNode().style.left=a.padding+"px";a.childWidget.getNode().style.top=a.padding+"px"};YK.LiquidBox.prototype._handleNoneFillChild=function(c){var b=c.childWidget.getMinWidth();var a=c.childWidget.getMinHeight();c.childWidget.getNode().style.left=this._maxChildWidth/2-b/2+"px";c.childWidget.getNode().style.top=this._maxChildHeight/2-a/2+"px"};YK.LiquidBox.prototype._resizeChildNodeHolder=function(a){a.style.width=this._maxChildWidth+"px";a.style.height=this._maxChildHeight+"px"};YK.LiquidBox.prototype._positionChildNodeHolder=function(a,b,c){a.style.left=(this._maxChildWidth)*b+"px";a.style.top=(this._maxChildHeight)*c+"px"};YK.LiquidBox.prototype._resize=function(){var d=document.createDocumentFragment();for(var c=0;c<this._rows;c++){for(var b=0;b<this._columns;b++){var f=this._childrenGrid[c][b];if(f===undefined){break}var a=f.nodeHolder;d.appendChild(a);this._positionChildNodeHolder(a,b,c);this._resizeChildNodeHolder(a);if(f.fill){this._handleFilledChild(f)}else{this._handleNoneFillChild(f)}}}this._domObj.appendChild(d);this.resizeHeight(this.getMinHeight())};YK.LiquidBox.prototype._getChildObjectBy=function(d,c){var b=this._children;for(var a=b.length;a--;){if(b[a][d]===c){return b[a]}}};YK.LiquidBox.prototype.getNextSibling=function(a){var b=this._isChild(a);if(b===this._children.length-1){return null}return this._children[b+1]["childWidget"]};YK.LiquidBox.prototype._isChild=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["childWidget"]===c){return b}}return false};YK.LiquidBox.prototype._createChildNodeHolder=function(){var a=YK.domBuilder.create({tag:"div",id:"yk_liquid_box_childnode_holder_"+YK.LibAdapter.getGUID(),"class":"yk_liquid_box_childnode_holder"});var b=YK.domBuilder.create({append:a,tag:"div","class":"yk_liquid_box_childnode_holder_handle"});if(this._draggable){this._enableDrag(a)}return a};YK.LiquidBox.prototype._enableDrag=function(b){var a=this,c=b.firstChild;YK.Event.addDomListener(b,"mouseover",function(){b.style.border="1px solid #D5D5D5";YK.domBuilder.showElement(c)});YK.Event.addDomListener(b,"mouseout",function(){b.style.border="1px solid #FFF";YK.domBuilder.hideElement(c)});YK.Event.addDomListener(c,"mouseover",function(){b.draggable=true});YK.Event.addDomListener(c,"mouseout",function(){b.draggable=false});b.ondragstart=function(d){d.dataTransfer.effectAllowed="move";d.dataTransfer.dropEffect="move";d.dataTransfer.setData("Text",d.target.getAttribute("id"));d.dataTransfer.setDragImage(b,d.layerX,d.layerY);return true};b.ondrop=function(h){var m=h.dataTransfer.getData("Text");var d=document.querySelector("#"+m);var l=a._getChildObjectBy("nodeHolder",d);if(l===undefined){return false}var k=l.childWidget;var f=a._getChildObjectBy("nodeHolder",this);var g=f.childWidget;if(a.getNextSibling(k)===g){a.removeChild(g);a.insertBefore(g,k,f)}else{a.removeChild(k);a.insertBefore(k,g,l)}h.stopPropagation();return true};b.ondragover=function(f){b.style.border="1px solid #D5D5D5";b.style.backgroundColor="#FFFDCF";var g=f.dataTransfer.getData("Text");var d=document.querySelector("#"+g);if(d===this){return true}return false};b.ondragleave=function(d){b.style.border="1px solid #FFF";b.style.backgroundColor="";YK.domBuilder.hideElement(c)}};YK.LiquidBox.prototype._resetMaxChildrenWidthAndMaxChildrenHeight=function(){for(var b=0,a=this._children.length;b<a;b++){var c=this._children[b];this._resetMaxChildWidth(c.childWidget,c.padding);this._resetMaxChildHeight(c.childWidget,c.padding)}};YK.LiquidBox.prototype._resetChildrenGrid=function(){var g=new Array(this._rows);for(var d=0,a=this._rows;d<a;d++){g[d]=new Array(this._columns)}var c=0;for(var d=0,a=this._rows;d<a;d++){for(var b=0,f=this._columns;b<f;b++){g[d][b]=this._children[c];c++}}this._childrenGrid=g};YK.LiquidBox.prototype.getMinHeight=function(){return this._maxChildHeight*this._rows};YK.LiquidBox.prototype.resizeHeight=function(a){var b=this.getMinHeight();b=b<a?a:b;this._resizeHeight(b)};YK.LiquidBox.prototype.getMinWidth=function(){return this._minWidth};YK.LiquidBox.prototype.resizeWidth=function(b){var a=this.getMinWidth();a=a<b?b:a;this._resizeWidth(a);this._resetColumns();this._resetRows();this._resetChildrenGrid();this._resize()};gobject.signalNew("refreshed",YK.LiquidBox,null,null,[]);YK.MultiPanelContainer=function(){YK.Widget.apply(this);this._width=this._minWidth=20;this._height=this._minHeight=20;this._loadingImgWidth=150;this._activeChild=null;this._children=[];this._render=function(){var b=YK.domBuilder;var a=this._domObj;a.className+=" yk_multipanelcontainer";this._grayText=YK.domBuilder.create({append:a,tag:"table","class":"yk_multipanelcontainer_table"});var c=YK.domBuilder.create({append:this._grayText,tag:"tr"});var d=YK.domBuilder.create({append:c,tag:"td","class":"yk_multipanelcontainer_tr_gray_text",text:"Text"});this._loadingDom=YK.domBuilder.create({append:a,tag:"table","class":"yk_multipanelcontainer_loading"});this._loadingDom.style.zIndex=YK.PANEL_MULTICONTAINER_ZINDEX;var c=YK.domBuilder.create({append:this._loadingDom,tag:"tr"});var d=YK.domBuilder.create({append:c,tag:"td","class":"yk_multipanelcontainer_tr_loading"});this._loadingImg=YK.domBuilder.create({append:d,tag:"div","class":"yk_multipanelcontainer_tr_loaing_img"});YK.domBuilder.hideElement(this._loadingDom)};this._render()};YK.MultiPanelContainer.prototype=new YK.Widget();YK.MultiPanelContainer.prototype.constructor=YK.MultiPanelContainer;YK.MultiPanelContainer.prototype.showLoading=function(){YK.domBuilder.showElement(this._loadingDom);YK.domBuilder.hideElement(this._grayText)};YK.MultiPanelContainer.prototype.hideLoading=function(){YK.domBuilder.showElement(this._grayText);YK.domBuilder.hideElement(this._loadingDom)};YK.MultiPanelContainer.prototype.setText=function(a){this._grayText.rows[0].firstChild.innerHTML=a};YK.MultiPanelContainer.prototype.getActiveChild=function(){var c=false;for(var b=2,a=this._domObj.childNodes.length;b<a;b++){var d=this._domObj.childNodes[b].firstChild;if(d.style.display!=="none"){c=true}}if(c){return this._activeChild}else{return null}};YK.MultiPanelContainer.prototype.removeChild=function(c){for(var b=0,a=this._children.length;b<a;b++){var d=this._children[b];if(d.childWidget===c){d.holder.parentNode.removeChild(d.holder);this._children.splice(b,1);return}}};YK.MultiPanelContainer.prototype.appendChild=function(a){this._storeChild(a);this.setActiveChild(a);this._resetMinWidthMinHeight(a);this.resizeWidth(this._width);this.resizeHeight(this._height);this._initEvent(a)};YK.MultiPanelContainer.prototype._storeChild=function(c){var b=this._createChildHolder();b.appendChild(c.getNode());var a={holder:b,childWidget:c};this._children.push(a);this._domObj.appendChild(b)};YK.MultiPanelContainer.prototype._initEvent=function(b){var a=this;b.connect("restored",function(c){a.setActiveChild(c)});b.connect("closed",function(c){a.removeChild(c)})};YK.MultiPanelContainer.prototype.setActiveChild=function(b){if(this._activeChild){this._activeChild.minimize()}this._activeChild=b;var a=this;this._activeChild.connect("minimized",function(){a._activeChild=null})};YK.MultiPanelContainer.prototype._getIndexOfChild=function(c){for(var b=0,a=this._children.length;b<a;b++){var d=this._children[b];if(d.childWidget===c){return b}}return null};YK.MultiPanelContainer.prototype.replaceChild=function(b,c){var a=this._getIndexOfChild(c);if(!a){return}this._domObj.removeChild(this._children[a]["holder"]);this._children.splice(a,1);this.appendChild(b)};YK.MultiPanelContainer.prototype.getChildren=function(){var c=[];for(var b=0,a=this._children.length;b<a;b++){c.push(this._children[b]["childWidget"])}return c};YK.MultiPanelContainer.prototype._positionLoadingImg=function(a){this._loadingImg.style.left=a/2-this._loadingImgWidth/2+"px"};YK.MultiPanelContainer.prototype._resizeChildrenWidth=function(b){for(var a=this._children.length;a--;){var c=this._children[a];c.childWidget.resizeWidth(b);c.holder.style.width=b+"px"}};YK.MultiPanelContainer.prototype._resizeChildrenHeight=function(a){for(var b=this._children.length;b--;){var c=this._children[b];c.childWidget.resizeHeight(a);c.holder.style.height=a+"px"}};YK.MultiPanelContainer.prototype._createChildHolder=function(){var a=YK.domBuilder.create({tag:"div","class":"yk_multipanelcontainer_widget_holder"});return a};YK.MultiPanelContainer.prototype._resetMinWidthMinHeight=function(c){var b=c.getMinWidth();this._minWidth=b>this._minWidth?b:this._minWidth;var a=c.getMinHeight();this._minHeight=a>this._minHeight?a:this._minHeight};YK.MultiPanelContainer.prototype.resizeWidth=function(b){var a=this._minWidth<b?b:this._minWidth;this._resizeWidth(a);this._positionLoadingImg(a);if(this._children.length>0){this._resizeChildrenWidth(a)}};YK.MultiPanelContainer.prototype.resizeHeight=function(a){var b=this._minHeight<a?a:this._minHeight;this._resizeHeight(b);if(this._children.length>0){this._resizeChildrenHeight(b)}};YK.List=function(){YK.Widget.apply(this);this._minWidth=this._width=150;this._minHeight=this._height=16;this.List_CLICKED="";this._render=function(){this._domObj.className+=" yk_list";this.__ul=YK.domBuilder.create({tag:"ul",append:this._domObj})};this._domObj.style.width=this._width+"px";this._domObj.style.height=this._height+"px";this._render();this._initEvents()};YK.List.prototype=new YK.Widget();YK.List.prototype.constructor=YK.List;YK.List.prototype.setModel=function(a){this.__model=a;this.__constroller=new YK.ListController(this,a)};YK.List.prototype._renderList=function(f,k){var h=k||document.createDocumentFragment();if(f.children!=null){var b=f.children;var d=b.length}else{var b=f;var d=b.length}for(var c=0;c<d;c++){var a=b[c];if(a.children==null){var l=YK.domBuilder.create({tag:"li",style:a.style,text:a.value,id:"yk_list_li_"+c+"_"+this._id,append:h,tabIndex:"0"});l.style.listStyleType=a.type;this._handleLiEvent(l)}else{var l=YK.domBuilder.create({tag:"li",style:a.style,text:a.value,id:"yk_list_li_"+c+"_"+this._id,append:h,tabIndex:"0"});l.style.listStyleType=a.type;var g=YK.domBuilder.create({tag:"ul",style:a.style,append:l,style:"list-style-type: "+a.type});this._renderList(a.children,g);this._handleLiEvent(l)}}return h};YK.List.prototype._handleLiEvent=function(a){var b=false;YK.Event.addDomListener(a,"focus",function(){if(!b){YK.domBuilder.applyAttributes(a,{border:"1px dashed gray"})}});YK.Event.addDomListener(a,"blur",function(){YK.domBuilder.applyAttributes(a,{border:""})});YK.Event.addDomListener(a,"mousedown",function(){YK.domBuilder.applyAttributes(a,{border:""});b=true});YK.Event.addDomListener(a,"mouseup",function(){YK.domBuilder.applyAttributes(a,{border:""});b=false})};YK.List.prototype._initEvents=function(){var a=this;YK.Event.addDomListener(this.__ul,"click",function(){a.emit("clicked",a._getItemsValue())})};YK.List.prototype._appendList=function(a){if(this.__ul.childNodes){this.__ul.innerHTML=""}this.__ul.appendChild(a)};YK.List.prototype.setListType=function(a){this.__ul.style.listStyleType=a};YK.List.prototype.setLineHeight=function(a){this.__ul.style.lineHeight=a+"px";this._calculateDomHeight();this._resize()};YK.List.prototype._getItemsValue=function(){var d=this.__ul.childNodes;var c=d.length;var a=[];for(var b=0;b<c;b++){a.push(d[b].textContent)}return a};YK.List.prototype._calculateDomHeight=function(){var a=this._domObj.childNodes[0].cloneNode(true);a.style.width=this._width-14+"px";this._height=this._minHeight=YK.Util.fullHeight(a);return this._height};YK.List.prototype.getMinWidth=function(){return this._minWidth};YK.List.prototype.getMinHeight=function(){return this._minHeight};YK.List.prototype._resizeHeight=function(a){this._domObj.style.height=a+"px"};YK.List.prototype._resizeWidth=function(a){this._domObj.style.width=a+"px"};YK.List.prototype._resize=function(){this._resizeWidth(this._width);this._resizeHeight(this._height)};YK.List.prototype.resizeWidth=function(a){this._width=this._minWidth=this._width>a?this._width:a;this._calculateDomHeight();this._resize()};YK.List.prototype.resizeHeight=function(a){this._height=this._minHeight=this._height>a?this._height:a;this._resize()};YK.List.prototype.setPointerCursor=function(){this.__ul.style.cursor="pointer";this.__ul.style.cursor="hand"};gobject.signalNew("clicked",YK.List,null,null,[]);YK.ListController=function(a,b){this.__view=a;this.__model=b;this._processData()};YK.ListController.prototype._processData=function(){var a=this.__view._renderList(this.__model);this.__view._appendList(a);this.__view._calculateDomHeight();this.__view._resize()};YK.ListModel=function(){YK.Object.apply(this);this.children=[]};YK.ListModel.prototype=new YK.Object();YK.ListModel.prototype.constructor=YK.ListModel;YK.ListModel.prototype.append=function(a,b){if(a!=null){if(!a.children){a.children=[]}a.children.push(b)}else{this.children.push(b)}return b};YK.ListModel.prototype._getChildren=function(){return this.children==null?null:this.children};YK.Accordion=function(a){YK.Widget.apply(this);this._minWidth=this._width=200;this._minHeight=this._height=30;this._accordionHeaderHeight=22;this._children=[];this._homogeneous=a||true;this._activeIndex=null;this.ACCORDION_ACTIVATED="";this.ACCORDION_DEACTIVATED="";this._render=function(){this._domObj.className+=" yk_accordion"};this._render()};YK.Accordion.prototype=new YK.Widget();YK.Accordion.prototype.constructor=YK.Accordion;YK.Accordion.prototype.appendChild=function(c,b){b.setParent(this);var a=this._createChildObject({title:c,childWidget:b});this._children.push(a);this._appendAccordionNodeHolder(a.accordionNodeHolder);this.resizeWidth(this._width);this.resizeHeight(this._height);this.activate(0)};YK.Accordion.prototype.deActivate=function(b){this._activeIndex=null;for(var c=0,a=this._children.length;c<a;c++){if(c===b){YK.domBuilder.hideElement(this._children[b]["childNodeHolder"]);var d=this._children[b]["headerNodeHolder"].childNodes[1];d.className="yk_accordion_collapseimg";this.emit("deactivated",b)}}};YK.Accordion.prototype.activate=function(b){for(var c=0,a=this._children.length;c<a;c++){if(c===b){YK.domBuilder.showElement(this._children[b]["childNodeHolder"]);var d=this._children[b]["headerNodeHolder"].childNodes[1];d.className="yk_accordion_expandimg";this._activeIndex=b;this.emit("activated",b)}else{YK.domBuilder.hideElement(this._children[c]["childNodeHolder"]);var d=this._children[c]["headerNodeHolder"].childNodes[1];d.className="yk_accordion_collapseimg";this._activeIndex=null}}};YK.Accordion.prototype._getAccordionIndex=function(c){for(var b=0,a=this._children.length;b<a;b++){if(this._children[b]["headerNodeHolder"]===c){return b}}};YK.Accordion.prototype._createAccordionNodeHolder=function(c,b){var a=YK.domBuilder.create({tag:"div",className:"yk_accordion_node_holder"});a.appendChild(c);a.appendChild(b);return a};YK.Accordion.prototype._createHeaderNodeHolder=function(f){var a=YK.domBuilder.create({tag:"div",className:"yk_accordion_header"});var d="ACCORDION-"+YK.LibAdapter.getGUID();a.setAttribute("id",d);var c=YK.domBuilder.create({append:a,text:f,tag:"div",className:"yk_accordion_title"});var b=YK.domBuilder.create({append:a,tag:"span",className:"yk_accordion_collapseimg"});this._initEvent(a);return a};YK.Accordion.prototype._createChildNodeHolder=function(b){var a=YK.domBuilder.create({tag:"div",className:"yk_accordion_child_node_holder"});a.appendChild(b.getNode());return a};YK.Accordion.prototype._createChildObject=function(a){var f=this._createHeaderNodeHolder(a.title);var d=this._createChildNodeHolder(a.childWidget);var b=this._createAccordionNodeHolder(f,d);var c={accordionNodeHolder:b,headerNodeHolder:f,childNodeHolder:d,childWidget:a.childWidget};return c};YK.Accordion.prototype._appendAccordionNodeHolder=function(a){this._domObj.appendChild(a)};YK.Accordion.prototype._getAccordionsHeaderHeight=function(){return this._children.length*this._accordionHeaderHeight};YK.Accordion.prototype._resizeChildrenNodeWidth=function(b){for(var a=this._children.length;a--;){this._children[a]["childWidget"].resizeWidth(b)}};YK.Accordion.prototype._resizeChildrenNodeHeight=function(b){for(var a=this._children.length;a--;){this._children[a]["childWidget"].resizeHeight(b)}};YK.Accordion.prototype.getMinHeight=function(){var c=0;for(var b=this._children.length;b--;){var a=this._children[b]["childWidget"].getMinHeight();c=c<a?a:c}c+=this._children.length*this._accordionHeaderHeight;this._minHeight=this._minHeight<c?c:this._minHeight;return this._minHeight};YK.Accordion.prototype.getMinWidth=function(){for(var b=this._children.length;b--;){var a=this._children[b]["childWidget"].getMinWidth();this._minWidth=this._minWidth<a?a:this._minWidth}return this._minWidth};YK.Accordion.prototype.resizeWidth=function(b){var a=this.getMinWidth();a=a<b?b:a;this._resizeWidth(a);this._resizeChildrenNodeWidth(a)};YK.Accordion.prototype.resizeHeight=function(a){var b=this.getMinHeight();b=b<a?a:b;this._resizeHeight(b);this._resizeChildrenNodeHeight(b-this._getAccordionsHeaderHeight())};YK.Accordion.prototype._initEvent=function(b){var a=this;YK.Event.addDomListener(b,"click",function(d){var c=a._getAccordionIndex(b);a.activate(c);a.emit("activated",c)},false)};gobject.signalNew("activated",YK.Accordion,null,null,[]);gobject.signalNew("deactivated",YK.Accordion,null,null,[]);YK.Tooltip=function(b,c,a){YK.Widget.apply(this);this._width=this._minWidth=100;this._maxWidth=250;this._height=this._minHeight=40;this._tailHeight=15;this._padding=10;this._objContent=null;this._content=c||"Undefined";this._domHost=b||null;this._POSITION=a||YK.POSITION_RIGHT_TOP;this._backgroundColor="#000000";this._borderColor="transparent";this._textColor="#FFFFFF";this._render=function(){this._domObj.className+=" yk_tooltip";this._domObj.setAttribute("id","yk_tooltip");this._domObj.style.position="absolute";this._domBody=YK.domBuilder.create({append:this._domObj,tag:"div","class":" yk_tooltip_body"});this._domTail=YK.domBuilder.create({append:this._domObj,tag:"canvas",id:"yk_tooltip_tail",width:15,height:15});document.body.appendChild(this._domObj)};this._render();this._construct()};YK.Tooltip.prototype=new YK.Widget();YK.Tooltip.prototype.constructor=YK.Tooltip;YK.Tooltip.prototype.show=function(){this.setConfig();this._drawTooltipTail();this._positionTooltip();this.emit("shown");YK.Effect.setOpacity(this._domObj,0,100,500,60);YK.domBuilder.showElement(this._domObj)};YK.Tooltip.prototype.hide=function(){this.emit("hidden");this.emit("closed");YK.domBuilder.hideElement(this._domObj)};YK.Tooltip.prototype._construct=function(){this._addContent();this._resize();this.hide()};YK.Tooltip.prototype.setConfig=function(a){if(typeof a!=="undefined"){this._objContent=a;this._backgroundColor=a.backgroundColor;this._textColor=a.textColor;this._borderColor=a.borderColor}YK.domBuilder.applyAttributes(this._domBody,{backgroundColor:this._backgroundColor,color:this._textColor,borderColor:this._borderColor})};YK.Tooltip.prototype._drawTooltipTail=function(){var l=this._POSITION===YK.POSITION_TOP_RIGHT;if(l){return this._drawTailTopRight()}var b=this._POSITION===YK.POSITION_TOP_CENTER;if(b){return this._drawTailTopCenter()}var g=this._POSITION===YK.POSITION_TOP_LEFT;if(g){return this._drawTailTopLeft()}var c=this._POSITION===YK.POSITION_BOTTOM_RIGHT;if(c){return this._drawTailBottomRight()}var f=this._POSITION===YK.POSITION_BOTTOM_CENTER;if(f){return this._drawTailBottomCenter()}var m=this._POSITION===YK.POSITION_BOTTOM_LEFT;if(m){return this._drawTailBottomLeft()}var h=this._POSITION===YK.POSITION_RIGHT_TOP;if(h){return this._drawTailRightTop()}var q=this._POSITION===YK.POSITION_RIGHT_MIDDLE;if(q){return this._drawTailRightMiddle()}var r=this._POSITION===YK.POSITION_RIGHT_BOTTOM;if(r){return this._drawTailRightBottom()}var s=this._POSITION===YK.POSITION_LEFT_TOP;if(s){return this._drawTailLeftTop()}var n=this._POSITION===YK.POSITION_LEFT_MIDDLE;if(n){return this._drawTailLeftMiddle()}var p=this._POSITION===YK.POSITION_LEFT_BOTTOM;if(p){return this._drawTailLeftBottom()}var o=this._POSITION===YK.POSITION_JUSTIFIED_TOPLEFT;if(o){return this._drawTailJustifiedTopLeft()}var d=this._POSITION===YK.POSITION_JUSTIFIED_TOPRIGHT;if(d){return this._drawTailJustifiedTopRight()}var a=this._POSITION===YK.POSITION_JUSTIFIED_BOTTOMLEFT;if(a){return this._drawTailJustifiedBottomLeft()}var k=this._POSITION===YK.POSITION_JUSTIFIED_BOTTOMRIGHT;if(k){return this._drawTailJustifiedBottomRight()}};YK.Tooltip.prototype._drawTailTopRight=function(){this._drawTailTop();this._domTail.className="yk_tooltip_top_right"};YK.Tooltip.prototype._drawTailTopCenter=function(){this._drawTailTop();this._domTail.className="yk_tooltip_top_center"};YK.Tooltip.prototype._drawTailTopLeft=function(){this._drawTailTop();this._domTail.className="yk_tooltip_top_left"};YK.Tooltip.prototype._drawTailBottomRight=function(){this._drawTailBottom();this._domTail.className="yk_tooltip_bottom_right"};YK.Tooltip.prototype._drawTailBottomCenter=function(){this._drawTailBottom();this._domTail.className="yk_tooltip_bottom_center"};YK.Tooltip.prototype._drawTailBottomLeft=function(){this._drawTailBottom();this._domTail.className="yk_tooltip_bottom_left"};YK.Tooltip.prototype._drawTailRightTop=function(){this._drawTailRight();this._domTail.className="yk_tooltip_right_top"};YK.Tooltip.prototype._drawTailRightMiddle=function(){this._drawTailRight();this._domTail.className="yk_tooltip_right_middle";this._domTail.style.top=(this._height-this._tailHeight)/2+-10+"px"};YK.Tooltip.prototype._drawTailRightBottom=function(){this._drawTailRight();this._domTail.className="yk_tooltip_right_bottom"};YK.Tooltip.prototype._drawTailLeftTop=function(){this._drawTailLeft();this._domTail.className="yk_tooltip_left_top"};YK.Tooltip.prototype._drawTailLeftMiddle=function(){this._drawTailLeft();this._domTail.className="yk_tooltip_left_middle";this._domTail.style.top=(this._height-this._tailHeight)/2+-7+"px"};YK.Tooltip.prototype._drawTailLeftBottom=function(){this._drawTailLeft();this._domTail.className="yk_tooltip_left_bottom"};YK.Tooltip.prototype._drawTailJustifiedTopLeft=function(){this._drawTailTop();this._domTail.className="yk_tooltip_justified_topleft"};YK.Tooltip.prototype._drawTailJustifiedTopRight=function(){this._drawTailTop();this._domTail.className="yk_tooltip_justified_topright"};YK.Tooltip.prototype._drawTailJustifiedBottomLeft=function(){this._drawTailBottom();this._domTail.className="yk_tooltip_justified_bottomleft"};YK.Tooltip.prototype._drawTailJustifiedBottomRight=function(){this._drawTailBottom();this._domTail.className="yk_tooltip_justified_bottomright"};YK.Tooltip.prototype._drawTailTop=function(){this._drawCanvas({x:3,y:0},{x:9,y:7},{x:15,y:0})};YK.Tooltip.prototype._drawTailBottom=function(){this._drawCanvas({x:3,y:13},{x:9,y:6},{x:15,y:13})};YK.Tooltip.prototype._drawTailRight=function(){this._drawCanvas({x:15,y:3},{x:9,y:9},{x:15,y:15})};YK.Tooltip.prototype._drawTailLeft=function(){this._drawCanvas({x:0,y:3},{x:7,y:9},{x:0,y:15})};YK.Tooltip.prototype._drawCanvas=function(f,d,c){var b=this._domTail;if(b.getContext){var a=b.getContext("2d");a.beginPath();a.moveTo(f.x,f.y);a.lineTo(d.x,d.y);a.lineTo(c.x,c.y);a.fillStyle=this._backgroundColor;a.strokeStyle=this._borderColor;a.lineWidth=1;a.fill();a.stroke()}};YK.Tooltip.prototype._positionTooltip=function(){var a=this._getPosition();var c=a[0];var b=a[1];this._domObj.style.left=c+"px";this._domObj.style.top=b+"px"};YK.Tooltip.prototype._getPosition=function(){var s=0;var f=0;var l=this._domHost;var z=YK.Util.pageX(l);var r=YK.Util.pageY(l);var y=l.cloneNode(true);var x=YK.Util.fullWidth(y);var u=YK.Util.fullHeight(y);var o=this._POSITION===YK.POSITION_TOP_RIGHT;if(o){s=r-this._height+2;f=z+x-40;return[f,s]}var d=this._POSITION===YK.POSITION_TOP_CENTER;if(d){s=r-this._height+2;f=z-(this._width/2)+x/2;return[f,s]}var w=this._POSITION===YK.POSITION_TOP_LEFT;if(w){s=r-this._height+2;f=z-this._width+40;return[f,s]}var h=this._POSITION===YK.POSITION_BOTTOM_RIGHT;if(h){s=r+u+this._tailHeight-4;f=z+(x/3)*2;return[f,s]}var n=this._POSITION===YK.POSITION_BOTTOM_CENTER;if(n){s=r+u+this._tailHeight-4;f=z-(this._width/2)+x/2;return[f,s]}var c=this._POSITION===YK.POSITION_BOTTOM_LEFT;if(c){s=r+u+this._tailHeight-4;f=z-(this._width/3)*2;return[f,s]}var k=this._POSITION===YK.POSITION_RIGHT_TOP;if(k){s=r;f=z+x+15;return[f,s]}var b=this._POSITION===YK.POSITION_RIGHT_MIDDLE;if(b){s=r+u/2-(this._height-this._tailHeight)/2;f=z+x+15;return[f,s]}var a=this._POSITION===YK.POSITION_RIGHT_BOTTOM;if(a){s=r+(u/3)*2-6;f=z+x+15;return[f,s]}var p=this._POSITION===YK.POSITION_LEFT_TOP;if(p){s=r;f=z-this._width-15;return[f,s]}var v=this._POSITION===YK.POSITION_LEFT_MIDDLE;if(v){s=r+u/2-(this._height-this._tailHeight)/2;f=z-this._width-15;return[f,s]}var A=this._POSITION===YK.POSITION_LEFT_BOTTOM;if(A){s=r+u-this._height/2;f=z-this._width-15;return[f,s]}var g=this._POSITION===YK.POSITION_JUSTIFIED_TOPLEFT;if(g){s=r-this._height+2;f=z;return[f,s]}var m=this._POSITION===YK.POSITION_JUSTIFIED_TOPRIGHT;if(m){s=r-this._height+2;f=z+x-this._width;return[f,s]}var t=this._POSITION===YK.POSITION_JUSTIFIED_BOTTOMLEFT;if(t){s=r+this._height+2;f=z;return[f,s]}var q=this._POSITION===YK.POSITION_JUSTIFIED_BOTTOMRIGHT;if(q){s=r+this._height+2;f=z+x-this._width;return[f,s]}};YK.Tooltip.prototype._addContent=function(){this._domBody.innerHTML=this._content};YK.Tooltip.prototype.addContent=function(a){this._content=a||"Undefined";this._addContent();this._resize()};YK.Tooltip.prototype._resize=function(){var b=YK.Util.calculateTextWidth(this._content);this.resizeWidth(b+this._padding*2);var a=YK.Util.calculateTextHeight(this._content,this._width);this.resizeHeight(a+this._tailHeight+this._padding)};YK.Tooltip.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=this._height+"px";this._domBody.style.height=this._height-this._tailHeight-this._padding+"px"};YK.Tooltip.prototype.resizeWidth=function(a){var b=a>this._maxWidth?this._maxWidth:a;b=b<this._minWidth?this._minWidth:b;this._resizeWidth(b)};YK.Tooltip.prototype.resizeHeight=function(a){var b=this._minHeight<a?a:this._minHeight;this._resizeHeight(b)};gobject.signalNew("closed",YK.Tooltip,null,null,[]);gobject.signalNew("hidden",YK.Tooltip,null,null,[]);gobject.signalNew("shown",YK.Tooltip,null,null,[]);YK.ListBoxMenu=function(){YK.Object.apply(this);this._render=function(){this._menuContainer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_listbox_menu_container"});this._drawer=YK.domBuilder.create({append:this._menuContainer,tag:"div",id:"yk_listbox_drawer","class":"yk_listbox_drawer"})};this._render()};YK.ListBoxMenu.prototype=new YK.Object();YK.ListBoxMenu.prototype.constructor=YK.ListBoxMenu;YK.ListBoxMenu.prototype.getNode=function(){return this._menuContainer};YK.ListBoxMenu.prototype.buildMenu=function(b){for(el in b){var a=YK.domBuilder.create({append:this._menuContainer,tag:"div","class":"yk_listbox_tool"});a.id="yk_listbox_tool_"+el+"_"+this._id;var c=YK.domBuilder.create({append:a,tag:"div","class":"yk_listbox_tool_frame"});c.className+=" "+b[el]+"_COMMAND";this._handleMenuSelection(a,b[el])}this._handleMenuDrawer()};YK.ListBoxMenu.prototype._drawMenu=function(){this._drawer.className="yk_listbox_drawer";this._menuContainer.style.right=-2+"px"};YK.ListBoxMenu.prototype._pushMenu=function(){this._drawer.className="yk_listbox_drawer_drawed";this._menuContainer.style.right=-26+"px"};YK.ListBoxMenu.prototype._handleMenuDrawer=function(){var a=this;YK.Event.addDomListener(this._drawer,"mousedown",function(b){if(YK.Util.isMatched("yk_listbox_drawer_drawed",this.className)){a._drawMenu()}else{a._pushMenu()}})};YK.ListBoxMenu.prototype._handleMenuSelection=function(c,b){var a=this;YK.Event.addDomListener(c,"mousedown",function(){a.emit("menuselected",b+"_COMMAND")})};gobject.signalNew("menuselected",YK.ListBoxMenu,null,null,[]);YK.ListBoxAccendingSortCommand=function(){this.type="ACCENDING_SORT_COMMAND"};YK.ListBoxAccendingSortCommand.prototype.execute=function(a){rows=[],rowNodes=a.childNodes;for(i=rowNodes.length;i--;){rows.push(rowNodes[i])}rows.sort(function(f,d){var g=f.innerHTML.toLowerCase(),c=d.innerHTML.toLowerCase();if(g===c){return 0}if(g<c){return -1}if(g>c){return 1}});var b=document.createDocumentFragment();for(i=0,len=rows.length;i<len;i++){b.appendChild(rows[i])}a.innerHTML="";a.appendChild(b)};YK.ListBoxDescendingSortCommand=function(){this.type="DESCENDING_SORT_COMMAND"};YK.ListBoxDescendingSortCommand.prototype.execute=function(a){rows=[],rowNodes=a.childNodes;for(i=rowNodes.length;i--;){rows.push(rowNodes[i])}rows.sort(function(f,d){var g=f.innerHTML.toLowerCase(),c=d.innerHTML.toLowerCase();if(g===c){return 0}if(g<c){return 1}if(g>c){return -1}});var b=document.createDocumentFragment();for(i=0,len=rows.length;i<len;i++){b.appendChild(rows[i])}a.innerHTML="";a.appendChild(b)};YK.ListBoxDeleteCommand=function(){this.type="DELETE_COMMAND"};YK.ListBoxDeleteCommand.prototype.execute=function(a){var c=a.childNodes;for(var b=c.length;b--;){if(c[b].style.backgroundColor=="rgb(255, 255, 102)"){a.removeChild(c[b])}}};YK.ListBoxCommandMap=function(){this._commands=[new YK.ListBoxAccendingSortCommand(),new YK.ListBoxDeleteCommand(),new YK.ListBoxDescendingSortCommand()]};YK.ListBoxCommandMap.prototype.execute=function(c,a){for(var b=this._commands.length;b--;){if(this._commands[b].type===c){this._commands[b].execute(a)}}};YK.TwinListBox=function(){YK.Widget.apply(this);this._commandMap=new YK.ListBoxCommandMap();this._host=this._leftListBox=new YK.ListBox();this._guest=this._rightListBox=new YK.ListBox();this._render=function(){this._twinBoxContainer=new YK.HBoxFactory(false,7);var b=new YK.VBoxFactory(true);var a=new YK.VBoxFactory(true);this._forwardButton=new YK.Button();var c=new YK.Image("",32);c.getNode().className+=" yk_twinbox_doublearrow";this._forwardButton.setImage(c);a.appendChild(this._forwardButton,{expand:true,fill:true,padding:3});b.appendChild(a,{expand:true,fill:false});this._twinBoxContainer.appendChild(this._leftListBox,{expand:true,fill:true});this._twinBoxContainer.appendChild(b,{expand:false,fill:false,padding:1});this._twinBoxContainer.appendChild(this._rightListBox,{expand:true,fill:true})};this._render();this._initEvent()};YK.TwinListBox.prototype=new YK.Widget();YK.TwinListBox.prototype.constructor=YK.TwinListBox;YK.TwinListBox.prototype._initEvent=function(){var a=this;this._forwardButton.connect("clicked",function(){a._moveItemsBetweenListBoxed()});this._leftListBox.connect("rowselected",function(){a._host=a._leftListBox;a._guest=a._rightListBox;a._rightListBox.deSelectRowNodes()});this._rightListBox.connect("rowselected",function(){a._host=a._rightListBox;a._guest=a._leftListBox;a._leftListBox.deSelectRowNodes()});this._leftListBox.connect("rowdblclicked",function(){a._moveItemsBetweenListBoxed()});this._rightListBox.connect("rowdblclicked",function(){a._moveItemsBetweenListBoxed()})};YK.TwinListBox.prototype._moveItemsBetweenListBoxed=function(){var b=this._host.getSelectedItems();if(!b){return}var a=this._host.getNextItemAfterSelectedItems();this._host.removeItems(b);this._guest.addItems(b);if(this._host.isSelectableItemAvailable()){this._host.selectRowNode(a)}};YK.TwinListBox.prototype.configLeftListBox=function(b){var a=this;this._leftListBox.setMenu(b);this._leftListBox.connect("menuselected",function(d){var c=a._leftListBox.getItems();a._commandMap.execute(d,c)})};YK.TwinListBox.prototype.configRightListBox=function(b){var a=this;this._rightListBox.setMenu(b);this._rightListBox.connect("menuselected",function(d){var c=a._rightListBox.getItems();a._commandMap.execute(d,c)})};YK.TwinListBox.prototype.setModel=function(d,c){var a=d===undefined||d===null?new YK.TreeStore():d;var b=c===undefined||c===null?new YK.TreeStore():c;this._leftListBox.setModel(a);this._rightListBox.setModel(b)};YK.TwinListBox.prototype.getItems=function(){return[this._leftListBox.getValueObjs(),this._rightListBox.getValueObjs()]};YK.TwinListBox.prototype.getNode=function(){return this._twinBoxContainer.getNode()};YK.TwinListBox.prototype.getMinWidth=function(){return this._twinBoxContainer.getMinWidth()};YK.TwinListBox.prototype.getMinHeight=function(){return this._twinBoxContainer.getMinHeight()};YK.TwinListBox.prototype.resizeWidth=function(a){this._twinBoxContainer.resizeWidth(a)};YK.TwinListBox.prototype.resizeHeight=function(a){this._twinBoxContainer.resizeHeight(a)};YK.ListBox=function(){YK.Widget.apply(this);this._width=this._minWidth=100;this._height=this._minHeight=100;this._classNameAutoWrap="yk_listbox_auto_wrap_row";this._className="yk_listbox_row";this._selectedRowNode=null;this._selectedRowNodes=[];this._isCtrlDowned=false;this._isMenuCollapsed=true;this._isMultipleRowNodeSelected=false;this._render=function(){this._domObj.className+=" yk_listbox";this._domObj.tabIndex="0";this._rowNodesContainer=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_listbox_row_node_container"})};this._render();this._controller=new YK.ListBoxController(this);this._initEvent()};YK.ListBox.prototype=new YK.Widget();YK.ListBox.prototype.constructor=YK.ListBox;YK.ListBox.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._domObj,"keydown",function(b){if(b.which===17){a._isCtrlDowned=true}});YK.Event.addDomListener(this._domObj,"keyup",function(b){if(b.which===17){a._isCtrlDowned=false}});YK.Event.addDomListener(this._domObj,"click",function(c){var b=c.target;if(YK.Util.isMatched("yk_listbox_deactivated",b.className)){return}(a._isCtrlDowned)?a._handleMultipleRowNodeSelection(b):a._handleOneRowNodeSelection(b);a.emit("rowselected")});YK.Event.addDomListener(this._domObj,"keyup",function(b){switch(b.keyCode){case YK.DOWN_ARROW_KEY:a._hilightNextRowNode();return;case YK.UP_ARROW_KEY:a._hilightPreviousRowNode();return}});YK.Event.addDomListener(this._domObj,"dblclick",function(b){a.emit("rowdblclicked")})};YK.ListBox.prototype.setMenu=function(b){var c=new YK.ListBoxMenu(),a=this;c.buildMenu(b);this._domObj.insertBefore(c.getNode(),this._rowNodesContainer);c.connect("menuselected",function(d){a.emit("menuselected",d)})};YK.ListBox.prototype.setModel=function(a){this._controller.setModel(a)};YK.ListBox.prototype.getItems=function(){return this._rowNodesContainer};YK.ListBox.prototype.getValueObjs=function(){var d=this._rowNodesContainer.childNodes,b=[];for(var c=0,a=d.length;c<a;c++){b.push(d[c].data)}return b};YK.ListBox.prototype.getSelectedItems=function(){var d=[];if(this._isMultipleRowNodeSelected){var c=this._rowNodesContainer.childNodes;for(var b=0,a=c.length;b<a;b++){if(c[b].style.backgroundColor=="rgb(255, 255, 102)"){d.push(c[b])}}return d}if(this._selectedRowNode){return[this._selectedRowNode]}};YK.ListBox.prototype.getNextItemAfterSelectedItems=function(){var b=this.getSelectedItems();var a=b[b.length-1];return this._getNextSelectableNode(a)};YK.ListBox.prototype.removeItems=function(c){this._selectedRowNode=null;var b=[];for(var a=c.length;a--;){this._rowNodesContainer.removeChild(c[a]);b.push(c[a].modelId)}this.emit("_nodesdeleted",b)};YK.ListBox.prototype.addItems=function(a){this.emit("_nodeadded",a)};YK.ListBox.prototype.render=function(a,b){this._renderRows(a,b)};YK.ListBox.prototype._positionRowNode=function(a,b){a.style.paddingLeft=15*(b.split(":").length/2-1)+10+"px"};YK.ListBox.prototype._scrollToHilightedRow=function(){var a=this._getSelectedNodeIndex();this._rowNodesContainer.scrollTop=a*18};YK.ListBox.prototype._renderRows=function(d,f){var b=f||document.createDocumentFragment();for(var c=0,a=d.length;c<a;c++){var h=d[c];var g=this._renderRow(b,h);this._positionRowNode(g,h.path)}this._rowNodesContainer.appendChild(b);this._resetClassNameOfRowNode()};YK.ListBox.prototype._renderRow=function(a,d){var b=d.autoWrap?this._classNameAutoWrap:this._className;var c=YK.domBuilder.create({tag:"div",append:a,text:d.display,className:b});c.modelId=d.path;c.permanantClass=b;c.data=d.valueObject;if(!d.selectable){c.className+=" yk_listbox_deactivated"}if(d.hasChildNodes){c.className+=" yk_listbox_row_group";this.emit("_rendersubnodes",d.path,a)}return c};YK.ListBox.prototype._resetClassNameOfRowNode=function(){var b=this._rowNodesContainer.childNodes;for(var a=b.length;a--;){b[a].id=this._className+"_"+a+"_"+this._id}};YK.ListBox.prototype._handleMultipleRowNodeSelection=function(b){var a=b.style.backgroundColor=="rgb(255, 255, 102)"&&this._isCtrlDowned;if(a){if(this.selectRowNode){this.deHilightSelectedRow(b)}}else{this._hilightElement(b);this._isMultipleRowNodeSelected=true}};YK.ListBox.prototype._handleOneRowNodeSelection=function(b){var a=this._isMatched(b);if(a){this.selectRowNode(b);this._isMultipleRowNodeSelected=false}};YK.ListBox.prototype.deSelectRowNodes=function(){var b=this._rowNodesContainer.childNodes;for(var a=b.length;a--;){YK.domBuilder.applyAttributes(b[a],{backgroundColor:"#FFF"})}};YK.ListBox.prototype.deHilightSelectedRow=function(a){YK.domBuilder.applyAttributes(a,{backgroundColor:"#FFF"})};YK.ListBox.prototype._hilightElement=function(a){YK.domBuilder.applyAttributes(a,{backgroundColor:"#FFFF66"})};YK.ListBox.prototype.selectRowNode=function(a){if(this._selectedRowNode){this.deHilightSelectedRow(this._selectedRowNode)}if(this._isMultipleRowNodeSelected){this.deSelectRowNodes()}this._selectedRowNode=a;this._hilightElement(this._selectedRowNode)};YK.ListBox.prototype._hilightNextRowNode=function(){var a=this._getNextSelectableNode(this._selectedRowNode);this.selectRowNode(a);this._scrollToHilightedRow()};YK.ListBox.prototype._hilightPreviousRowNode=function(){var a=this._getPreviousSelectableNode(this._selectedRowNode)||this._selectedRowNode;this.selectRowNode(a);this._scrollToHilightedRow()};YK.ListBox.prototype._getPreviousSelectableNode=function(a){var a=a||this._rowNodesContainer.firstChild;var c=a.previousSibling||this._rowNodesContainer.lastChild;if(!c){return}var b=this._isMatched(c);c=b?c:this._getPreviousSelectableNode(c);return c};YK.ListBox.prototype._getNextSelectableNode=function(b){var b=b||this._rowNodesContainer.firstChild;var a=b.nextSibling||this._rowNodesContainer.firstChild;if(!this.isSelectableItemAvailable()){return null}var c=this._isMatched(a);a=c?a:this._getNextSelectableNode(a);return a};YK.ListBox.prototype.isSelectableItemAvailable=function(){var b=this._rowNodesContainer.childNodes;for(var a=b.length;a--;){if(this._isMatched(b[a])){return true}}return false};YK.ListBox.prototype._getSelectedNodeIndex=function(){var c=this._rowNodesContainer.cloneNode(true).childNodes;for(var b=0,a=c.length;b<a;b++){if(YK.Util.isMatched("yk_listbox_row_hilited",c[b].className)){break}}return b};YK.ListBox.prototype._isMatched=function(a){return a.className===this._classNameAutoWrap||a.className===this._className};YK.ListBox.prototype.focus=function(){this._domObj.focus()};gobject.signalNew("_rendersubnodes",YK.ListBox,null,null,[]);gobject.signalNew("_nodesdeleted",YK.ListBox,null,null,[]);gobject.signalNew("_nodeadded",YK.ListBox,null,null,[]);gobject.signalNew("rowselected",YK.ListBox,null,null,[]);gobject.signalNew("rowdblclicked",YK.ListBox,null,null,[]);gobject.signalNew("menuselected",YK.ListBox,null,null,[]);YK.ListBoxController=function(a){this._model=null;var b=this;this._render=function(d,c){var f=this.__mashupModel(d.getChildren());a.render(f,c)};a.connect("_rendersubnodes",function(d,c){var f=b._model.getChildByPath(d);b._render(f,c)});a.connect("_nodesdeleted",function(d){for(var c=d.length;c--;){b._model.removeByPath(d[c])}});a.connect("_nodeadded",function(g){var f=[];for(var c=g.length;c--;){f.push(b._model.append(null,g[c].data))}var d=b.__mashupModel(f);a.render(d,null)})};YK.ListBoxController.prototype.setModel=function(a){this._model=a;this._render(this._model,null)};YK.ListBoxController.prototype.__mashupModel=function(a){var d=[],b,c;for(var f=0,h=a.length;f<h;f++){b=a[f];var l=b.getValue();var c=b.getChildren().length>0;var g=l.autoWrap===undefined?false:l.autoWrap;var k=l.selectable===undefined?true:l.selectable;d.push({display:l.display,hasChildNodes:c,autoWrap:g,selectable:k,path:b.getPath(),valueObject:l})}return d};YK.Calendar=function(a,d,c,b,f){this._id=f;this._dayLabel=["Su","Mo","Tu","We","Th","Fr","Sa"];this._dayShortLabel=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];this._dayFullLabel=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this._monthShortLabel=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this._monthLabel=["January","February","March","April","May","June","July","August","September","October","November","December"];this._daysOfMonth=[31,28,31,30,31,30,31,31,30,31,30,31];this._currentDate=new Date();this._currentDay=this._currentDate.getDate();this._currentMonth=this._currentDate.getMonth()+1;this._currentYear=this._currentDate.getFullYear();this._selectedDate=b;this.html="";this._day=a;this._month=d;this._year=c;this.generateHTML()};YK.Calendar.prototype.generateHTML=function(){var a=new Date(this._year,this._month-1,1);var f=a.getDay();var g=this._daysOfMonth[this._month-1];if(this._month===2){if((this._year%4===0&&this._year%100!=0)||this._year%400===0){g=29}}var l=this._monthLabel[this._month-1];var d='<table class="yk_calendar_table" id="yk_calendar_table">';d+='<tr class="yk_calendar_header"><td colspan="7">';d+='<div class="yk_calendar_header_month" title="Click to change month">';d+='<input type="text" id="yk_calendar_input_month_'+this._id+'" maxlength="10" class="yk_calendar_input_month" value="'+l+'" />';d+="</div>";d+='<img id="yk_calendar_next_month_'+this._id+'"  class="yk_calendar_next_month" title=" Next Month " />';d+='<img id="yk_calendar_previous_month_'+this._id+'" class="yk_calendar_previous_month" title=" Previous Month " />';d+='<div class="yk_calendar_header_year"  title="Click to change year">';d+='<input type="text" id="yk_calendar_input_year_'+this._id+'" maxlength="4" class="yk_calendar_input_year" value="'+this._year+'" />';d+='<img id="yk_calendar_next_year_'+this._id+'" class="yk_calendar_next_year" title=" Next Year " />';d+='<img id="yk_calendar_previous_year_'+this._id+'" class="yk_calendar_previous_year" title=" Previous Year " />';d+="</div>";d+="</td></tr>";d+="<tr>";d+='<td colspan="7"><div class="yk_calendar_line_separator">';d+="</div></td>";d+="</tr>";d+='<tr class="yk_calendar_header_day">';for(var c=0;c<=6;c++){d+='<td class="yk_calendar_each_header_day">';d+=this._dayLabel[c];d+="</td>"}d+="</tr><tr>";var h=1;for(var c=0;c<9;c++){for(var b=0;b<=6;b++){var k="";if(h>g){k='<td class="yk_calendar_day yk_calendar_no_day">'}else{if(h===1){k='<td class="yk_calendar_day yk_calendar_no_day">'}}if(h<=g&&(c>0||b>=f)){if(h===this._currentDay&&this._month===this._currentMonth&&this._year===this._currentYear){k='<td id="'+h+"_"+this._id+'" class="yk_calendar_day yk_calendar_today" title="&nbsp;Today:&nbsp;'+h+"-"+l+"-"+this._year+'&nbsp;">'}else{k='<td id="'+h+"_"+this._id+'" class="yk_calendar_day" title="&nbsp;'+h+"-"+l+"-"+this._year+'&nbsp;">'}if(h===this._selectedDate.day&&this._month===this._selectedDate.month&&this._year===this._selectedDate.year){k='<td id="'+h+"_"+this._id+'" class="yk_calendar_day yk_calendar_selected_day" title="&nbsp;'+h+"-"+l+"-"+this._year+'&nbsp;">'}d+=k;d+=h;h++;d+="</td>"}else{d+=k+"</td>"}}if(h>g){break}else{d+="</tr><tr>"}}d+="</tr></table>";this.html=d};YK.Calendar.prototype.getHTML=function(){return this.html};YK.DatePicker=function(b,a){YK.Widget.apply(this);this._width=this._minWidth=156;this._height=this._minHeight=26;this._isCalendarShown=false;this._currentDate=new Date();this._currentDay=this._currentDate.getDate();this._currentMonth=this._currentDate.getMonth()+1;this._currentYear=this._currentDate.getFullYear();this._dayTwoCharName=["Su","Mo","Tu","We","Th","Fr","Sa"];this._dayShortName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];this._dayFullName=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this._monthShortName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this._monthFullName=["January","February","March","April","May","June","July","August","September","October","November","December"];this._defaultCurrentDate={day:this._currentDay,month:this._currentMonth,year:this._currentYear};if(typeof b!=="undefined"){this._dateValues={day:b.day||this._currentDay,month:b.month||this._currentMonth,year:b.year||this._currentYear}}else{this._dateValues=this._defaultCurrentDate}this._defaultFormat="dd/mm/yyyy";this._dateFormat=a||this._defaultFormat;this._render=function(){this._domObj.className+=" yk_date_picker";this._domObj.setAttribute("id","yk_date_picker"+this._id);this._domObj.setAttribute("title","Date Format: "+this._dateFormat);this._dateEntry=new YK.Entry();this._dateEntry.resetMinSize(120,20);this._dateEntry.resizeWidth(120);this._dateEntry.resizeHeight(22);this._dateEntry.setReadonly();this._dateEntry.getNode().style.position="relative";this._dateEntry.getNode().style.display="inline-block";this._domObj.appendChild(this._dateEntry.getNode());this._dateImage=YK.domBuilder.create({append:this._domObj,tag:"div",className:"yk_date_picker_image",title:"Show Calendar"});this._calendarWrapper=YK.domBuilder.create({append:document.body,tag:"div",className:"yk_date_picker_calendar_wrapper"});this._domObj.style.width=this._width+"px";this._domObj.style.height=this._height+"px"};this._render();this._initEvent();this._receivePublicEvents();this.setDate(this._dateValues)};YK.DatePicker.prototype=new YK.Widget();YK.DatePicker.prototype.constructor=YK.DatePicker;YK.DatePicker.prototype._initEvent=function(){var a=this;var b=YK.Event;b.addDomListener(this._domObj,"click",function(c){if(!a._isCalendarShown){a._showDatePicker()}YK.Event.stopBubble(c)})};YK.DatePicker.prototype._receivePublicEvents=function(){var a=this;YK.Event.addPublicListener(this,"deactivated",function(){a._hideDatePicker()});YK.Event.addPublicListener(this,"mousedowned",function(){a._hideDatePicker()})};YK.DatePicker.prototype._initEventCalendar=function(){var l=this;var d=YK.Event;var g=document.getElementById("yk_calendar_table");d.addDomListener(g,"click",function(n){var m=n.target.id;if(m!==""){var o=parseInt(YK.Util.trim(m));l.setDate({day:o,month:l._month,year:l._year});l._hideDatePicker();YK.Event.stopBubble(n)}});g.tabIndex="auto";d.addDomListener(g,"keydown",function(n){var m=(n.which)?n.which:n.keyCode;if(m===27){l._hideDatePicker();return}});var a=document.getElementById("yk_calendar_previous_month_"+this._id);d.addDomListener(a,"click",function(m){l._goToPreviousMonth();YK.Event.stopBubble(m)});var f=document.getElementById("yk_calendar_next_month_"+this._id);d.addDomListener(f,"click",function(m){l._goToNextMonth();YK.Event.stopBubble(m)});var k=document.getElementById("yk_calendar_next_year_"+this._id);d.addDomListener(k,"click",function(m){l._goToNextYear();YK.Event.stopBubble(m)});var b=document.getElementById("yk_calendar_previous_year_"+this._id);d.addDomListener(b,"click",function(m){l._goToPreviousYear();YK.Event.stopBubble(m)});var h=document.getElementById("yk_calendar_input_month_"+this._id);d.addDomListener(h,"click",function(m){h.select();YK.Event.stopBubble(m)});d.addDomListener(h,"keydown",function(n){var m=(n.which)?n.which:n.keyCode;if(m===38){l._goToNextMonth();return}if(m===40){l._goToPreviousMonth();return}YK.Event.stopBubble(n)});d.addDomListener(h,"keyup",function(n){var m=YK.Util.trim(h.value).toLowerCase();m=l._checkAndGiveSuggestion(h,m);if(m!==0){l._goToMonth(m)}YK.Event.stopBubble(n)});var c=document.getElementById("yk_calendar_input_year_"+this._id);d.addDomListener(c,"click",function(m){c.select();YK.Event.stopBubble(m)});d.addDomListener(c,"keydown",function(n){var m=(n.which)?n.which:n.keyCode;if(m===38){l._goToNextYear();return}if(m===40){l._goToPreviousYear();return}YK.Event.stopBubble(n)});d.addDomListener(c,"keyup",function(m){var n=parseInt(YK.Util.trim(c.value));if(m.keyCode===YK.ENTER_KEY){if(n<1900){n=l._currentYear}l._goToYear(n);YK.Event.stopBubble(m)}if((n+"").length>=4){if(n<1900){n=l._currentYear}l._goToYear(n);YK.Event.stopBubble(m)}});d.addDomListener(c,"keypress",function(m){if(!l._allowNumericKeyOnly(m)){YK.Event.stopDefault(m);return}})};YK.DatePicker.prototype._allowNumericKeyOnly=function(b){var a=(b.which)?b.which:b.keyCode;if(a>31&&(a<48||a>57)&&a!==8&&a!==37&&a!==39){return false}return true};YK.DatePicker.prototype._checkAndGiveSuggestion=function(a,b){switch(b){case"ja":a.value=this._monthFullName[0];return 1;break;case"jan":a.value=this._monthFullName[0];return 1;break;case"f":a.value=this._monthFullName[1];return 2;break;case"fe":a.value=this._monthFullName[1];return 2;break;case"mar":a.value=this._monthFullName[2];return 3;break;case"ap":a.value=this._monthFullName[3];return 4;break;case"may":a.value=this._monthFullName[4];return 5;break;case"jun":a.value=this._monthFullName[5];return 6;break;case"jul":a.value=this._monthFullName[6];return 7;break;case"au":a.value=this._monthFullName[7];return 8;break;case"s":a.value=this._monthFullName[8];return 9;break;case"se":a.value=this._monthFullName[8];return 9;break;case"o":a.value=this._monthFullName[9];return 10;break;case"oc":a.value=this._monthFullName[9];return 10;break;case"n":a.value=this._monthFullName[10];return 11;break;case"no":a.value=this._monthFullName[10];return 11;break;case"d":a.value=this._monthFullName[11];return 12;break;case"de":a.value=this._monthFullName[11];return 12;break;default:return 0}};YK.DatePicker.prototype._showDatePicker=function(){this._isCalendarShown=true;this._updateInitCalendarData();this._setPosition();YK.Effect.setOpacity(this._calendarWrapper,0,100,300,60)};YK.DatePicker.prototype._setCalendarValue=function(){this._year=this._datePickerObj._year;this._month=this._datePickerObj._month;this._day=this._datePickerObj._day};YK.DatePicker.prototype._updateInitCalendarData=function(){this._datePickerObj=new YK.Calendar(this._dateValues.day,this._dateValues.month,this._dateValues.year,this._dateValues,this._id);this._calendarWrapper.innerHTML="";this._calendarWrapper.innerHTML=this._datePickerObj.getHTML();this._initEventCalendar()};YK.DatePicker.prototype._updateCalendarData=function(){this._datePickerObj=new YK.Calendar(this._day,this._month,this._year,this._dateValues,this._id);this._calendarWrapper.innerHTML="";this._calendarWrapper.innerHTML=this._datePickerObj.getHTML();this._initEventCalendar()};YK.DatePicker.prototype._goToPreviousYear=function(){this._setCalendarValue();this._decrementYear();this._updateCalendarData();this._setSelectionYearEntry()};YK.DatePicker.prototype._goToPreviousMonth=function(){this._setCalendarValue();this._decrementMonth();this._updateCalendarData();this._setSelectionMonthEntry()};YK.DatePicker.prototype._goToNextMonth=function(){this._setCalendarValue();this._incrementMonth();this._updateCalendarData();this._setSelectionMonthEntry()};YK.DatePicker.prototype._goToNextYear=function(){this._setCalendarValue();this._incrementYear();this._updateCalendarData();this._setSelectionYearEntry()};YK.DatePicker.prototype._goToYear=function(a){this._year=a;this._updateCalendarData();this._setSelectionYearEntry()};YK.DatePicker.prototype._setSelectionYearEntry=function(){var a=document.getElementById("yk_calendar_input_year_"+this._id);a.select()};YK.DatePicker.prototype._goToMonth=function(a){this._month=a;this._updateCalendarData();this._setSelectionMonthEntry()};YK.DatePicker.prototype._setSelectionMonthEntry=function(){var a=document.getElementById("yk_calendar_input_month_"+this._id);a.select()};YK.DatePicker.prototype._decrementMonth=function(){if(this._month>1){this._month--}else{this._year--;this._month=12}};YK.DatePicker.prototype._decrementYear=function(){this._year--};YK.DatePicker.prototype._incrementYear=function(){this._year++};YK.DatePicker.prototype._incrementMonth=function(){if(this._month>11){this._year++;this._month=1}else{this._month++}};YK.DatePicker.prototype._hideDatePicker=function(){this._isCalendarShown=false;this._calendarWrapper.innerHTML=""};YK.DatePicker.prototype._setPosition=function(){var b=YK.Util.pageY(this._dateEntry.getNode())+this._dateEntry._height+5;var a=YK.Util.pageX(this._dateEntry.getNode());this._calendarWrapper.style.top=b+"px";this._calendarWrapper.style.left=a+"px"};YK.DatePicker.prototype.setDate=function(a){if(a!==null){this._dateValues={day:a.day||this._currentDay,month:a.month||this._currentMonth,year:a.year||this._currentYear}}else{this._dateValues=this._defaultCurrentDate}if(!this.isValidDate(this._dateValues.year,this._dateValues.month,this._dateValues.day)){this._dateValues=this._defaultCurrentDate}this._assignDateValues();this._setFormatString();this._dateEntry.setText(this._dateFormatString)};YK.DatePicker.prototype._assignDateValues=function(){this._day=this._dateValues.day;this._month=this._dateValues.month;this._year=this._dateValues.year};YK.DatePicker.prototype._setFormatString=function(){if(this._dateFormat==="dd/mm/yyyy"){this._dateFormatString=this._day+"/"+this._month+"/"+this._year;return}if(this._dateFormat==="mm/dd/yyyy"){this._dateFormatString=this._month+"/"+this._day+"/"+this._year;return}if(this._dateFormat==="yyyy/mm/dd"){this._dateFormatString=this._year+"/"+this._month+"/"+this._day;return}if(this._dateFormat==="yyyy/dd/mm"){this._dateFormatString=this._year+"/"+this._day+"/"+this._month;return}if(this._dateFormat==="dd-mm-yyyy"){this._dateFormatString=this._day+"-"+this._month+"-"+this._year;return}if(this._dateFormat==="mm-dd-yyyy"){this._dateFormatString=this._month+"-"+this._day+"-"+this._year;return}if(this._dateFormat==="yyyy-mm-dd"){this._dateFormatString=this._year+"-"+this._month+"-"+this._day;return}if(this._dateFormat==="yyyy-dd-mm"){this._dateFormatString=this._year+"-"+this._day+"-"+this._month;return}};YK.DatePicker.prototype.getDate=function(){return this._dateValues};YK.DatePicker.prototype.getDateString=function(){return this._dateFormatString};YK.DatePicker.prototype.isValidDate=function(c,d,b){var a=new Date(c,d-1,b);return c==a.getFullYear()&&d==a.getMonth()+1&&b==a.getDate()};YK.DatePicker.prototype.isLeapYear=function(a){return !!((a&3)===0&&(a%100||(a%400===0&&a)))};YK.DatePicker.prototype.y2k=function(a){return(a<1000)?a+1900:a};YK.DatePicker.prototype.getFormat=function(){return this._dateFormat};YK.DatePicker.prototype.setFormat=function(a){this._dateFormat=a||this._defaultFormat;this._domObj.setAttribute("title","Date Format: "+this._dateFormat)};gobject.signalNew("datechanged",YK.DatePicker,null,null,[]);YK.Scale=function(b,a){YK.Widget.apply(this);this._width=this._minWidth=300;this._height=this._minHeight=18;this._leftPaddingOfScaleBar=16;this._handlePosition=0;this._xBegin=b||0;this._xEnd=a||10;this._currentScale=this._xBegin;this._render=function(){this._domObj.className+=" yk_scale";this._scaleFrame=YK.domBuilder.create({append:this._domObj,tag:"div","class":"yk_scale_frame"});this._scaleBar=YK.domBuilder.create({append:this._scaleFrame,tag:"div","class":"yk_scale_bar"});this._handle=YK.domBuilder.create({append:this._scaleFrame,tag:"div","class":"yk_scale_handle"})};this._render();this._initEvent()};YK.Scale.prototype=new YK.Widget();YK.Scale.prototype.constructor=YK.Scale;YK.Scale.prototype.setScale=function(f){if(f<this._xBegin||f>this._xEnd){return}var b=f-this._xBegin;var d=this._xEnd-this._xBegin;var c=parseInt(this._width/d);var a=b*c;this._animateHandleTo(a)};YK.Scale.prototype.getScale=function(){return this._currentScale};YK.Scale.prototype._initEvent=function(){var a=this;YK.Event.addDomListener(this._scaleBar,"mouseover",function(b){if(a._handlePosition>b.layerX){a._scaleBar.className+=" pull_backward"}else{a._scaleBar.className="yk_scale_bar"}});YK.Event.addDomListener(this._scaleBar,"click",function(c){var b=c.layerX;a._animateHandleTo(b)})};YK.Scale.prototype._animateHandleTo=function(a){var c=a-this._handlePosition;var b=this,f=(c>0)?0:20;var d=window.setInterval(function(){b._handle.style.left=b._handlePosition+"px";if(c>0){b._handlePosition+=1;f+=1;if(f>=20){b._handle.style.left=a+"px";b._handlePosition=a;clearInterval(d)}}else{b._handlePosition-=1;f-=1;if(f<=0){b._handle.style.left=a+"px";b._handlePosition=a;b._resetScalePosition(a);clearInterval(d)}}},1)};YK.Scale.prototype._resizeWidth=function(a){this._width=a;this._domObj.style.width=a+"px";this._scaleFrame.style.width=a-2+"px";this._scaleBar.style.width=a-this._leftPaddingOfScaleBar+"px";this._reScale()};YK.Scale.prototype._resizeHeight=function(a){this._height=a;this._domObj.style.height=a+"px";this._scaleFrame.style.top=a/2-this._minHeight/2+"px"};YK.Scale.prototype._reScale=function(){this._reCalculateScale();this._initHDrag()};YK.Scale.prototype._reCalculateScale=function(){var b=this._getDistantBetweenEachScale();var c=0;this._scals=[];for(var a=this._xBegin;a<=this._xEnd;a++){this._scals.push(c);c+=b}};YK.Scale.prototype._initHDrag=function(){var a=this;YK.LibAdapter.hDragInit(this._handle,1,this._width-15);this._handle.onDragStart=function(b,d,c){this.style.backgroundColor="#3BFFF5";this.style.opacity="0.5"};this._handle.onDrag=function(b){a._resetScalePosition(b)};this._handle.onDragEnd=function(b,d,c){this.style.backgroundColor="#BEFFFC";this.style.opacity="";a._handlePosition=b;a._resetScalePosition(b)}};YK.Scale.prototype._resetScalePosition=function(a){for(var b=0;b<this._scals.length;b++){if(a<this._scals[b]){break}}var d=this._getDistantBetweenEachScale();var c=a-this._scals[b-1];var f=c/d;this._currentScale=b+f-1;this.emit("changed",this._currentScale)};YK.Scale.prototype._getDistantBetweenEachScale=function(){var b=this._xEnd-this._xBegin;var a=(this._width-15)/b;return a};gobject.signalNew("changed",YK.Scale,null,null,[]);