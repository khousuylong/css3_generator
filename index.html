<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Another CSS3 generator</title>
<!--		<link type="text/css" rel="stylesheet" href="sh_hili/styles/sh_berries-dark.css">-->
		<link rel="stylesheet" type="text/css" href="lib/yoolkui/css/yoolk-ui_min_0.7.40.css" />
		<script type="text/javascript" src="lib/yoolkui/src/yoolk-ui_min_0.7.40.js"></script>
		<script type="text/javascript" src="lib/jscolor/jscolor.js"></script>

		<script type="text/javascript" src="javascript/css.js"></script>
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<style>

			.yk_window_header_base{
				background-image: -moz-linear-gradient(19% 100% 90deg,#C9C9C9, #7D7D7D, #A1A1A1 100%);
				background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#C9C9C9), color-stop(0.6, #A1A1A1), to(rgb(132, 132, 132)));
			}
		</style>
	   
		<script type="text/javascript" src="widget_list.js"></script>
		<script>
			window.onload = function(){

				 var hPaned = new YK.HPaned();

					listPanel = new YK.Panel("CSS3 Features");
						var scroller = new YK.VScroller();
						 	var treeview = new YK.TreeView();
							//setModel
							treeview.setModel(model);
						scroller.appendChild(treeview, true);
					listPanel.appendChild(scroller);
					listPanel.disableCloseButton(); 

				hPaned.pack1(listPanel, true, false);
					var vBox = new YK.VBoxFactory(false, 5);
						var hBox = new YK.HBoxFactory(false, 5);
								var generatorPanel = new YK.Panel("GENERATOR");
								generatorPanel.disableCloseButton();
									generatorScroller = new YK.VScroller();
										generatorScroller.getNode().setAttribute("id", "show_content_area");
									generatorScroller.appendChild(new YK.Label("generator"), true);

								generatorPanel.appendChild(generatorScroller);

						hBox.appendChild(generatorPanel, {"expand": true, "fill": true});
							var outputPanel = new YK.Panel("PREVIEW");
								outputPanel.disableCloseButton();

							outputPanel.appendChild(new YK.Label("output"));							
						hBox.appendChild(outputPanel, {"expand": true, "fill": true});

					vBox.appendChild(hBox, {"expand": true, "fill": true});
						var codePanel = new YK.Panel("CSS3");
						codePanel.resetMinHeight(200);
						codePanel.disableCloseButton();
							codeScroller = new YK.VScroller();
								codeScroller.getNode().setAttribute("id", "show_content_area");
							codeScroller.appendChild(new YK.Label("css3 for all supported browsers"), true);

						codePanel.appendChild(codeScroller);
					vBox.appendChild(codePanel, {"expand": false, "fill": false});
				hPaned.pack2(vBox, true, false);
				hPaned.setPosition(200);

				hPaned.resizeWidth(window.innerWidth - 2);
				hPaned.resizeHeight(window.innerHeight - 4);
				hPaned.getNode().style.paddingLeft = "1px";

				document.body.appendChild(hPaned.getNode());

				treeview.connect("nodeselected", function(value){

					var cssCodeScript = createHeaderScriptTag(value["cssCode"]);
					cssCodeScript.onload = function(){
						codeScroller.appendChild(new CSS3.cssCode(), true);
					};

					var outputScript = createHeaderScriptTag(value["output"]);
					outputScript.onload = function(){
						outputPanel.appendChild(new CSS3.outputBox, {"expand": true, "fill": false}, {"expand": true, "fill": false});
					};

					var generatorScript = createHeaderScriptTag(value["generator"]);
					generatorScript.onload = function(){
						generatorScroller.appendChild(new CSS3.generatorBox(), true);
					};
				});
		};

		var createHeaderScriptTag = function(src){
			var headID = document.getElementsByTagName("head")[0];
				var newScript = document.createElement('script');
				newScript.type = 'text/javascript';
				newScript.src = src;
				newScript.id = "new_script";

			var oldScript = document.getElementById("new_script");
			if(oldScript) headID.removeChild(oldScript);

			headID.appendChild(newScript);
			return newScript;
		};

		</script>
</head>
	<body scroll="no" style="overflow: hidden">
<!--		<input class="color {pickerMode:'HSV'}" value="66ff00">-->
	</body>
</html>
