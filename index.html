<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Another CSS3 generator</title>
<!--		<link type="text/css" rel="stylesheet" href="sh_hili/styles/sh_berries-dark.css">-->
		<link rel="stylesheet" type="text/css" href="lib/yoolkui/css/yoolk-ui_min_0.19.48.css" />
		<script type="text/javascript" src="lib/yoolkui/src/yoolk-ui_min_0.19.52.js"></script>
		<script type="text/javascript" src="lib/jscolor/jscolor.js"></script>

		<script type="text/javascript" src="javascript/css.js"></script>
		<link rel="stylesheet" type="text/css" href="css/main.css" />

		<script type="text/javascript" src="widget_list.js"></script>
		<script>
			window.onload = function(){

				 //Main HPand
				 var hPaned = new YK.HPaned();
					
					//Widget list panel
					featurePanel = new YK.Panel("CSS3 Features");
						var scroller = new YK.VScroller();
						 	var treeview = new YK.TreeView();
							treeview.setModel(model);
						scroller.appendChild(treeview, true);
					featurePanel.appendChild(scroller);
					featurePanel.disableCloseButton(); 

				hPaned.pack1(featurePanel);
					
					//Generator, Preview, Code VPaned
					var vPaned = new YK.VPaned();
						
						//Generator, Preview HPaned
						var hPaned1 = new YK.HPaned();
							var generatorPanel = new YK.Panel("GENERATOR");
								generatorPanel.disableCloseButton();
									generatorScroller = new YK.VScroller();
										generatorScroller.getNode().setAttribute("id", "show_content_area");
									generatorScroller.appendChild(new YK.Label("GENERATOR"), true);

							generatorPanel.appendChild(generatorScroller);
						hPaned1.pack1( generatorPanel );
							var outputPanel = new YK.Panel("PREVIEW");
								outputPanel.disableCloseButton();
									previewScroller = new YK.VScroller();
										previewScroller.getNode().setAttribute("id", "show_content_area");
									previewScroller.appendChild(new YK.Label("PREVIEW"), true);
							outputPanel.appendChild(previewScroller);	
						hPaned1.pack2( outputPanel )
					vPaned.pack1( hPaned1 );
							var codePanel = new YK.Panel("CSS3");
							codePanel.resetMinHeight(200);
							codePanel.disableCloseButton();
								codeScroller = new YK.VScroller();
									codeScroller.getNode().setAttribute("id", "show_content_area");
								codeScroller.appendChild(new YK.Label("css3 for all supported browsers"), true);

							codePanel.appendChild(codeScroller);
					vPaned.pack2(codePanel);
					vPaned.setPosition(500);
				hPaned.pack2(vPaned);
				hPaned.setPosition(200);

				hPaned.resizeWidth(window.innerWidth - 8);
				hPaned.resizeHeight(window.innerHeight - 5);
				hPaned.getNode().style.paddingLeft = "1px";

				document.body.appendChild(hPaned.getNode());

				treeview.connect("nodeselected", function(value){

					var cssCodeScript = createHeaderScriptTag(value["cssCode"]);
					cssCodeScript.onload = function(){
						codeScroller.appendChild(new CSS3.cssCode(), true);
					};

					var outputScript = createHeaderScriptTag(value["output"]);
					outputScript.onload = function(){
						previewScroller.appendChild(new CSS3.outputBox, true);
					};

					var generatorScript = createHeaderScriptTag(value["generator"]);
					generatorScript.onload = function(){
						generatorScroller.appendChild(new CSS3.generatorBox(), true);
					};
				});

				featurePanel.connect("minimized", function(){
					hPaned.autoResize(featurePanel);
				});
				featurePanel.connect("restored", function(){
					hPaned.restoreStatus(featurePanel);
				});

				codePanel.connect("minimized", function(){
					vPaned.autoResize(codePanel);
				});
				codePanel.connect("restored", function(){
					vPaned.restoreStatus(codePanel);
				});

				generatorPanel.connect("minimized", function(){
					hPaned1.autoResize(generatorPanel);
				});

				generatorPanel.connect("restored", function(){
					hPaned1.restoreStatus(generatorPanel);
				});

				outputPanel.connect("minimized", function(){
					hPaned1.autoResize(outputPanel);
				});

				outputPanel.connect("restored", function(){
					hPaned1.restoreStatus(outputPanel);
				});

				hPaned1.connect("childrendminimize", function(){
					vPaned.autoResize(hPaned1);
				});
				hPaned1.connect("childrestore", function(){
					vPaned.restoreStatus(hPaned1);
				});

<!--				vPaned.connect("childrendminimize", function(){-->
<!--					hPaned.autoResize(vPaned);-->
<!--				});-->
<!--				vPaned.connect("childrestore", function(){-->
<!--					hPaned.restoreStatus(vPaned);-->
<!--				});-->
		};

		var createHeaderScriptTag = function(src){
			var headID = document.getElementsByTagName("head")[0];
				var newScript = document.createElement('script');
				newScript.type = 'text/javascript';
				newScript.src = src;
				newScript.id = "new_script";

			var oldScript = document.getElementById("new_script");
			if(oldScript) headID.removeChild(oldScript);

			headID.appendChild(newScript);
			return newScript;
		};

		</script>
</head>
	<body scroll="no" style="overflow: hidden">
<!--		<input class="color {pickerMode:'HSV'}" value="66ff00">-->
	</body>
</html>
